<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">





  <link rel="alternate" href="/atom.xml" title="小二、上酒" type="application/atom+xml">






<meta name="description" content="人生当苦无妨，良人当归即好">
<meta property="og:type" content="website">
<meta property="og:title" content="小二、上酒">
<meta property="og:url" content="http://yoursite.com/page/7/index.html">
<meta property="og:site_name" content="小二、上酒">
<meta property="og:description" content="人生当苦无妨，良人当归即好">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="小二、上酒">
<meta name="twitter:description" content="人生当苦无妨，良人当归即好">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"always","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/7/">





  <title>小二、上酒</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">小二、上酒</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/04/05/vue-echarts/echarts学习/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="朱程程">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/first.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小二、上酒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/04/05/vue-echarts/echarts学习/" itemprop="url">Echarts学习</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-04-05T17:38:14+08:00">
                2022-04-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/vue-echarts/" itemprop="url" rel="index">
                    <span itemprop="name">vue-echarts</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Echarts学习"><a href="#Echarts学习" class="headerlink" title="Echarts学习"></a>Echarts学习</h1><h2 id="一、Echarts特性"><a href="#一、Echarts特性" class="headerlink" title="一、Echarts特性"></a>一、Echarts特性</h2><ul>
<li><strong>丰富的可视化类型</strong>：提供了常规的折线图、柱状图、散点图、饼图、K线图，用于统计的盒形图，用于地理数据可视化的地图、热力图、线图，用于关系数据可视化的关系图、treemap、旭日图，多维数据可视化的平行坐标，还有用于 BI 的漏斗图，仪表盘，并且支持图与图之间的混搭。</li>
<li><strong>多种数据格式无需转换直接使用</strong>：内置的dataset属性支持直接传入包括二维表，key-value等多种格式的数据源，此外还支持输入TypedArray格式的数据。</li>
<li><strong>动态数据</strong>：数据的改变驱动图表展现的改变</li>
<li><strong>千万数据的前端展示</strong>：通过增量渲染技术，配合各种细致的优化，能够展现千万级的数据量</li>
<li><strong>移动端优化</strong>： 针对移动端交互做了细致的优化，例如移动端小屏上适于用手指在坐标系中进行缩放、平移。 PC 端也可以用鼠标在图中进行缩放（用鼠标滚轮）、平移等。</li>
<li><strong>多渲染方案、跨平台使用</strong>：支持以canvas、SVG、VML的形式渲染的图表</li>
<li><strong>深度的交互式数据探索</strong>：提供了图例、视觉映射、数据区域缩放、tooltip、数据刷选等开箱即用的交互组件，可以对数据进行多维数据筛取、视图缩放、展示细节等交互操作。</li>
<li><strong>多维数据的支持以及丰富的视觉编码手段</strong>：对于传统的散点图等，传入的数据也可以是多个维度的。</li>
<li><strong>绚丽的特效</strong>：针对线数据，点数据等地理数据的可视化提供了吸引眼球的特效</li>
</ul>
<h2 id="二、安装"><a href="#二、安装" class="headerlink" title="二、安装"></a>二、安装</h2><p>cnpm install echarts –save<br>通过 npm 安装的 echarts 会出现在 myProject/node_modules 目录下，从而可以直接在项目代码中得到 echarts</p>
<h2 id="三、配置语法"><a href="#三、配置语法" class="headerlink" title="三、配置语法"></a>三、配置语法</h2><h3 id="第一步：创建html页面"><a href="#第一步：创建html页面" class="headerlink" title="第一步：创建html页面"></a>第一步：创建html页面</h3><p>创建一个 HTML 页面，引入 echarts.min.js：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;!-- 引入 ECharts 文件 --&gt;</span><br><span class="line">    &lt;script src=&quot;echarts.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="第二步-为-ECharts-准备一个具备高宽的-DOM-容器"><a href="#第二步-为-ECharts-准备一个具备高宽的-DOM-容器" class="headerlink" title="第二步: 为 ECharts 准备一个具备高宽的 DOM 容器"></a>第二步: 为 ECharts 准备一个具备高宽的 DOM 容器</h3><p>实例中 id 为 main 的 div 用于包含 ECharts 绘制的图表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;!-- 为 ECharts 准备一个具备大小（宽高）的 DOM --&gt;</span><br><span class="line">    &lt;div id=&quot;main&quot; style=&quot;width: 600px;height:400px;&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<p>在vue中引入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import echarts from &apos;echarts&apos;</span><br></pre></td></tr></table></figure>

<h3 id="第三步-设置配置信息"><a href="#第三步-设置配置信息" class="headerlink" title="第三步: 设置配置信息"></a>第三步: 设置配置信息</h3><p>ECharts 库使用 json 格式来配置。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echarts.init(document.getElementById(&apos;main&apos;)).setOption(option);</span><br></pre></td></tr></table></figure>

<p>这里的option表示使用json数据格式的配置来绘制图表</p>
<h5 id="标题"><a href="#标题" class="headerlink" title="标题"></a>标题</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">title: &#123;</span><br><span class="line">    text: &apos;第一个 ECharts 实例&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="提示信息"><a href="#提示信息" class="headerlink" title="提示信息"></a>提示信息</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">tooltip =&#123;                                      //提示框组件</span><br><span class="line">    trigger: &apos;item&apos;,                            //触发类型,&apos;item&apos;数据项图形触发，主要在散点图，饼图等无类目轴的图表中使用。 &apos;axis&apos;坐标轴触发，主要在柱状图，折线图等会使用类目轴的图表中使用。</span><br><span class="line">    triggerOn:&quot;mousemove&quot;,                      //提示框触发的条件,&apos;mousemove&apos;鼠标移动时触发。&apos;click&apos;鼠标点击时触发。&apos;mousemove|click&apos;同时鼠标移动和点击时触发。&apos;none&apos;不在 &apos;mousemove&apos; 或 &apos;click&apos; 时触发</span><br><span class="line">    showContent:true,                           //是否显示提示框浮层</span><br><span class="line">    alwaysShowContent:true,                     //是否永远显示提示框内容</span><br><span class="line">    showDelay:0,                                  //浮层显示的延迟，单位为 ms</span><br><span class="line">    hideDelay:100,                                //浮层隐藏的延迟，单位为 ms</span><br><span class="line">    enterable:false,                             //鼠标是否可进入提示框浮层中</span><br><span class="line">    confine:false,                               //是否将 tooltip 框限制在图表的区域内</span><br><span class="line">    transitionDuration:0.4,                      //提示框浮层的移动动画过渡时间，单位是 s,设置为 0 的时候会紧跟着鼠标移动</span><br><span class="line">    position:[&apos;50%&apos;, &apos;50%&apos;],                    //提示框浮层的位置，默认不设置时位置会跟随鼠标的位置,[10, 10],回掉函数，inside鼠标所在图形的内部中心位置，top、left、bottom、right鼠标所在图形上侧，左侧，下侧，右侧，</span><br><span class="line">    formatter:&quot;&#123;b0&#125;: &#123;c0&#125;&lt;br /&gt;&#123;b1&#125;: &#123;c1&#125;&quot;,     //提示框浮层内容格式器，支持字符串模板和回调函数两种形式,模板变量有 &#123;a&#125;, &#123;b&#125;，&#123;c&#125;，&#123;d&#125;，&#123;e&#125;，分别表示系列名，数据名，数据值等</span><br><span class="line">    backgroundColor:&quot;transparent&quot;,            //标题背景色</span><br><span class="line">    borderColor:&quot;#ccc&quot;,                        //边框颜色</span><br><span class="line">    borderWidth:0,                              //边框线宽</span><br><span class="line">    padding:5,                                  //图例内边距，单位px  5  [5, 10]  [5,10,5,10]</span><br><span class="line">    textStyle:mytextStyle,                     //文本样式</span><br><span class="line">    axisPointer: &#123; // 坐标轴指示器，坐标轴触发有效</span><br><span class="line">            type: &apos;cross&apos; // 默认为line，line直线，cross十字准星，shadow阴影</span><br><span class="line">          &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h5 id="图例组件"><a href="#图例组件" class="headerlink" title="图例组件"></a>图例组件</h5><p>图例组件展现了不同系列的标记（symbol），颜色和名字。可以通过点击图例控制那些系列不显示。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">legend: &#123;</span><br><span class="line">    data: [&#123;</span><br><span class="line">        name: &apos;系列1&apos;,</span><br><span class="line">        // 强制设置图形为圆。</span><br><span class="line">        icon: &apos;circle&apos;,</span><br><span class="line">        // 设置文本为红色</span><br><span class="line">        textStyle: &#123;</span><br><span class="line">            color: &apos;red&apos;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="X轴"><a href="#X轴" class="headerlink" title="X轴"></a>X轴</h5><p>配置要在 X 轴显示的项:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">xAxis: &#123;</span><br><span class="line">    data: [&quot;衬衫&quot;,&quot;羊毛衫&quot;,&quot;雪纺衫&quot;,&quot;裤子&quot;,&quot;高跟鞋&quot;,&quot;袜子&quot;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="Y轴"><a href="#Y轴" class="headerlink" title="Y轴"></a>Y轴</h5><p>配置要在 Y 轴显示的项:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yAxis: &#123;&#125;</span><br></pre></td></tr></table></figure>

<h5 id="系列列表"><a href="#系列列表" class="headerlink" title="系列列表"></a>系列列表</h5><p>每个系列通过type决定自己的图表类型</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">series: [&#123;</span><br><span class="line">    name: &apos;销量&apos;,  // 系列名称</span><br><span class="line">    type: &apos;bar&apos;,  // 系列图表类型</span><br><span class="line">    data: [5, 20, 36, 10, 10, 20]  // 系列中的数据内容</span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure>

<h2 id="echarts各个配置项详细说明总结"><a href="#echarts各个配置项详细说明总结" class="headerlink" title="echarts各个配置项详细说明总结"></a>echarts各个配置项详细说明总结</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br></pre></td><td class="code"><pre><span class="line">theme = &#123;</span><br><span class="line">      // 全图默认背景</span><br><span class="line">      // backgroundColor: &apos;rgba(0,0,0,0)&apos;</span><br><span class="line"></span><br><span class="line">      // 默认色板</span><br><span class="line">      color: [&apos;#ff7f50&apos;, &apos;#87cefa&apos;, &apos;#da70d6&apos;, &apos;#32cd32&apos;, &apos;#6495ed&apos;,</span><br><span class="line">        &apos;#ff69b4&apos;, &apos;#ba55d3&apos;, &apos;#cd5c5c&apos;, &apos;#ffa500&apos;, &apos;#40e0d0&apos;,</span><br><span class="line">        &apos;#1e90ff&apos;, &apos;#ff6347&apos;, &apos;#7b68ee&apos;, &apos;#00fa9a&apos;, &apos;#ffd700&apos;,</span><br><span class="line">        &apos;#6699FF&apos;, &apos;#ff6666&apos;, &apos;#3cb371&apos;, &apos;#b8860b&apos;, &apos;#30e0e0&apos;],</span><br><span class="line">      // 图表标题</span><br><span class="line">      title: &#123;</span><br><span class="line">        x:&apos;left&apos;, // 水平安放位置，默认为左对齐，可选为：&apos;center&apos; ¦ &apos;left&apos; ¦ &apos;right&apos;¦ &#123;number&#125;（x坐标，单位px）</span><br><span class="line">        y:&apos;top&apos;,// 垂直安放位置，默认为全图顶端，可选为：&apos;top&apos; ¦ &apos;bottom&apos; ¦ &apos;center&apos;¦ &#123;number&#125;（y坐标，单位px）</span><br><span class="line"></span><br><span class="line">        // textAlign:null  // 水平对齐方式，默认根据x设置自动调整</span><br><span class="line">        backgroundColor: &apos;rgba(0,0,0,0)&apos;,</span><br><span class="line">        borderColor: &apos;#ccc&apos;,       // 标题边框颜色</span><br><span class="line">        borderWidth: 0,            // 标题边框线宽，单位px，默认为0（无边框）</span><br><span class="line">        padding: 5,                // 标题内边距，单位px，默认各方向内边距为5，</span><br><span class="line">                                   // 接受数组分别设定上右下左边距，同css</span><br><span class="line">        itemGap: 10,               // 主副标题纵向间隔，单位px，默认为10</span><br><span class="line">        textStyle: &#123;</span><br><span class="line">          fontSize: 18,</span><br><span class="line">          fontWeight: &apos;bolder&apos;,</span><br><span class="line">          color: &apos;#333&apos;          // 主标题文字颜色</span><br><span class="line">        &#125;,</span><br><span class="line">        subtextStyle: &#123;</span><br><span class="line">          color: &apos;#aaa&apos;          // 副标题文字颜色</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      // 图例</span><br><span class="line">      legend: &#123;</span><br><span class="line">        orient: &apos;horizontal&apos;, // 布局方式，默认为水平布局，可选为：&apos;horizontal&apos; ¦ &apos;vertical&apos;</span><br><span class="line">        x: &apos;center&apos;,  // 水平安放位置，默认为全图居中，可选为：&apos;center&apos; ¦ &apos;left&apos; ¦ &apos;right&apos;¦ &#123;number&#125;（x坐标，单位px）</span><br><span class="line">        y: &apos;top&apos;,// 垂直安放位置，默认为全图顶端，可选为：&apos;top&apos; ¦ &apos;bottom&apos; ¦ &apos;center&apos;¦ &#123;number&#125;（y坐标，单位px）</span><br><span class="line"></span><br><span class="line">        backgroundColor: &apos;rgba(0,0,0,0)&apos;,</span><br><span class="line">        borderColor: &apos;#ccc&apos;,       // 图例边框颜色</span><br><span class="line">        borderWidth: 0,            // 图例边框线宽，单位px，默认为0（无边框）</span><br><span class="line">        padding: 5,                // 图例内边距，单位px，默认各方向内边距为5，</span><br><span class="line">        // 接受数组分别设定上右下左边距，同css</span><br><span class="line">        itemGap: 10,               // 各个item之间的间隔，单位px，默认为10，</span><br><span class="line">        // 横向布局时为水平间隔，纵向布局时为纵向间隔</span><br><span class="line">        itemWidth: 20,             // 图例图形宽度</span><br><span class="line">        itemHeight: 14,            // 图例图形高度</span><br><span class="line">        textStyle: &#123;</span><br><span class="line">          color: &apos;#333&apos;          // 图例文字颜色</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      // 值域</span><br><span class="line">      dataRange: &#123;</span><br><span class="line">        orient: &apos;horizontal&apos;, // 布局方式，默认为水平布局，可选为：&apos;horizontal&apos; ¦ &apos;vertical&apos;</span><br><span class="line">        x: &apos;center&apos;,  // 水平安放位置，默认为全图居中，可选为：&apos;center&apos; ¦ &apos;left&apos; ¦ &apos;right&apos;¦ &#123;number&#125;（x坐标，单位px）</span><br><span class="line">        y: &apos;bottom&apos;,// 垂直安放位置，默认为全图底部，可选为：&apos;top&apos; ¦ &apos;bottom&apos; ¦ &apos;center&apos;¦ &#123;number&#125;（y坐标，单位px）</span><br><span class="line"></span><br><span class="line">        backgroundColor: &apos;rgba(0,0,0,0)&apos;,</span><br><span class="line">        borderColor: &apos;#ccc&apos;,       // 值域边框颜色</span><br><span class="line">        borderWidth: 0,            // 值域边框线宽，单位px，默认为0（无边框）</span><br><span class="line">        padding: 5,                // 值域内边距，单位px，默认各方向内边距为5，</span><br><span class="line">                                   // 接受数组分别设定上右下左边距，同css</span><br><span class="line">        itemGap: 10,               // 各个item之间的间隔，单位px，默认为10，</span><br><span class="line">        // 横向布局时为水平间隔，纵向布局时为纵向间隔</span><br><span class="line">        itemWidth: 20,             // 值域图形宽度，线性渐变水平布局宽度为该值 * 10</span><br><span class="line">        itemHeight: 14,            // 值域图形高度，线性渐变垂直布局高度为该值 * 10</span><br><span class="line">        splitNumber: 5,            // 分割段数，默认为5，为0时为线性渐变</span><br><span class="line">        color: [&apos;#1e90ff&apos;, &apos;#f0ffff&apos;],//颜色 </span><br><span class="line">        //text:[&apos;高&apos;,&apos;低&apos;],         // 文本，默认为数值文本</span><br><span class="line">        textStyle: &#123;</span><br><span class="line">          color: &apos;#333&apos;          // 值域文字颜色</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      toolbox:&#123;// 可视化的工具箱</span><br><span class="line">        show: true,</span><br><span class="line">        feature: &#123;</span><br><span class="line">          dataView: &#123; //数据视图</span><br><span class="line">            show: true</span><br><span class="line">          &#125;,</span><br><span class="line">          restore: &#123; //重置</span><br><span class="line">            show: true</span><br><span class="line">          &#125;,</span><br><span class="line">          dataZoom: &#123; //数据缩放视图</span><br><span class="line">            show: true</span><br><span class="line">          &#125;,</span><br><span class="line">          saveAsImage: &#123;//保存图片</span><br><span class="line">            show: true</span><br><span class="line">          &#125;,</span><br><span class="line">          magicType: &#123;//动态类型切换</span><br><span class="line">            type: [&apos;bar&apos;, &apos;line&apos;]</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        color: [&apos;#1e90ff&apos;, &apos;#22bb22&apos;, &apos;#4b0082&apos;, &apos;#d2691e&apos;],</span><br><span class="line">        backgroundColor: &apos;rgba(0,0,0,0)&apos;, // 工具箱背景颜色</span><br><span class="line">        borderColor: &apos;#ccc&apos;,       // 工具箱边框颜色</span><br><span class="line">        borderWidth: 0,            // 工具箱边框线宽，单位px，默认为0（无边框）</span><br><span class="line">        padding: 5,                // 工具箱内边距，单位px，默认各方向内边距为5，</span><br><span class="line">                                   // 接受数组分别设定上右下左边距，同css</span><br><span class="line">        itemGap: 10,               // 各个item之间的间隔，单位px，默认为10，</span><br><span class="line">                                   // 横向布局时为水平间隔，纵向布局时为纵向间隔</span><br><span class="line">        itemSize: 16,              // 工具箱图形宽度</span><br><span class="line">        featureImageIcon: &#123;&#125;,     // 自定义图片icon</span><br><span class="line">        featureTitle:&#123;</span><br><span class="line">          mark: &apos;辅助线开关&apos;,</span><br><span class="line">          markUndo: &apos;删除辅助线&apos;,</span><br><span class="line">          markClear: &apos;清空辅助线&apos;,</span><br><span class="line">          dataZoom: &apos;区域缩放&apos;,</span><br><span class="line">          dataZoomReset: &apos;区域缩放后退&apos;,</span><br><span class="line">          dataView: &apos;数据视图&apos;,</span><br><span class="line">          lineChart: &apos;折线图切换&apos;,</span><br><span class="line">          barChart: &apos;柱形图切换&apos;,</span><br><span class="line">          restore: &apos;还原&apos;,</span><br><span class="line">          saveAsImage: &apos;保存为图片&apos;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      // 提示框</span><br><span class="line">      tooltip: &#123;</span><br><span class="line">        trigger: &apos;item&apos;,           // 触发类型，默认数据触发，见下图，可选为：&apos;item&apos; ¦ &apos;axis&apos;</span><br><span class="line">        showDelay: 20,             // 显示延迟，添加显示延迟可以避免频繁切换，单位ms</span><br><span class="line">        hideDelay: 100,            // 隐藏延迟，单位ms</span><br><span class="line">        transitionDuration: 0.4,  // 动画变换时间，单位s</span><br><span class="line">        backgroundColor: &apos;rgba(0,0,0,0.7)&apos;,     // 提示背景颜色，默认为透明度为0.7的黑色</span><br><span class="line">        borderColor: &apos;#333&apos;,       // 提示边框颜色</span><br><span class="line">        borderRadius: 4,           // 提示边框圆角，单位px，默认为4</span><br><span class="line">        borderWidth: 0,            // 提示边框线宽，单位px，默认为0（无边框）</span><br><span class="line">        padding: 5,                // 提示内边距，单位px，默认各方向内边距为5，</span><br><span class="line">        // 接受数组分别设定上右下左边距，同css</span><br><span class="line">        axisPointer: &#123;            // 坐标轴指示器，坐标轴触发有效</span><br><span class="line">          type: &apos;line&apos;,         // 默认为直线，可选为：&apos;line&apos; | &apos;shadow&apos;</span><br><span class="line">          lineStyle: &#123;          // 直线指示器样式设置</span><br><span class="line">            color: &apos;#48b&apos;,</span><br><span class="line">            width: 2,</span><br><span class="line">            type: &apos;solid&apos;</span><br><span class="line">          &#125;,</span><br><span class="line">          shadowStyle: &#123;                       // 阴影指示器样式设置</span><br><span class="line">            width: &apos;auto&apos;,                   // 阴影大小</span><br><span class="line">            color: &apos;rgba(150,150,150,0.3)&apos;  // 阴影颜色</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        textStyle: &#123;</span><br><span class="line">          color: &apos;#fff&apos;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      // 区域缩放控制器</span><br><span class="line">      dataZoom:&#123;</span><br><span class="line">        orient: &apos;horizontal&apos;, // 布局方式，默认为水平布局，可选为：&apos;horizontal&apos; ¦ &apos;vertical&apos;</span><br><span class="line">        // x: &#123;number&#125;, // 水平安放位置，默认为根据grid参数适配，可选为：&#123;number&#125;（x坐标，单位px）</span><br><span class="line">        // y: &#123;number&#125;, // 垂直安放位置，默认为根据grid参数适配，可选为：&#123;number&#125;（y坐标，单位px）</span><br><span class="line">        // width: &#123;number&#125;,        // 指定宽度，横向布局时默认为根据grid参数适配</span><br><span class="line">        // height: &#123;number&#125;,       // 指定高度，纵向布局时默认为根据grid参数适配</span><br><span class="line">        backgroundColor: &apos;rgba(0,0,0,0)&apos;,       // 背景颜色</span><br><span class="line">        dataBackgroundColor: &apos;#eee&apos;,            // 数据背景颜色</span><br><span class="line">        fillerColor: &apos;rgba(144,197,237,0.2)&apos;,   // 填充颜色</span><br><span class="line">        handleColor: &apos;rgba(70,130,180,0.8)&apos;     // 手柄颜色</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      // 网格</span><br><span class="line">      grid: &#123;</span><br><span class="line">        x: 80,</span><br><span class="line">        y: 60,</span><br><span class="line">        x2: 80,</span><br><span class="line">        y2: 60,</span><br><span class="line">        // width: &#123;totalWidth&#125; - x - x2,</span><br><span class="line">        // height: &#123;totalHeight&#125; - y - y2,</span><br><span class="line">        backgroundColor: &apos;rgba(0,0,0,0)&apos;,</span><br><span class="line">        borderWidth: 1,</span><br><span class="line">        borderColor: &apos;#ccc&apos;</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      // 类目轴</span><br><span class="line">      categoryAxis: &#123;</span><br><span class="line">        position: &apos;bottom&apos;,    // 位置</span><br><span class="line">        nameLocation: &apos;end&apos;,   // 坐标轴名字位置，支持&apos;start&apos; | &apos;end&apos;</span><br><span class="line">        boundaryGap: true,     // 类目起始和结束两端空白策略</span><br><span class="line">        axisLine: &#123;            // 坐标轴线</span><br><span class="line">          show: true,        // 默认显示，属性show控制显示与否</span><br><span class="line">          lineStyle: &#123;       // 属性lineStyle控制线条样式</span><br><span class="line">            color: &apos;#48b&apos;,</span><br><span class="line">            width: 2,</span><br><span class="line">            type: &apos;solid&apos;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        axisTick: &#123;            // 坐标轴小标记</span><br><span class="line">          show: true,       // 属性show控制显示与否，默认不显示</span><br><span class="line">          interval: &apos;auto&apos;,</span><br><span class="line">          // onGap: null,</span><br><span class="line">          inside: false,    // 控制小标记是否在grid里 </span><br><span class="line">          length: 5,         // 属性length控制线长</span><br><span class="line">          lineStyle: &#123;       // 属性lineStyle控制线条样式</span><br><span class="line">            color: &apos;#333&apos;,</span><br><span class="line">            width: 1</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        axisLabel: &#123;           // 坐标轴文本标签，详见axis.axisLabel</span><br><span class="line">          show: true,</span><br><span class="line">          interval: &apos;auto&apos;,</span><br><span class="line">          rotate: 0,</span><br><span class="line">          margin: 8,</span><br><span class="line">          // formatter: null,</span><br><span class="line">          textStyle: &#123;       // 其余属性默认使用全局文本样式，详见TEXTSTYLE</span><br><span class="line">            color: &apos;#333&apos;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        splitLine: &#123;           // 分隔线</span><br><span class="line">          show: true,        // 默认显示，属性show控制显示与否</span><br><span class="line">          // onGap: null,</span><br><span class="line">          lineStyle: &#123;       // 属性lineStyle（详见lineStyle）控制线条样式</span><br><span class="line">            color: [&apos;#ccc&apos;],</span><br><span class="line">            width: 1,</span><br><span class="line">            type: &apos;solid&apos;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        splitArea: &#123;           // 分隔区域</span><br><span class="line">          show: false,       // 默认不显示，属性show控制显示与否</span><br><span class="line">          // onGap: null,</span><br><span class="line">          areaStyle: &#123;       // 属性areaStyle（详见areaStyle）控制区域样式</span><br><span class="line">            color: [&apos;rgba(250,250,250,0.3)&apos;, &apos;rgba(200,200,200,0.3)&apos;]</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      // 数值型坐标轴默认参数</span><br><span class="line">      valueAxis: &#123;</span><br><span class="line">        position: &apos;left&apos;,      // 位置</span><br><span class="line">        nameLocation: &apos;end&apos;,   // 坐标轴名字位置，支持&apos;start&apos; | &apos;end&apos;</span><br><span class="line">        nameTextStyle: &#123;&#125;,     // 坐标轴文字样式，默认取全局样式</span><br><span class="line">        boundaryGap: [0, 0],   // 数值起始和结束两端空白策略</span><br><span class="line">        splitNumber: 5,        // 分割段数，默认为5</span><br><span class="line">        axisLine: &#123;            // 坐标轴线</span><br><span class="line">          show: true,        // 默认显示，属性show控制显示与否</span><br><span class="line">          lineStyle: &#123;       // 属性lineStyle控制线条样式</span><br><span class="line">            color: &apos;#48b&apos;,</span><br><span class="line">            width: 2,</span><br><span class="line">            type: &apos;solid&apos;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        axisTick: &#123;            // 坐标轴小标记</span><br><span class="line">          show: false,       // 属性show控制显示与否，默认不显示</span><br><span class="line">          inside: false,    // 控制小标记是否在grid里 </span><br><span class="line">          length: 5,         // 属性length控制线长</span><br><span class="line">          lineStyle: &#123;       // 属性lineStyle控制线条样式</span><br><span class="line">            color: &apos;#333&apos;,</span><br><span class="line">            width: 1</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        axisLabel: &#123;           // 坐标轴文本标签，详见axis.axisLabel</span><br><span class="line">          show: true,</span><br><span class="line">          rotate: 0,</span><br><span class="line">          margin: 8,</span><br><span class="line">          // formatter: null,</span><br><span class="line">          textStyle: &#123;       // 其余属性默认使用全局文本样式，详见TEXTSTYLE</span><br><span class="line">            color: &apos;#333&apos;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        splitLine: &#123;           // 分隔线</span><br><span class="line">          show: true,        // 默认显示，属性show控制显示与否</span><br><span class="line">          lineStyle: &#123;       // 属性lineStyle（详见lineStyle）控制线条样式</span><br><span class="line">            color: [&apos;#ccc&apos;],</span><br><span class="line">            width: 1,</span><br><span class="line">            type: &apos;solid&apos;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        splitArea: &#123;           // 分隔区域</span><br><span class="line">          show: false,       // 默认不显示，属性show控制显示与否</span><br><span class="line">          areaStyle: &#123;       // 属性areaStyle（详见areaStyle）控制区域样式</span><br><span class="line">            color: [&apos;rgba(250,250,250,0.3)&apos;, &apos;rgba(200,200,200,0.3)&apos;]</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      polar: &#123;</span><br><span class="line">        center: [&apos;50%&apos;, &apos;50%&apos;],    // 默认全局居中</span><br><span class="line">        radius: &apos;75%&apos;,</span><br><span class="line">        startAngle: 90,</span><br><span class="line">        splitNumber: 5,</span><br><span class="line">        name: &#123;</span><br><span class="line">          show: true,</span><br><span class="line">          textStyle: &#123;       // 其余属性默认使用全局文本样式，详见TEXTSTYLE</span><br><span class="line">            color: &apos;#333&apos;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        axisLine: &#123;            // 坐标轴线</span><br><span class="line">          show: true,        // 默认显示，属性show控制显示与否</span><br><span class="line">          lineStyle: &#123;       // 属性lineStyle控制线条样式</span><br><span class="line">            color: &apos;#ccc&apos;,</span><br><span class="line">            width: 1,</span><br><span class="line">            type: &apos;solid&apos;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        axisLabel: &#123;           // 坐标轴文本标签，详见axis.axisLabel</span><br><span class="line">          show: false,</span><br><span class="line">          textStyle: &#123;       // 其余属性默认使用全局文本样式，详见TEXTSTYLE</span><br><span class="line">            color: &apos;#333&apos;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        splitArea: &#123;</span><br><span class="line">          show: true,</span><br><span class="line">          areaStyle: &#123;</span><br><span class="line">            color: [&apos;rgba(250,250,250,0.3)&apos;, &apos;rgba(200,200,200,0.3)&apos;]</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        splitLine: &#123;</span><br><span class="line">          show: true,</span><br><span class="line">          lineStyle: &#123;</span><br><span class="line">            width: 1,</span><br><span class="line">            color: &apos;#ccc&apos;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      // 柱形图默认参数</span><br><span class="line">      bar: &#123;</span><br><span class="line">        barMinHeight: 0,          // 最小高度改为0</span><br><span class="line">        // barWidth: null,        // 默认自适应</span><br><span class="line">        barGap: &apos;30%&apos;,            // 柱间距离，默认为柱形宽度的30%，可设固定值</span><br><span class="line">        barCategoryGap: &apos;20%&apos;,   // 类目间柱形距离，默认为类目间距的20%，可设固定值</span><br><span class="line">        itemStyle: &#123;</span><br><span class="line">          normal: &#123;</span><br><span class="line">            // color: &apos;各异&apos;,</span><br><span class="line">            barBorderColor: &apos;#fff&apos;,       // 柱条边线</span><br><span class="line">            barBorderRadius: 0,           // 柱条边线圆角，单位px，默认为0</span><br><span class="line">            barBorderWidth: 1,            // 柱条边线线宽，单位px，默认为1</span><br><span class="line">            label: &#123;</span><br><span class="line">              show: false</span><br><span class="line">              // position: 默认自适应，水平布局为&apos;top&apos;，垂直布局为&apos;right&apos;，可选为</span><br><span class="line">              //           &apos;inside&apos;|&apos;left&apos;|&apos;right&apos;|&apos;top&apos;|&apos;bottom&apos;</span><br><span class="line">              // textStyle: null      // 默认使用全局文本样式，详见TEXTSTYLE</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          emphasis: &#123;</span><br><span class="line">            // color: &apos;各异&apos;,</span><br><span class="line">            barBorderColor: &apos;rgba(0,0,0,0)&apos;,   // 柱条边线</span><br><span class="line">            barBorderRadius: 0,                // 柱条边线圆角，单位px，默认为0</span><br><span class="line">            barBorderWidth: 1,                 // 柱条边线线宽，单位px，默认为1</span><br><span class="line">            label: &#123;</span><br><span class="line">              show: false</span><br><span class="line">              // position: 默认自适应，水平布局为&apos;top&apos;，垂直布局为&apos;right&apos;，可选为</span><br><span class="line">              //           &apos;inside&apos;|&apos;left&apos;|&apos;right&apos;|&apos;top&apos;|&apos;bottom&apos;</span><br><span class="line">              // textStyle: null      // 默认使用全局文本样式，详见TEXTSTYLE</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      // 折线默认参数</span><br><span class="line">      line: &#123;</span><br><span class="line">        itemStyle: &#123;</span><br><span class="line">          normal: &#123;</span><br><span class="line">            // color: 各异,</span><br><span class="line">            label: &#123;</span><br><span class="line">              show:false</span><br><span class="line">              // position: 默认自适应，水平布局为&apos;top&apos;，垂直布局为&apos;right&apos;，可选为</span><br><span class="line">              //           &apos;inside&apos;|&apos;left&apos;|&apos;right&apos;|&apos;top&apos;|&apos;bottom&apos;</span><br><span class="line">              // textStyle: null      // 默认使用全局文本样式，详见TEXTSTYLE</span><br><span class="line">            &#125;,</span><br><span class="line">            lineStyle:&#123;</span><br><span class="line">              width: 2,</span><br><span class="line">              type: &apos;solid&apos;,</span><br><span class="line">              shadowColor: &apos;rgba(0,0,0,0)&apos;, //默认透明</span><br><span class="line">              shadowBlur: 5,</span><br><span class="line">              shadowOffsetX: 3,</span><br><span class="line">              shadowOffsetY: 3</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          emphasis: &#123;</span><br><span class="line">            // color: 各异,</span><br><span class="line">            label: &#123;</span><br><span class="line">              show: false</span><br><span class="line">              // position: 默认自适应，水平布局为&apos;top&apos;，垂直布局为&apos;right&apos;，可选为</span><br><span class="line">              //           &apos;inside&apos;|&apos;left&apos;|&apos;right&apos;|&apos;top&apos;|&apos;bottom&apos;</span><br><span class="line">              // textStyle: null      // 默认使用全局文本样式，详见TEXTSTYLE</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        //smooth : false,</span><br><span class="line">        //symbol: null,         // 拐点图形类型</span><br><span class="line">        symbolSize: 2,          // 拐点图形大小</span><br><span class="line">        //symbolRotate : null,  // 拐点图形旋转控制</span><br><span class="line">        showAllSymbol: false    // 标志图形默认只有主轴显示（随主轴标签间隔隐藏策略）</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      // K线图默认参数</span><br><span class="line">      k: &#123;</span><br><span class="line">        // barWidth : null          // 默认自适应</span><br><span class="line">        // barMaxWidth : null       // 默认自适应 </span><br><span class="line">        itemStyle: &#123;</span><br><span class="line">          normal: &#123;</span><br><span class="line">            color: &apos;#fff&apos;,          // 阳线填充颜色</span><br><span class="line">            color0: &apos;#00aa11&apos;,      // 阴线填充颜色</span><br><span class="line">            lineStyle: &#123;</span><br><span class="line">              width: 1,</span><br><span class="line">              color: &apos;#ff3200&apos;,   // 阳线边框颜色</span><br><span class="line">              color0: &apos;#00aa11&apos;   // 阴线边框颜色</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          emphasis: &#123;</span><br><span class="line">            // color: 各异,</span><br><span class="line">            // color0: 各异</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      // 散点图默认参数</span><br><span class="line">      scatter: &#123;</span><br><span class="line">        //symbol: null,      // 图形类型</span><br><span class="line">        symbolSize: 4,       // 图形大小，半宽（半径）参数，当图形为方向或菱形则总宽度为symbolSize * 2</span><br><span class="line">        //symbolRotate : null,  // 图形旋转控制</span><br><span class="line">        large: false,        // 大规模散点图</span><br><span class="line">        largeThreshold: 2000,// 大规模阀值，large为true且数据量&gt;largeThreshold才启用大规模模式</span><br><span class="line">        itemStyle: &#123;</span><br><span class="line">          normal: &#123;</span><br><span class="line">            // color: 各异,</span><br><span class="line">            label: &#123;</span><br><span class="line">              show: false</span><br><span class="line">              // position: 默认自适应，水平布局为&apos;top&apos;，垂直布局为&apos;right&apos;，可选为</span><br><span class="line">              //           &apos;inside&apos;|&apos;left&apos;|&apos;right&apos;|&apos;top&apos;|&apos;bottom&apos;</span><br><span class="line">              // textStyle: null      // 默认使用全局文本样式，详见TEXTSTYLE</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          emphasis: &#123;</span><br><span class="line">            // color: &apos;各异&apos;</span><br><span class="line">            label: &#123;</span><br><span class="line">              show: false</span><br><span class="line">              // position: 默认自适应，水平布局为&apos;top&apos;，垂直布局为&apos;right&apos;，可选为</span><br><span class="line">              //           &apos;inside&apos;|&apos;left&apos;|&apos;right&apos;|&apos;top&apos;|&apos;bottom&apos;</span><br><span class="line">              // textStyle: null      // 默认使用全局文本样式，详见TEXTSTYLE</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      // 雷达图默认参数</span><br><span class="line">      radar: &#123;</span><br><span class="line">        itemStyle: &#123;</span><br><span class="line">          normal: &#123;</span><br><span class="line">            // color: 各异,</span><br><span class="line">            label: &#123;</span><br><span class="line">              show: false</span><br><span class="line">            &#125;,</span><br><span class="line">            lineStyle: &#123;</span><br><span class="line">              width: 2,</span><br><span class="line">              type: &apos;solid&apos;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          emphasis: &#123;</span><br><span class="line">            // color: 各异,</span><br><span class="line">            label: &#123;</span><br><span class="line">              show: false</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        //symbol: null,         // 拐点图形类型</span><br><span class="line">        symbolSize: 2           // 可计算特性参数，空数据拖拽提示图形大小</span><br><span class="line">        //symbolRotate : null,  // 图形旋转控制</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      // 饼图默认参数</span><br><span class="line">      pie: &#123;</span><br><span class="line">        center: [&apos;50%&apos;, &apos;50%&apos;],    // 默认全局居中</span><br><span class="line">        radius: [0, &apos;75%&apos;],</span><br><span class="line">        clockWise: false,          // 默认逆时针</span><br><span class="line">        startAngle: 90,</span><br><span class="line">        minAngle: 0,                // 最小角度改为0</span><br><span class="line">        selectedOffset: 10,         // 选中是扇区偏移量</span><br><span class="line">        itemStyle: &#123;</span><br><span class="line">          normal: &#123;</span><br><span class="line">            // color: 各异,</span><br><span class="line">            borderColor: &apos;#fff&apos;,</span><br><span class="line">            borderWidth: 1,</span><br><span class="line">            label: &#123;</span><br><span class="line">              show: true,</span><br><span class="line">              position: &apos;outer&apos;</span><br><span class="line">              // textStyle: null      // 默认使用全局文本样式，详见TEXTSTYLE</span><br><span class="line">            &#125;,</span><br><span class="line">            labelLine: &#123;</span><br><span class="line">              show: true,</span><br><span class="line">              length: 20,</span><br><span class="line">              lineStyle: &#123;</span><br><span class="line">                // color: 各异,</span><br><span class="line">                width: 1,</span><br><span class="line">                type: &apos;solid&apos;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          emphasis: &#123;</span><br><span class="line">            // color: 各异,</span><br><span class="line">            borderColor: &apos;rgba(0,0,0,0)&apos;,</span><br><span class="line">            borderWidth: 1,</span><br><span class="line">            label: &#123;</span><br><span class="line">              show: false</span><br><span class="line">              // position: &apos;outer&apos;</span><br><span class="line">              // textStyle: null      // 默认使用全局文本样式，详见TEXTSTYLE</span><br><span class="line">            &#125;,</span><br><span class="line">            labelLine: &#123;</span><br><span class="line">              show: false,</span><br><span class="line">              length: 20,</span><br><span class="line">              lineStyle: &#123;</span><br><span class="line">                // color: 各异,</span><br><span class="line">                width: 1,</span><br><span class="line">                type: &apos;solid&apos;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      map: &#123;</span><br><span class="line">        mapType: &apos;china&apos;,   // 各省的mapType暂时都用中文</span><br><span class="line">        mapLocation: &#123;</span><br><span class="line">          x: &apos;center&apos;,</span><br><span class="line">          y: &apos;center&apos;</span><br><span class="line">          // width    // 自适应</span><br><span class="line">          // height   // 自适应</span><br><span class="line">        &#125;,</span><br><span class="line">        showLegendSymbol: true,       // 显示图例颜色标识（系列标识的小圆点），存在legend时生效</span><br><span class="line">        itemStyle: &#123;</span><br><span class="line">          normal: &#123;</span><br><span class="line">            // color: 各异,</span><br><span class="line">            borderColor: &apos;#fff&apos;,</span><br><span class="line">            borderWidth: 1,</span><br><span class="line">            areaStyle: &#123;</span><br><span class="line">              color: &apos;#ccc&apos;//rgba(135,206,250,0.8)</span><br><span class="line">            &#125;,</span><br><span class="line">            label: &#123;</span><br><span class="line">              show: false,</span><br><span class="line">              textStyle: &#123;</span><br><span class="line">                color: &apos;rgba(139,69,19,1)&apos;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          emphasis: &#123;                 // 也是选中样式</span><br><span class="line">            // color: 各异,</span><br><span class="line">            borderColor: &apos;rgba(0,0,0,0)&apos;,</span><br><span class="line">            borderWidth: 1,</span><br><span class="line">            areaStyle: &#123;</span><br><span class="line">              color: &apos;rgba(255,215,0,0.8)&apos;</span><br><span class="line">            &#125;,</span><br><span class="line">            label: &#123;</span><br><span class="line">              show: false,</span><br><span class="line">              textStyle: &#123;</span><br><span class="line">                color: &apos;rgba(139,69,19,1)&apos;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      force: &#123;</span><br><span class="line">        // 数据map到圆的半径的最小值和最大值</span><br><span class="line">        minRadius: 10,</span><br><span class="line">        maxRadius: 20,</span><br><span class="line">        density: 1.0,</span><br><span class="line">        attractiveness: 1.0,</span><br><span class="line">        // 初始化的随机大小位置</span><br><span class="line">        initSize: 300,</span><br><span class="line">        // 向心力因子，越大向心力越大</span><br><span class="line">        centripetal: 1,</span><br><span class="line">        // 冷却因子</span><br><span class="line">        coolDown: 0.99,</span><br><span class="line">        // 分类里如果有样式会覆盖节点默认样式</span><br><span class="line">        itemStyle: &#123;</span><br><span class="line">          normal: &#123;</span><br><span class="line">            // color: 各异,</span><br><span class="line">            label: &#123;</span><br><span class="line">              show: false</span><br><span class="line">              // textStyle: null      // 默认使用全局文本样式，详见TEXTSTYLE</span><br><span class="line">            &#125;,</span><br><span class="line">            nodeStyle: &#123;</span><br><span class="line">              brushType: &apos;both&apos;,</span><br><span class="line">              color: &apos;#f08c2e&apos;,</span><br><span class="line">              strokeColor: &apos;#5182ab&apos;</span><br><span class="line">            &#125;,</span><br><span class="line">            linkStyle: &#123;</span><br><span class="line">              strokeColor: &apos;#5182ab&apos;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          emphasis: &#123;</span><br><span class="line">            // color: 各异,</span><br><span class="line">            label: &#123;</span><br><span class="line">              show: false</span><br><span class="line">              // textStyle: null      // 默认使用全局文本样式，详见TEXTSTYLE</span><br><span class="line">            &#125;,</span><br><span class="line">            nodeStyle: &#123;&#125;,</span><br><span class="line">            linkStyle: &#123;&#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      chord: &#123;</span><br><span class="line">        radius: [&apos;65%&apos;, &apos;75%&apos;],</span><br><span class="line">        center: [&apos;50%&apos;, &apos;50%&apos;],</span><br><span class="line">        padding: 2,</span><br><span class="line">        sort: &apos;none&apos;, // can be &apos;none&apos;, &apos;ascending&apos;, &apos;descending&apos;</span><br><span class="line">        sortSub: &apos;none&apos;, // can be &apos;none&apos;, &apos;ascending&apos;, &apos;descending&apos;</span><br><span class="line">        startAngle: 90,</span><br><span class="line">        clockWise: false,</span><br><span class="line">        showScale: false,</span><br><span class="line">        showScaleText: false,</span><br><span class="line">        itemStyle: &#123;</span><br><span class="line">          normal: &#123;</span><br><span class="line">            label: &#123;</span><br><span class="line">              show: true</span><br><span class="line">              // textStyle: null      // 默认使用全局文本样式，详见TEXTSTYLE</span><br><span class="line">            &#125;,</span><br><span class="line">            lineStyle: &#123;</span><br><span class="line">              width: 0,</span><br><span class="line">              color: &apos;#000&apos;</span><br><span class="line">            &#125;,</span><br><span class="line">            chordStyle: &#123;</span><br><span class="line">              lineStyle: &#123;</span><br><span class="line">                width: 1,</span><br><span class="line">                color: &apos;#666&apos;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          emphasis: &#123;</span><br><span class="line">            lineStyle: &#123;</span><br><span class="line">              width: 0,</span><br><span class="line">              color: &apos;#000&apos;</span><br><span class="line">            &#125;,</span><br><span class="line">            chordStyle: &#123;</span><br><span class="line">              lineStyle: &#123;</span><br><span class="line">                width: 2,</span><br><span class="line">                color: &apos;#333&apos;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      island: &#123;</span><br><span class="line">        r: 15,</span><br><span class="line">        calculateStep: 0.1  // 滚轮可计算步长 0.1 = 10%</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      markPoint: &#123;</span><br><span class="line">        symbol: &apos;pin&apos;,         // 标注类型</span><br><span class="line">        symbolSize: 10,        // 标注大小，半宽（半径）参数，当图形为方向或菱形则总宽度为symbolSize * 2</span><br><span class="line">        //symbolRotate : null, // 标注旋转控制</span><br><span class="line">        itemStyle: &#123;</span><br><span class="line">          normal: &#123;</span><br><span class="line">            // color: 各异，</span><br><span class="line">            // borderColor: 各异,     // 标注边线颜色，优先于color </span><br><span class="line">            borderWidth: 2,            // 标注边线线宽，单位px，默认为1</span><br><span class="line">            label: &#123;</span><br><span class="line">              show: true,</span><br><span class="line">              position: &apos;inside&apos; // 可选为&apos;left&apos;|&apos;right&apos;|&apos;top&apos;|&apos;bottom&apos;</span><br><span class="line">              // textStyle: null      // 默认使用全局文本样式，详见TEXTSTYLE</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          emphasis: &#123;</span><br><span class="line">            // color: 各异</span><br><span class="line">            label: &#123;</span><br><span class="line">              show: true</span><br><span class="line">              // position: &apos;inside&apos;  // &apos;left&apos;|&apos;right&apos;|&apos;top&apos;|&apos;bottom&apos;</span><br><span class="line">              // textStyle: null     // 默认使用全局文本样式，详见TEXTSTYLE</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      markLine: &#123;</span><br><span class="line">        // 标线起始和结束的symbol介绍类型，如果都一样，可以直接传string</span><br><span class="line">        symbol: [&apos;circle&apos;, &apos;arrow&apos;],</span><br><span class="line">        // 标线起始和结束的symbol大小，半宽（半径）参数，当图形为方向或菱形则总宽度为symbolSize * 2</span><br><span class="line">        symbolSize: [2, 4],</span><br><span class="line">        // 标线起始和结束的symbol旋转控制</span><br><span class="line">        //symbolRotate : null,</span><br><span class="line">        itemStyle: &#123;</span><br><span class="line">          normal: &#123;</span><br><span class="line">            // color: 各异,           // 标线主色，线色，symbol主色</span><br><span class="line">            // borderColor: 随color,     // 标线symbol边框颜色，优先于color </span><br><span class="line">            borderWidth: 2,          // 标线symbol边框线宽，单位px，默认为2</span><br><span class="line">            label: &#123;</span><br><span class="line">              show: false,</span><br><span class="line">              // 可选为 &apos;start&apos;|&apos;end&apos;|&apos;left&apos;|&apos;right&apos;|&apos;top&apos;|&apos;bottom&apos;</span><br><span class="line">              position: &apos;inside&apos;,</span><br><span class="line">              textStyle: &#123;         // 默认使用全局文本样式，详见TEXTSTYLE</span><br><span class="line">                color: &apos;#333&apos;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            lineStyle: &#123;</span><br><span class="line">              // color: 随borderColor, // 主色，线色，优先级高于borderColor和color</span><br><span class="line">              // width: 随borderWidth, // 优先于borderWidth</span><br><span class="line">              type: &apos;solid&apos;,</span><br><span class="line">              shadowColor: &apos;rgba(0,0,0,0)&apos;, //默认透明</span><br><span class="line">              shadowBlur: 5,</span><br><span class="line">              shadowOffsetX: 3,</span><br><span class="line">              shadowOffsetY: 3</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          emphasis: &#123;</span><br><span class="line">            // color: 各异</span><br><span class="line">            label: &#123;</span><br><span class="line">              show: false</span><br><span class="line">              // position: &apos;inside&apos; // &apos;left&apos;|&apos;right&apos;|&apos;top&apos;|&apos;bottom&apos;</span><br><span class="line">              // textStyle: null    // 默认使用全局文本样式，详见TEXTSTYLE</span><br><span class="line">            &#125;,</span><br><span class="line">            lineStyle: &#123;&#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      textStyle: &#123;</span><br><span class="line">        decoration: &apos;none&apos;,</span><br><span class="line">        fontFamily: &apos;Arial, Verdana, sans-serif&apos;,</span><br><span class="line">        fontFamily2: &apos;微软雅黑&apos;,    // IE8- 字体模糊并且不支持不同字体混排，额外指定一份</span><br><span class="line">        fontSize: 12,</span><br><span class="line">        fontStyle: &apos;normal&apos;,</span><br><span class="line">        fontWeight: &apos;normal&apos;</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      // 默认标志图形类型列表</span><br><span class="line">      symbolList: [</span><br><span class="line">        &apos;circle&apos;, &apos;rectangle&apos;, &apos;triangle&apos;, &apos;diamond&apos;,</span><br><span class="line">        &apos;emptyCircle&apos;, &apos;emptyRectangle&apos;, &apos;emptyTriangle&apos;, &apos;emptyDiamond&apos;</span><br><span class="line">      ],</span><br><span class="line">      loadingText: &apos;Loading...&apos;,</span><br><span class="line">      // 可计算特性配置，孤岛，提示颜色</span><br><span class="line">      calculable: false,              // 默认关闭可计算特性</span><br><span class="line">      calculableColor: &apos;rgba(255,165,0,0.6)&apos;,       // 拖拽提示边框颜色</span><br><span class="line">      calculableHolderColor: &apos;#ccc&apos;, // 可计算占位提示颜色</span><br><span class="line">      nameConnector: &apos; &amp; &apos;,</span><br><span class="line">      valueConnector: &apos; : &apos;,</span><br><span class="line">      animation: true,</span><br><span class="line">      animationThreshold: 2500,       // 动画元素阀值，产生的图形原素超过2500不出动画</span><br><span class="line">      addDataAnimation: true,         // 动态数据接口是否开启动画效果</span><br><span class="line">      animationDuration: 2000,</span><br><span class="line">      animationEasing: &apos;ExponentialOut&apos;    //BounceOut</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/04/05/vue-echarts/echarts多个图表的联动/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="朱程程">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/first.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小二、上酒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/04/05/vue-echarts/echarts多个图表的联动/" itemprop="url">echarts多个图表的联动</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-04-05T17:38:14+08:00">
                2022-04-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/vue-echarts/" itemprop="url" rel="index">
                    <span itemprop="name">vue-echarts</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h5 id="1、初始化图表，每个图表对应一个实例对象并加载初始化数据"><a href="#1、初始化图表，每个图表对应一个实例对象并加载初始化数据" class="headerlink" title="1、初始化图表，每个图表对应一个实例对象并加载初始化数据"></a>1、初始化图表，每个图表对应一个实例对象并加载初始化数据</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 基于准备好的dom，初始化echarts实例</span><br><span class="line">var myChart1 = echarts.init(document.getElementById(&apos;main&apos;));</span><br><span class="line">var myChart2 = echarts.init(document.getElementById(&apos;main2&apos;));</span><br><span class="line"></span><br><span class="line">// 为echarts对象加载数据</span><br><span class="line">myChart1.setOption(option1);</span><br><span class="line">myChart2.setOption(option2); //联动配置</span><br></pre></td></tr></table></figure>

<h5 id="2、图表间级联"><a href="#2、图表间级联" class="headerlink" title="2、图表间级联"></a>2、图表间级联</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 分别设置每个实例的 group id</span><br><span class="line">myChart1.group = &apos;group1&apos;;</span><br><span class="line">myChart2.group = &apos;group1&apos;;</span><br><span class="line">echarts.connect(&apos;group1&apos;);</span><br><span class="line">// 或者可以直接传入需要联动的实例数</span><br><span class="line">// echarts.connect([myChart1,myChart2]);</span><br></pre></td></tr></table></figure>

<h5 id="html代码"><a href="#html代码" class="headerlink" title="html代码"></a>html代码</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;script src=&quot;echarts.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;!-- 为ECharts准备一个具备大小（宽高）的Dom --&gt;</span><br><span class="line">&lt;div id=&quot;main&quot; style=&quot;width: 400px;height:300px;&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;div id=&quot;main2&quot; style=&quot;width: 400px;height:300px;&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">    // 基于准备好的dom，初始化echarts实例</span><br><span class="line">    var myChart1 = echarts.init(document.getElementById(&apos;main&apos;));</span><br><span class="line">    var myChart2 = echarts.init(document.getElementById(&apos;main2&apos;));</span><br><span class="line"></span><br><span class="line">    // 指定图表的配置项和数据</span><br><span class="line">    var option1 = &#123;</span><br><span class="line">        title: &#123;</span><br><span class="line">            text: &apos;ECharts 入门示例&apos;</span><br><span class="line">        &#125;,</span><br><span class="line">        tooltip: &#123;</span><br><span class="line">            tooltip: &#123;</span><br><span class="line">                show:true</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        legend: &#123;</span><br><span class="line">            data:[&apos;销量1&apos;]</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        xAxis: [&#123;</span><br><span class="line">            data: [&quot;衬衫&quot;,&quot;羊毛衫&quot;,&quot;雪纺衫&quot;,&quot;裤子&quot;,&quot;高跟鞋&quot;,&quot;袜子&quot;],</span><br><span class="line">        &#125;],</span><br><span class="line">        yAxis: [</span><br><span class="line">            &#123;</span><br><span class="line">                type: &apos;value&apos;,</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">        series: [&#123;</span><br><span class="line">            name: &apos;销量1&apos;,</span><br><span class="line">            type: &apos;bar&apos;,</span><br><span class="line">            data: [5, 20, 36, 10, 10, 20],</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;;</span><br><span class="line">    var option2 = &#123;</span><br><span class="line">        title: &#123;</span><br><span class="line">            text: &apos;ECharts 入门示例&apos;</span><br><span class="line">        &#125;,</span><br><span class="line">        tooltip: &#123;</span><br><span class="line">           show:true</span><br><span class="line">        &#125;,</span><br><span class="line">        legend: &#123;</span><br><span class="line">            data:[&apos;销量2&apos;]</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        xAxis: [&#123;</span><br><span class="line">            data: [&quot;衬衫&quot;,&quot;羊毛衫&quot;,&quot;雪纺衫&quot;,&quot;裤子&quot;,&quot;高跟鞋&quot;,&quot;袜子&quot;],</span><br><span class="line">        &#125;],</span><br><span class="line">        yAxis: [</span><br><span class="line">            &#123;</span><br><span class="line">                type: &apos;value&apos;,</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">        series: [&#123;</span><br><span class="line">            name: &apos;销量2&apos;,</span><br><span class="line">            type: &apos;bar&apos;,</span><br><span class="line">            data: [5, 20, 36, 10, 10, 20],</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    // 为echarts对象加载数据</span><br><span class="line">    myChart1.setOption(option1);</span><br><span class="line">    myChart2.setOption(option2); //联动配置</span><br><span class="line"></span><br><span class="line">    // 分别设置每个实例的 group id</span><br><span class="line">    myChart1.group = &apos;group1&apos;;</span><br><span class="line">    myChart2.group = &apos;group1&apos;;</span><br><span class="line">    echarts.connect(&apos;group1&apos;);</span><br><span class="line">    // 或者可以直接传入需要联动的实例数</span><br><span class="line">    // echarts.connect([myChart1,myChart2]);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<h5 id="在vue中使多个图表进行级联"><a href="#在vue中使多个图表进行级联" class="headerlink" title="在vue中使多个图表进行级联"></a>在vue中使多个图表进行级联</h5><p>首先在每个图表的子组件中定义图表的groupid</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this.chart.group = &apos;groupId&apos;</span><br></pre></td></tr></table></figure>

<p>通过在watch中监控是否级联,对级联进行控制</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">watch: &#123;</span><br><span class="line">    isCombine: &#123;</span><br><span class="line">      handler(val) &#123;</span><br><span class="line">        if (val) &#123;</span><br><span class="line">          echarts.connect(&apos;groupId&apos;)</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          echarts.disconnect(&apos;groupId&apos;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在父组件中对isCombine进行控制，从而控制子组件的级联</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/04/05/vue-echarts/echarts中的事件和行为/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="朱程程">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/first.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小二、上酒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/04/05/vue-echarts/echarts中的事件和行为/" itemprop="url">echarts中事件和行为</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-04-05T17:38:14+08:00">
                2022-04-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/vue-echarts/" itemprop="url" rel="index">
                    <span itemprop="name">vue-echarts</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Echarts中的事件和行为"><a href="#Echarts中的事件和行为" class="headerlink" title="Echarts中的事件和行为"></a>Echarts中的事件和行为</h1><p>用户操作echarts图表时会触发相应的事件，这些事件由开发者监听，然后回调函数做出相应的处理，可以弹出一个对话框、跳转到一个地址或者做数据下钻等等。<br>通过on方法绑定事件<br>事件名称对应DOM事件名称，均为小写的字符串，如下是一个绑定点击操作的示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">myChart.on(&apos;click&apos;,function(params) &#123;</span><br><span class="line">    // 控制台打印数据的名称</span><br><span class="line">    console.log(params.name);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>在echarts中有两种事件类型：</p>
<ul>
<li>一种是用户鼠标操作点击，或者hover图表的图形时触发的事件；</li>
<li>还有一种是用户在使用可以交互的组件后触发的事件，例如在切换图例开关时触发的‘legendselectchanged’事件（这里切换图例开关不会触发‘legendselected’事件），区域缩放时触发的‘dataZoom’事件等等</li>
</ul>
<h3 id="ECharts中的图例事件"><a href="#ECharts中的图例事件" class="headerlink" title="ECharts中的图例事件"></a>ECharts中的图例事件</h3><h4 id="events-legendselectchanged"><a href="#events-legendselectchanged" class="headerlink" title="events.legendselectchanged"></a>events.legendselectchanged</h4><p>ACTION：legendToggleSelect切换图例选中状态后的事件<br>注： 图例组件用户切换图例开关会触发该事件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    type: &apos;legendselectchanged&apos;,</span><br><span class="line">    // 切换的图例名称</span><br><span class="line">    name: string</span><br><span class="line">    // 所有图例的选中状态表</span><br><span class="line">    selected: Object</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="events-legendselected"><a href="#events-legendselected" class="headerlink" title="events.legendselected"></a>events.legendselected</h4><p>ACTION: legendSelect 图例选中后的事件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    type: &apos;legendselected&apos;,</span><br><span class="line">    // 选中的图例名称</span><br><span class="line">    name: string</span><br><span class="line">    // 所有图例的选中状态表</span><br><span class="line">    selected: Object</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="events-legendunselected"><a href="#events-legendunselected" class="headerlink" title="events.legendunselected"></a>events.legendunselected</h4><p>ACTION: legendUnSelect 图例取消选中后的事件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    type: &apos;legendunselected&apos;,</span><br><span class="line">    // 取消选中的图例名称</span><br><span class="line">    name: string</span><br><span class="line">    // 所有图例的选中状态表。</span><br><span class="line">    selected: Object</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="events-legendscroll"><a href="#events-legendscroll" class="headerlink" title="events.legendscroll"></a>events.legendscroll</h4><p>ACTION: legendscroll 图例滚动事件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    type: &apos;legendscroll&apos;,</span><br><span class="line">    scrollDataIndex: number</span><br><span class="line">    legendId: string</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Echarts鼠标事件的处理"><a href="#Echarts鼠标事件的处理" class="headerlink" title="Echarts鼠标事件的处理"></a>Echarts鼠标事件的处理</h2><p>echarts支持常规的鼠标事件类型，包括 ‘click’,’dblclick’,’mousedown’,’mousemove’,’mouseup’,’mouseover’,’mouseout’事件。<br>示例：点击柱状图后打开相应的百度搜索页面</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">// 基于准备好的dom，初始化ECharts实例</span><br><span class="line">var myChart = echarts.init(document.getElementById(&apos;main&apos;));</span><br><span class="line"></span><br><span class="line">// 指定图表的配置项和数据</span><br><span class="line">var option = &#123;</span><br><span class="line">    xAxis: &#123;</span><br><span class="line">        data: [&quot;衬衫&quot;,&quot;羊毛衫&quot;,&quot;雪纺衫&quot;,&quot;裤子&quot;,&quot;高跟鞋&quot;,&quot;袜子&quot;]</span><br><span class="line">    &#125;,</span><br><span class="line">    yAxis: &#123;&#125;,</span><br><span class="line">    series: [&#123;</span><br><span class="line">        name: &apos;销量&apos;,</span><br><span class="line">        type: &apos;bar&apos;,</span><br><span class="line">        data: [5, 20, 36, 10, 10, 20]</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;;</span><br><span class="line">// 使用刚指定的配置项和数据显示图表。</span><br><span class="line">myChart.setOption(option);</span><br><span class="line">// 处理点击事件并跳转到相应的百度搜索页面</span><br><span class="line">myChart.on(&apos;click&apos;,function(parans) &#123;</span><br><span class="line">    window.open(&apos;https://www.baidu.com/s?wd=&apos; + encodeURIComponent(params.name));</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>所有的鼠标事件包含参数 params，这是一个包含点击图形的数据信息的对象，格式如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    // 当前点击的图形元素所属的组件名称，</span><br><span class="line">    // 其值如 &apos;series&apos;、&apos;markLine&apos;、&apos;markPoint&apos;、&apos;timeLine&apos; 等。</span><br><span class="line">    componentType: string,</span><br><span class="line">    // 系列类型。值可能为：&apos;line&apos;、&apos;bar&apos;、&apos;pie&apos; 等。当 componentType 为 &apos;series&apos; 时有意义。</span><br><span class="line">    seriesType: string,</span><br><span class="line">    // 系列在传入的 option.series 中的 index。当 componentType 为 &apos;series&apos; 时有意义。</span><br><span class="line">    seriesIndex: number,</span><br><span class="line">    // 系列名称。当 componentType 为 &apos;series&apos; 时有意义。</span><br><span class="line">    seriesName: string,</span><br><span class="line">    // 数据名，类目名</span><br><span class="line">    name: string,</span><br><span class="line">    // 数据在传入的 data 数组中的 index</span><br><span class="line">    dataIndex: number,</span><br><span class="line">    // 传入的原始数据项</span><br><span class="line">    data: Object,</span><br><span class="line">    // sankey、graph 等图表同时含有 nodeData 和 edgeData 两种 data，</span><br><span class="line">    // dataType 的值会是 &apos;node&apos; 或者 &apos;edge&apos;，表示当前点击在 node 还是 edge 上。</span><br><span class="line">    // 其他大部分图表中只有一种 data，dataType 无意义。</span><br><span class="line">    dataType: string,</span><br><span class="line">    // 传入的数据值</span><br><span class="line">    value: number|Array</span><br><span class="line">    // 数据图形的颜色。当 componentType 为 &apos;series&apos; 时有意义。</span><br><span class="line">    color: string</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如何区分鼠标点击了哪里</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">myChart.on(&apos;click&apos;, function (params) &#123;</span><br><span class="line">    if (params.componentType === &apos;markPoint&apos;) &#123;</span><br><span class="line">        // 点击到了 markPoint 上</span><br><span class="line">        if (params.seriesIndex === 5) &#123;</span><br><span class="line">            // 点击到了 index 为 5 的 series 的 markPoint 上。</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    else if (params.componentType === &apos;series&apos;) &#123;</span><br><span class="line">        if (params.seriesType === &apos;graph&apos;) &#123;</span><br><span class="line">            if (params.dataType === &apos;edge&apos;) &#123;</span><br><span class="line">                // 点击到了 graph 的 edge（边）上。</span><br><span class="line">            &#125;</span><br><span class="line">            else &#123;</span><br><span class="line">                // 点击到了 graph 的 node（节点）上。</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>可以在回调函数中获得这个对象中的数据名、系列名称后在自己的数据仓库中索引得到其他的信息后更新图表，显示浮层等等</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">myChart.on(&apos;click&apos;, function (parmas) &#123;</span><br><span class="line">    $.get(&apos;detail?q=&apos; + params.name, function (detail) &#123;</span><br><span class="line">        myChart.setOption(&#123;</span><br><span class="line">            series: [&#123;</span><br><span class="line">                name: &apos;pie&apos;,</span><br><span class="line">                // 通过饼图表现单个柱子中的数据分布</span><br><span class="line">                data: [detail.data]</span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="Echarts组件交互的行为事件"><a href="#Echarts组件交互的行为事件" class="headerlink" title="Echarts组件交互的行为事件"></a>Echarts组件交互的行为事件</h2><p>在Echarts中基本上所有的组件交互行为都会触发相应的事件。<br>常用的事件和事件对应的参数可在官方的events文档中列出<br>下面是监听一个图里开关的示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 图例开关的行为只会触发 legendselectchanged 事件</span><br><span class="line">myChart.on(&apos;legendselectchanged&apos;, function (params) &#123;</span><br><span class="line">    // 获取点击图例的选中状态</span><br><span class="line">    var isSelected = params.selected[params.name];</span><br><span class="line">    // 在控制台中打印</span><br><span class="line">    console.log((isSelected ? &apos;选中了&apos; : &apos;取消选中了&apos;) + &apos;图例&apos; + params.name);</span><br><span class="line">    // 打印所有图例的状态</span><br><span class="line">    console.log(params.selected);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="代码触发-ECharts-中组件的行为"><a href="#代码触发-ECharts-中组件的行为" class="headerlink" title="代码触发 ECharts 中组件的行为"></a>代码触发 ECharts 中组件的行为</h2><p>通过前面的描述我们知道组件交互的行为会触发诸如 ‘legendselectchanged’ 事件，除了用户的交互操作，有时候也会有需要在程序里调用方法触发图表的行为，诸如显示 tooltip，选中图例。<br>ECharts 2.x 通过 myChart.component.tooltip.showTip 这种形式调用相应的接口触发图表行为，入口很深，而且涉及到内部组件的组织，而在 ECharts 3 里改为通过调用 myChart.dispatchAction({ type: ‘’ }) 触发图表行为，统一管理了所有动作，也可以方便地根据需要去记录用户的行为路径。<br>常用的动作和动作对应参数在 action 文档中有列出。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/04/05/vue-echarts/echarts中的canvas渲染和svg渲染/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="朱程程">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/first.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小二、上酒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/04/05/vue-echarts/echarts中的canvas渲染和svg渲染/" itemprop="url">echarts中的canvas渲染和svg渲染</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-04-05T17:38:14+08:00">
                2022-04-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/vue-echarts/" itemprop="url" rel="index">
                    <span itemprop="name">vue-echarts</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>canvas更适合绘制图形数据量非常大的图表，比如热力图、地理坐标系，也利于实现某些视觉效果。<br>svg内存占有更低（适合移动端）、渲染性能高、并且用户使用浏览器内置的缩放功能不会模糊。  </p>
<h4 id="如何选择渲染器"><a href="#如何选择渲染器" class="headerlink" title="如何选择渲染器"></a>如何选择渲染器</h4><ol>
<li>在软硬件环境较好，数据量不大的场景下，两种均可使用；</li>
<li>在创建很多实例，且浏览器易崩溃的时候，可以使用svg渲染器进行改善；</li>
<li>数据量很大且较多交互时，可以使用canvas渲染器。</li>
</ol>
<p>代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// echarts默认使用canvas渲染</span><br><span class="line">var chart = echarts.init(containerDom)</span><br><span class="line"></span><br><span class="line">// 使用canvas渲染</span><br><span class="line">var chart = echarts.init(containerDom, null, &#123; render: &apos;svg&apos; &#125;)</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/04/05/web全栈/CSS3基础/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="朱程程">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/first.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小二、上酒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/04/05/web全栈/CSS3基础/" itemprop="url">CSS3基础</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-04-05T17:38:14+08:00">
                2022-04-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web全栈/" itemprop="url" rel="index">
                    <span itemprop="name">web全栈</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>CSS3样式：<br>所有css3样式都不改变盒模型</p>
<ol>
<li><p>圆角：border-radius</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">border-radius: 50%;</span><br><span class="line">border-radius: 10px;</span><br><span class="line">baoder-radius: 10px/50px;</span><br><span class="line">border-radius: 10px 50px;</span><br><span class="line">border-radius: 10px 50px 100px;</span><br><span class="line">border-radius: 10px 50px 100px 200px;</span><br></pre></td></tr></table></figure>
</li>
<li><p>阴影：text-shadow、box-shadow</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">text-shadow: 5px 50px 1px red;  /*参数：横向偏移 纵向偏移 阴影大小 颜色 */</span><br><span class="line">box-show: inset 5px 50px 1px black; /*inset表示内阴影*/</span><br></pre></td></tr></table></figure>
</li>
<li><p>渐变：linear、radial<br>渐变不是颜色，是一种图片</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">background: -webkit-linear-gradient(left top, red 40%, green 40%);</span><br><span class="line">background: -webkit-radial-gradient(left top, red, green)</span><br></pre></td></tr></table></figure>
</li>
<li><p>rgba: rgb + alpha  opacity<br>rgba单独使用没什么作用，和其他配合使用。<br>rgba和opacity都能实现透明效果，但最大的不同是opacity作用于元素，以及元素内所有内容的透明度。而rgba只作用于元素的颜色或其背景颜色。</p>
</li>
<li><p>transform<br>（1）用transform时必须加初始值<br>（2）可以多个变换一起用————先执行后面，再执行前面<br>（3）可以有3d：rotate -&gt; rotateX,rotateY,rotateZ<br>==prespective(600px):透视，景深效果，越小效果越明显==</p>
<ul>
<li><p>rotate：旋转</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">transform: rotate(90deg);</span><br></pre></td></tr></table></figure>
</li>
<li><p>scale：缩放</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">transform: scale(2);</span><br></pre></td></tr></table></figure>
</li>
<li><p>translate：平移<br>移动端喜欢用translate</p>
</li>
<li><p>skew：倾斜</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">transform: skew(15deg, 0)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>动画：transition、animation</p>
<ul>
<li><p>transition：简单、容易、方便   常用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 时间、样式、运动形式</span><br><span class="line"> transition: 1s all ease;</span><br><span class="line"> transition: 1s all ease-in-out;</span><br><span class="line"> transition: 1s width ease, 1s height ease;</span><br></pre></td></tr></table></figure>
</li>
<li><p>animation：强大、麻烦    复杂的链式操作</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">// 定义-&gt;调用</span><br><span class="line">@keyframes aaa &#123;</span><br><span class="line">  0% &#123;width: 200px;height: 200px;font-size: 14px;background: #CCC;&#125;</span><br><span class="line">  25% &#123;width: 400px;height: 200px;font-size: 14px;background: #CCC;&#125;</span><br><span class="line">  50% &#123;width: 400px;height: 400px;font-size: 14px;background: #CCC;&#125;</span><br><span class="line">  75% &#123;width: 400px;height: 400px;font-size: 30px;background: #CCC;&#125;</span><br><span class="line">  100% &#123;width: 400px;height: 400px;font-size: 30px;background: red;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.box &#123;</span><br><span class="line">  width: 200px;</span><br><span class="line">  height: 200px;</span><br><span class="line">  background: #CCC;</span><br><span class="line">  margin: 100px auto 0;</span><br><span class="line">&#125;</span><br><span class="line">.box:active &#123;</span><br><span class="line">  /*必须*/</span><br><span class="line">  animation-name: aaa;</span><br><span class="line">  animation-duration: 5s;</span><br><span class="line">  animation-timing-function: ease;</span><br><span class="line"></span><br><span class="line">  /*扩展*/</span><br><span class="line">  animation-fill-mode: forwards; /*停留在什么状态*/</span><br><span class="line">  animation-delay: 1s;</span><br><span class="line">  animation-iteration-count: 5;  /*迭代次数*/</span><br><span class="line">  animation-direction: alternate; /*交替进行*/</span><br><span class="line">  animation-play-state: paused;  /*暂停*/</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</li>
</ul>
</li>
</ol>
<p>transform高级</p>
<ul>
<li>坐标轴：X/Y/Z</li>
<li>景深：perspective() ——对自己起作用，只是一个视觉效果</li>
<li>给父级去掉限制：preserve-3d——对子元素起作用，子元素可脱离父级（每个需要子级出来的地方都得加）</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/04/05/vue/axios/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="朱程程">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/first.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小二、上酒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/04/05/vue/axios/" itemprop="url">axios相关内容</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-04-05T17:38:14+08:00">
                2022-04-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/vue/" itemprop="url" rel="index">
                    <span itemprop="name">vue</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="axios"><a href="#axios" class="headerlink" title="axios"></a>axios</h3><p>基于promise用于浏览器和node.js的http客户端</p>
<h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><ul>
<li>支持浏览器和node.js</li>
<li>支持promise</li>
<li>能拦截请求和响应</li>
<li>能转换请求和响应数据</li>
<li>能取消请求</li>
<li>自动转换JSON数据</li>
<li>浏览器端支持防止CSRF（跨站请求伪造）</li>
</ul>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install axios</span><br></pre></td></tr></table></figure>

<h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><p>发起一个get请求</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">// Make a request for a user with a given id</span><br><span class="line">axios.get(&apos;/user?id=123&apos;)</span><br><span class="line">  .then(function (response)&#123;</span><br><span class="line">      console.log(response)</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(function (error)&#123;</span><br><span class="line">      console.log(error)</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">// 也可以写成</span><br><span class="line">axios.get(&apos;/user&apos;,&#123;</span><br><span class="line">    params:&#123;</span><br><span class="line">        id:123</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(function (response)&#123;</span><br><span class="line">      console.log(response)</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(function (error)&#123;</span><br><span class="line">      console.log(error)</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p>发起一个post请求</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">axios.post(&apos;/user&apos;, &#123;</span><br><span class="line">    firstName: &apos;&apos;,</span><br><span class="line">    lastName: &apos;&apos;</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(function (response) &#123;</span><br><span class="line">    console.log(response);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(function (error) &#123;</span><br><span class="line">    console.log(error);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p>同时发起多个请求</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function getUserAccount() &#123;</span><br><span class="line">  return axios.get(&apos;/user/12345&apos;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function getUserPermissions() &#123;</span><br><span class="line">  return axios.get(&apos;/user/12345/permissions&apos;);</span><br><span class="line">&#125;</span><br><span class="line">axios.all([getUserAccount(),getUserPermissions()])</span><br><span class="line">  .then(axios.spread(function (acct,parms)&#123;</span><br><span class="line">      // Both requests are now complete</span><br><span class="line">  &#125;))</span><br></pre></td></tr></table></figure>

<h3 id="axios-api"><a href="#axios-api" class="headerlink" title="axios api"></a>axios api</h3><p>可以通过导入相关配置发起请求</p>
<h4 id="axios-config"><a href="#axios-config" class="headerlink" title="axios(config)"></a>axios(config)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 发起一个post请求</span><br><span class="line">axios(&#123;</span><br><span class="line">  method: &apos;post&apos;,</span><br><span class="line">  url: &apos;/user/123&apos;,</span><br><span class="line">  data: &#123;</span><br><span class="line">    firstName:&apos;&apos;,</span><br><span class="line">    lastName</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 获取远程图片</span><br><span class="line">axios(&#123;</span><br><span class="line">  method: &apos;get&apos;,</span><br><span class="line">  url:&apos;http://bit.ly/2mTM3nY&apos;,</span><br><span class="line">  responseType:&apos;stream&apos;</span><br><span class="line">&#125;)</span><br><span class="line">  .then(function(response)&#123;</span><br><span class="line">      response.data.pipe(fs.createWriteStream(&apos;ada_lovelace.jpg&apos;))</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<h3 id="请求方法别名"><a href="#请求方法别名" class="headerlink" title="请求方法别名"></a>请求方法别名</h3><p>为了方便为所有支持的请求方法均提供了别名</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">axios.request(config)</span><br><span class="line">axios.get(url[,config])</span><br><span class="line">axios.delete(url[, config])</span><br><span class="line">axios.head(url[, config])</span><br><span class="line">axios.options(url[, config])</span><br><span class="line">axios.post(url[, data[, config]])</span><br><span class="line">axios.put(url[, data[, config]])</span><br><span class="line">axios.patch(url[, data[, config]])</span><br></pre></td></tr></table></figure>

<p>当使用以上别名方法时，url，method和data等属性不用在config重复声明</p>
<h3 id="同时发生的请求"><a href="#同时发生的请求" class="headerlink" title="同时发生的请求"></a>同时发生的请求</h3><p>以下两个处理同时发生多个请求的辅助函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">axios.all(iterable)</span><br><span class="line">axios.spread(callback)</span><br></pre></td></tr></table></figure>

<h3 id="创建一个axios实例"><a href="#创建一个axios实例" class="headerlink" title="创建一个axios实例"></a>创建一个axios实例</h3><p><strong>axios.creat([config])</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var instance = axios.create(&#123;</span><br><span class="line">    baseURL: &apos;&apos;,</span><br><span class="line">    timeout: 1000,</span><br><span class="line">    headers: &#123;&apos;X-Custom-Header&apos;: &apos;foobar&apos;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="请求配置项"><a href="#请求配置项" class="headerlink" title="请求配置项"></a>请求配置项</h3><p>以下是所有可用配置项，只有url是必填，默认的请求方法时get</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  // `url` 是请求的接口地址</span><br><span class="line">  url: &apos;/user&apos;,</span><br><span class="line">  </span><br><span class="line">   // `method` 是请求的方法</span><br><span class="line">  method: &apos;get&apos;, // 默认值</span><br><span class="line">  </span><br><span class="line">  // 如果url不是绝对路径，那么会将baseURL和url拼接作为请求的接口地址</span><br><span class="line">  // 用来区分不同环境，建议使用</span><br><span class="line">  baseURL: &apos;https://some-domain.com/api/&apos;,</span><br><span class="line">  </span><br><span class="line">  // 用于请求之前对请求数据进行操作</span><br><span class="line">  // 只用当请求方法为‘PUT’，‘POST’和‘PATCH’时可用</span><br><span class="line">  // 最后一个函数需return出相应数据</span><br><span class="line">  // 可以修改headers</span><br><span class="line">  transformRequest: [function (data, headers) &#123;</span><br><span class="line">    // 可以对data做任何操作</span><br><span class="line"></span><br><span class="line">    return data;</span><br><span class="line">  &#125;],</span><br><span class="line">  </span><br><span class="line">  // 用于对相应数据进行处理</span><br><span class="line">  // 它会通过then或者catch</span><br><span class="line">  transformResponse: [function (data) &#123;</span><br><span class="line">    // 可以对data做任何操作</span><br><span class="line"></span><br><span class="line">    return data;</span><br><span class="line">  &#125;],</span><br><span class="line">  </span><br><span class="line">  // `headers` are custom headers to be sent</span><br><span class="line">  headers: &#123;&apos;X-Requested-With&apos;: &apos;XMLHttpRequest&apos;&#125;,</span><br><span class="line">  </span><br><span class="line">  // URL参数</span><br><span class="line">  // 必须是一个纯对象或者 URL参数对象</span><br><span class="line">  params: &#123;</span><br><span class="line">    ID: 12345</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  // 是一个可选的函数负责序列化`params`</span><br><span class="line">  // (e.g. https://www.npmjs.com/package/qs, http://api.jquery.com/jquery.param/)</span><br><span class="line">  paramsSerializer: function(params) &#123;</span><br><span class="line">    return Qs.stringify(params, &#123;arrayFormat: &apos;brackets&apos;&#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  // 请求体数据</span><br><span class="line">  // 只有当请求方法为&apos;PUT&apos;, &apos;POST&apos;,和&apos;PATCH&apos;时可用</span><br><span class="line">  // 当没有设置`transformRequest`时，必须是以下几种格式</span><br><span class="line">  // - string, plain object, ArrayBuffer, ArrayBufferView, URLSearchParams</span><br><span class="line">  // - Browser only: FormData, File, Blob</span><br><span class="line">  // - Node only: Stream, Buffer</span><br><span class="line">  data: &#123;</span><br><span class="line">    firstName: &apos;Fred&apos;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // 请求超时时间（毫秒）</span><br><span class="line">  timeout: 1000,</span><br><span class="line">  </span><br><span class="line">  // 是否携带cookie信息</span><br><span class="line">  withCredentials: false, // default</span><br><span class="line">  </span><br><span class="line">  // 统一处理request让测试更加容易</span><br><span class="line">  // 返回一个promise并提供一个可用的response</span><br><span class="line">  adapter: function (config) &#123;</span><br><span class="line">    /* ... */</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  auth: &#123;</span><br><span class="line">    username: &apos;janedoe&apos;,</span><br><span class="line">    password: &apos;s00pers3cret&apos;</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  // 响应格式</span><br><span class="line">  // 可选项 &apos;arraybuffer&apos;, &apos;blob&apos;, &apos;document&apos;, &apos;json&apos;, &apos;text&apos;, &apos;stream&apos;</span><br><span class="line">  responseType: &apos;json&apos;, // 默认值是json</span><br><span class="line">  </span><br><span class="line">  // `xsrfCookieName` is the name of the cookie to use as a value for xsrf token</span><br><span class="line">  xsrfCookieName: &apos;XSRF-TOKEN&apos;, // default</span><br><span class="line"></span><br><span class="line">  // `xsrfHeaderName` is the name of the http header that carries the xsrf token value</span><br><span class="line">  xsrfHeaderName: &apos;X-XSRF-TOKEN&apos;, // default</span><br><span class="line">  </span><br><span class="line">  // 处理上传进度事件</span><br><span class="line">  onUploadProgress: function (progressEvent) &#123;</span><br><span class="line">    // Do whatever you want with the native progress event</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // 处理下载进度事件</span><br><span class="line">  onDownloadProgress: function (progressEvent) &#123;</span><br><span class="line">    // Do whatever you want with the native progress event</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // 设置http响应内容的最大长度</span><br><span class="line">  maxContentLength: 2000,</span><br><span class="line">  </span><br><span class="line">  // 定义可获得的http响应状态码</span><br><span class="line">  // return true、设置为null或者undefined，promise将resolved,否则将rejected</span><br><span class="line">  validateStatus: function (status) &#123;</span><br><span class="line">    return status &gt;= 200 &amp;&amp; status &lt; 300; // default</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // `maxRedirects` defines the maximum number of redirects to follow in node.js.</span><br><span class="line">  // If set to 0, no redirects will be followed.</span><br><span class="line">  // 最大重定向次数</span><br><span class="line">  maxRedirects: 5, // default</span><br><span class="line">  </span><br><span class="line">   // `httpAgent` and `httpsAgent` define a custom agent to be used when performing http</span><br><span class="line">  // and https requests, respectively, in node.js. This allows options to be added like</span><br><span class="line">  // `keepAlive` that are not enabled by default.</span><br><span class="line">  httpAgent: new http.Agent(&#123; keepAlive: true &#125;),</span><br><span class="line">  httpsAgent: new https.Agent(&#123; keepAlive: true &#125;),</span><br><span class="line"></span><br><span class="line">  // &apos;proxy&apos; defines the hostname and port of the proxy server</span><br><span class="line">  // Use `false` to disable proxies, ignoring environment variables.</span><br><span class="line">  // `auth` indicates that HTTP Basic auth should be used to connect to the proxy, and</span><br><span class="line">  // supplies credentials.</span><br><span class="line">  // This will set an `Proxy-Authorization` header, overwriting any existing</span><br><span class="line">  // `Proxy-Authorization` custom headers you have set using `headers`.</span><br><span class="line">  // 代理</span><br><span class="line">  proxy: &#123;</span><br><span class="line">    host: &apos;127.0.0.1&apos;,</span><br><span class="line">    port: 9000,</span><br><span class="line">    auth: &#123;</span><br><span class="line">      username: &apos;mikeymike&apos;,</span><br><span class="line">      password: &apos;rapunz3l&apos;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  // `cancelToken` specifies a cancel token that can be used to cancel the request</span><br><span class="line">  // (see Cancellation section below for details)</span><br><span class="line">  // 用于取消请求</span><br><span class="line">  cancelToken: new CancelToken(function (cancel) &#123;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="相应组成"><a href="#相应组成" class="headerlink" title="相应组成"></a>相应组成</h3><p>response由以下几部分信息组成</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  data: &#123;&#125;, // 服务端返回的数据</span><br><span class="line">  status:200, // 服务端返回的状态码</span><br><span class="line">  statusText: &apos;OK&apos;, // 服务端返回的状态信息</span><br><span class="line">  headers: &#123;&#125;, // 响应头，所有的响应头名称都是小写</span><br><span class="line">  config: &#123;&#125;, // axios请求配置</span><br><span class="line">  request: &#123;&#125; // 请求</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>用then接受以下相应信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">axios.get(&apos;/user/12345&apos;)</span><br><span class="line">  .then(function(response) &#123;</span><br><span class="line">    console.log(response.data);</span><br><span class="line">    console.log(response.status);</span><br><span class="line">    console.log(response.statusText);</span><br><span class="line">    console.log(response.headers);</span><br><span class="line">    console.log(response.config);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<h3 id="默认配置"><a href="#默认配置" class="headerlink" title="默认配置"></a>默认配置</h3><h4 id="全局修改axios默认配置"><a href="#全局修改axios默认配置" class="headerlink" title="全局修改axios默认配置"></a>全局修改axios默认配置</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">axios.defaults.baseURL = &apos;https://api.example.com&apos;;</span><br><span class="line">axios.defaults.headers.common[&apos;Authorization&apos;] = AUTH_TOKEN;</span><br><span class="line">axios.defaults.headers.post[&apos;Content-Type&apos;] = &apos;application/x-www-form-urlencoded&apos;;</span><br></pre></td></tr></table></figure>

<h4 id="实例默认配置"><a href="#实例默认配置" class="headerlink" title="实例默认配置"></a>实例默认配置</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 创建实例时修改配置</span><br><span class="line">var instance = axios.create(&#123;</span><br><span class="line">  baseURL: &apos;https://api.example.com&apos;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 实例创建之后修改配置</span><br><span class="line">instance.defaults.headers.common[&apos;Authorization&apos;] = AUTH_TOKEN;</span><br></pre></td></tr></table></figure>

<h4 id="配置优先级"><a href="#配置优先级" class="headerlink" title="配置优先级"></a>配置优先级</h4><p>配置项通过一定的规则合并，request config &gt; instance.defaults &gt; 系统默认，优先级高的覆盖优先级低的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// 创建一个实例，这时的超时时间为系统默认的 0</span><br><span class="line">var instance = axios.create();</span><br><span class="line"></span><br><span class="line">// 通过instance.defaults重新设置超时时间为2.5s，因为优先级比系统默认高</span><br><span class="line">instance.defaults.timeout = 2500;</span><br><span class="line"></span><br><span class="line">// 通过request config重新设置超时时间为5s，因为优先级比instance.defaults和系统默认都高</span><br><span class="line">instance.get(&apos;/longRequest&apos;, &#123;</span><br><span class="line">  timeout: 5000</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="拦截器"><a href="#拦截器" class="headerlink" title="拦截器"></a>拦截器</h3><p>可以在then和catch之前拦截请求和响应</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">// 添加一个请求拦截器</span><br><span class="line">axios.interceptors.request.use(config =&gt; &#123;</span><br><span class="line">    // 在发送请求之前做些什么，例如加入token</span><br><span class="line">  if (store.getters.token) &#123;</span><br><span class="line">    config.headers[&apos;Dashboard-Token&apos;] = Cookies.get(&apos;Dashboard-Token&apos;)</span><br><span class="line">  &#125;</span><br><span class="line">    return config;</span><br><span class="line">  &#125;, function (error) &#123;</span><br><span class="line">    // 对请求错误做些什么</span><br><span class="line">    return Promise.reject(error);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">// 添加一个响应拦截器</span><br><span class="line">axios.interceptors.response.use(response =&gt; &#123;</span><br><span class="line">    // Do something with response data</span><br><span class="line">    return response;</span><br><span class="line">  &#125;, function (error) &#123;</span><br><span class="line">    // Do something with response error</span><br><span class="line">    return Promise.reject(error);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p>如果之后想移除拦截器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var myInterceptor = axios.interceptors.request.use(function () &#123;/*...*/&#125;);</span><br><span class="line">axios.interceptors.request.eject(myInterceptor);</span><br></pre></td></tr></table></figure>

<p>也可以为axios实例添加一个拦截器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var instance = axios.create();</span><br><span class="line">instance.interceptors.request.use(function () &#123;/*...*/&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="作用："><a href="#作用：" class="headerlink" title="作用："></a>作用：</h4><p>请求拦截器作用是在请求发送之前进行一些操作，例如在每个请求体里加上token，统一做了处理，如果以后要改也是非常容易的。<br>响应拦截器的作用是在接受到响应后进行一些操作，例如服务器返回登录状态失效，需要重新登录的时候，跳转到登录页。</p>
<h3 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">axios.get(&apos;/user/12345&apos;)</span><br><span class="line">  .catch(function (error) &#123;</span><br><span class="line">    if (error.response) &#123;</span><br><span class="line">      // 发送请求后，服务端返回的响应码不是 2xx   </span><br><span class="line">      console.log(error.response.data);</span><br><span class="line">      console.log(error.response.status);</span><br><span class="line">      console.log(error.response.headers);</span><br><span class="line">    &#125; else if (error.request) &#123;</span><br><span class="line">      // 发送请求但是没有响应返回</span><br><span class="line">      console.log(error.request);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      // 其他错误</span><br><span class="line">      console.log(&apos;Error&apos;, error.message);</span><br><span class="line">    &#125;</span><br><span class="line">    console.log(error.config);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p>可以用validateStatus定义一个http状态码返回的范围.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">axios.get(&apos;/user/12345&apos;, &#123;</span><br><span class="line">  validateStatus: function (status) &#123;</span><br><span class="line">    return status &lt; 500; // Reject only if the status code is greater than or equal to 500</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="取消请求"><a href="#取消请求" class="headerlink" title="取消请求"></a>取消请求</h3><p>可以通过cancel token来取消一个请求</p>
<h3 id="代码封装"><a href="#代码封装" class="headerlink" title="代码封装"></a>代码封装</h3><h4 id="工具类的封装"><a href="#工具类的封装" class="headerlink" title="工具类的封装"></a>工具类的封装</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line">// 引入axios</span><br><span class="line">import axios from &apos;axios&apos;</span><br><span class="line"></span><br><span class="line">// 创建axios实例</span><br><span class="line">const httpService = axios.create(&#123;</span><br><span class="line">  // url前缀-&apos;https://some-domin.com/api/&apos;</span><br><span class="line">  baseURL: process.env.VUE_APP_BASE_API,</span><br><span class="line">  timeout: 3000</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// request拦截器(interceptors)</span><br><span class="line">httpService.interceptors.request.use(</span><br><span class="line">  config =&gt; &#123;</span><br><span class="line">    // 根据条件加入token-安全携带</span><br><span class="line">    if (true) &#123; // 自定义条件</span><br><span class="line">      // 让每个请求都携带token</span><br><span class="line">      config.headers[&apos;User-Token&apos;] = &apos;&apos;</span><br><span class="line">    &#125;</span><br><span class="line">    return config</span><br><span class="line">  &#125;,</span><br><span class="line">  error =&gt; &#123;</span><br><span class="line">    // 请求错误处理</span><br><span class="line">    Promise.reject(error)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">// response拦截器</span><br><span class="line">httpService.interceptors.response.use(</span><br><span class="line">  response =&gt; &#123;</span><br><span class="line">    // 统一处理状态</span><br><span class="line">    const res = response.data</span><br><span class="line">    if (res.statuscode !== 1) &#123; // 自定义</span><br><span class="line">      // 返回异常</span><br><span class="line">      return Promise.reject(&#123;</span><br><span class="line">        status: res.statuscode,</span><br><span class="line">        message: res.message</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      return response.data</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  // 处理</span><br><span class="line">  error =&gt; &#123;</span><br><span class="line">    if (error &amp;&amp; error.response) &#123;</span><br><span class="line">      switch (error.response.status) &#123;</span><br><span class="line">        case 400:</span><br><span class="line">          error.message = &apos;错误请求&apos;</span><br><span class="line">          break</span><br><span class="line">        case 401:</span><br><span class="line">          error.message = &apos;未授权，请重新登录&apos;</span><br><span class="line">          break</span><br><span class="line">        case 403:</span><br><span class="line">          error.message = &apos;拒绝访问&apos;</span><br><span class="line">          break</span><br><span class="line">        case 404:</span><br><span class="line">          error.message = &apos;请求错误，未找到该资源&apos;</span><br><span class="line">          break</span><br><span class="line">        case 405:</span><br><span class="line">          error.message = &apos;请求方法未允许&apos;</span><br><span class="line">          break</span><br><span class="line">        case 408:</span><br><span class="line">          error.message = &apos;请求超时&apos;</span><br><span class="line">          break</span><br><span class="line">        case 500:</span><br><span class="line">          error.message = &apos;服务器端出错&apos;</span><br><span class="line">          break</span><br><span class="line">        case 501:</span><br><span class="line">          error.message = &apos;网络未实现&apos;</span><br><span class="line">          break</span><br><span class="line">        case 502:</span><br><span class="line">          error.message = &apos;网络错误&apos;</span><br><span class="line">          break</span><br><span class="line">        case 503:</span><br><span class="line">          error.message = &apos;服务不可用&apos;</span><br><span class="line">          break</span><br><span class="line">        case 504:</span><br><span class="line">          error.message = &apos;网络超时&apos;</span><br><span class="line">          break</span><br><span class="line">        case 505:</span><br><span class="line">          error.message = &apos;http版本不支持该请求&apos;</span><br><span class="line">          break</span><br><span class="line">        default:</span><br><span class="line">          error.message = `未知错误$&#123;error.response.status&#125;`</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      error.message = &apos;连接到服务器失败&apos;</span><br><span class="line">    &#125;</span><br><span class="line">    return Promise.reject(error)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// 引入工具类-目录自定义</span><br><span class="line">import fetch from &apos;@/util/fetch&apos;</span><br><span class="line"></span><br><span class="line">export function login(data) &#123;</span><br><span class="line">  return fetch(&#123;</span><br><span class="line">    url: &apos;/login&apos;,</span><br><span class="line">    method: &apos;POST&apos;,</span><br><span class="line">    data</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/04/05/web全栈/Ajax2.0：FormData和cors/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="朱程程">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/first.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小二、上酒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/04/05/web全栈/Ajax2.0：FormData和cors/" itemprop="url">Ajax2.0：FormData和cors</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-04-05T17:38:14+08:00">
                2022-04-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web全栈/" itemprop="url" rel="index">
                    <span itemprop="name">web全栈</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>ajax2.0</p>
<ul>
<li>formdata: 控制提交数据、文件上传进度条</li>
<li>cors跨域</li>
</ul>
<h3 id="formdata"><a href="#formdata" class="headerlink" title="formdata"></a>formdata</h3><p>主要用来上传文件，在服务器端和普通<form>一样。</form></p>
<p>formdata的四个操作</p>
<ul>
<li>set(key, value) 会覆盖</li>
<li>append(key, value) 不覆盖</li>
<li>get(key) =&gt; value</li>
<li>delete(key)</li>
</ul>
<h3 id="跨域"><a href="#跨域" class="headerlink" title="跨域"></a>跨域</h3><p>本不存在跨域问题，是浏览器对我们的限制  </p>
<p>在后台对跨域进行处理</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 允许跨域</span></span><br><span class="line">  res.setHeader(<span class="string">'Access-Control-Allow-Origin'</span>, <span class="string">'*'</span>);</span><br></pre></td></tr></table></figure>



<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// req.headers['orign']=='null' || /^https?:\/\/(www\.)+abc\.com/.req.headers['orign']</span></span><br><span class="line"><span class="keyword">if</span>(req.headers[<span class="string">'orign'</span>]==<span class="string">'null'</span> || req.headers[<span class="string">'orign'</span>].startsWith(<span class="string">'http://localhost'</span>)) &#123;</span><br><span class="line">  <span class="comment">// 允许跨域</span></span><br><span class="line">  res.setHeader(<span class="string">'Access-Control-Allow-Origin'</span>, <span class="string">'*'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Access-Control-Allow-Origin: 域名||*  </p>
<ul>
<li>服务器端：验证headers[‘orign’]认不认识。认识=&gt;setHeader(‘Access-Control-Allow-Origin’, ‘*’)</li>
<li>客户端：不需要做任何事。</li>
</ul>
<p>Ajax跨域和前端无关，只和后端验证相关</p>
<h3 id="拖拽上传"><a href="#拖拽上传" class="headerlink" title="拖拽上传"></a>拖拽上传</h3><p>事件：</p>
<ul>
<li>ondragenter  拖着东西进入</li>
<li>ondragleave  拖着东西离开</li>
<li>ondragover  悬停</li>
<li>ondrop  松手</li>
</ul>
<p>超过一定大小的文件：50M————走插件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span> <span class="attr">media</span>=<span class="string">"screen"</span>&gt;</span></span><br><span class="line">    .box &#123;</span><br><span class="line">      width: 400px;</span><br><span class="line">      height: 150px;</span><br><span class="line">      border: 1px solid black;</span><br><span class="line">      background: #CCC;</span><br><span class="line">      position: absolute;</span><br><span class="line">      margin-left: -200px;</span><br><span class="line">      margin-top: -75px;</span><br><span class="line">      left: 50%;</span><br><span class="line">      top: 50%;</span><br><span class="line">      text-align: center;</span><br><span class="line">      line-height: 150px;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> oBox = <span class="built_in">document</span>.querySelector(<span class="string">'.box'</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">      oBox.ondragenter = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        oBox.innerHTML = <span class="string">'松手上传'</span>;</span></span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line"><span class="javascript">      oBox.ondragleave = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        oBox.innerHTML = <span class="string">'请拖到这里'</span>;</span></span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line"><span class="javascript">      <span class="comment">// 鼠标悬停没有松手且还没离开，就一直发生</span></span></span><br><span class="line"><span class="javascript">      oBox.ondragover = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">'aaa'</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="comment">// ondragover不阻止默认事件，ondrop就不会触发</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line"><span class="javascript">      oBox.ondrop = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        alert(<span class="string">'松手'</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(ev.dataTransfer.files);</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">    请拖到这里</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="上传进度"><a href="#上传进度" class="headerlink" title="上传进度"></a>上传进度</h3><p>ajax对象中的upload的onprogress方法，是一个XMLHttpRequestUpload对象，用来观察上传进度。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">oAjax.upload.onprogress = <span class="function"><span class="keyword">function</span>(<span class="params">env</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(ev);</span><br><span class="line">    ev.loaded   完成</span><br><span class="line">    ev.total   总共</span><br><span class="line">    ev.loader/ev.total  =&gt;  <span class="number">0</span>~<span class="number">1</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ol>
<li>upload必须放在send前面</li>
<li>以前的上传是POST，加了upload则是OPTIONS、POST</li>
<li>服务器必须能处理OPTIONS。</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">oAjax.onprogress  <span class="comment">// 下载进度</span></span><br><span class="line">oAjax.upload.onprogress  <span class="comment">// 上传进度</span></span><br></pre></td></tr></table></figure>

<p>断点续传：普通HTML做不到，必须通过客户端实现。</p>
<h3 id="拖拽上传（深入）"><a href="#拖拽上传（深入）" class="headerlink" title="拖拽上传（深入）"></a>拖拽上传（深入）</h3><ul>
<li>拖拽-&gt;上传  简单<br>ev.dataTransfer.files -&gt; FromData</li>
<li>拖拽-&gt;读取文件内容  复杂<br>FileReader</li>
</ul>
<p>对于阻止事件：<br>如果是直接赋值的话，直接return false：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">oForm.onsubmit = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果是addEventListener绑定的话，使用ev.preventDefault</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">oForm.addEventListener(<span class="string">'submit'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">ev</span>) </span>&#123;</span><br><span class="line">    ev.preventDefault();</span><br><span class="line">&#125;, <span class="literal">false</span>)</span><br></pre></td></tr></table></figure>

<h4 id="图片上传"><a href="#图片上传" class="headerlink" title="图片上传"></a>图片上传</h4><p>上传 -&gt; 显示 -&gt; 存到数据库里</p>
<p>方法1：先别上传，彻底挑选完了再上传。（节约资源）<br>方法2：真的上传，等用户再删。（保险、万一用户断网）</p>
<h5 id="FileReader用法："><a href="#FileReader用法：" class="headerlink" title="FileReader用法："></a>FileReader用法：</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reader = <span class="keyword">new</span> FileReader();</span><br><span class="line"></span><br><span class="line">reader.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">reader.readAsXXX</span><br><span class="line"></span><br><span class="line">readAsText   文本</span><br><span class="line">readAsDataURL   图片(以及其他二进制数据)</span><br><span class="line">readAsBinaryString  以字符串形式存储的二进制数据</span><br><span class="line">readAsArrayBuffer   以二进制数组的形式存储数据</span><br></pre></td></tr></table></figure>

<p>传输数据：</p>
<ol>
<li>直接二进制</li>
<li>base64</li>
</ol>
<p>base64可以将二进制数据表现成字符串。<br>只要能出现地址(src)的地方都可以使用Base64</p>
<p>base64应用：小图标不要引用地址，直接放个base64————优化网络性能。</p>
<p>图片上传代码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    * &#123;margin: 0; padding: 0; list-style: none;&#125;</span><br><span class="line">    .box &#123;</span><br><span class="line">      width: 400px;</span><br><span class="line">      height: 200px;</span><br><span class="line">      background: #CCC;</span><br><span class="line">      border: 1px solid black;</span><br><span class="line">      line-height: 200px;</span><br><span class="line">      position: absolute;</span><br><span class="line">      left: 50%;</span><br><span class="line">      top: 50%;</span><br><span class="line">      margin-left: -200px;</span><br><span class="line">      margin-top: -100px;</span><br><span class="line">      text-align: center;</span><br><span class="line">      display: none;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .img_list &#123;</span><br><span class="line">      overflow: hidden;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .img_list li &#123;</span><br><span class="line">      float: left;</span><br><span class="line">      width: 200px;</span><br><span class="line">      height: 200px;</span><br><span class="line">      border: 3px solid #666;</span><br><span class="line">      margin: 10px;</span><br><span class="line">      position: relative;</span><br><span class="line">    &#125;</span><br><span class="line">    .img_list li img &#123;</span><br><span class="line">      width: 100%;</span><br><span class="line">      height: 100%;</span><br><span class="line">    &#125;</span><br><span class="line">    .img_list li .del_btn &#123;</span><br><span class="line">      position: absolute;</span><br><span class="line">      right: 0;</span><br><span class="line">      top: 0;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="comment">// let oBox = document.getElementsByClassName('box');</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> oBox = <span class="built_in">document</span>.querySelector(<span class="string">'.box'</span>);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> oUl = <span class="built_in">document</span>.querySelector(<span class="string">'.img_list'</span>);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> timer;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">      <span class="built_in">document</span>.addEventListener(<span class="string">'dragover'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">ev</span>) </span>&#123;</span></span><br><span class="line">        clearTimeout(timer);</span><br><span class="line"><span class="javascript">        oBox.style.display = <span class="string">'block'</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">        timer = setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          oBox.style.display = <span class="string">'none'</span>;</span></span><br><span class="line">        &#125;,300)</span><br><span class="line">        ev.preventDefault();</span><br><span class="line"><span class="javascript">      &#125;, <span class="literal">false</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">      oBox.addEventListener(<span class="string">'dragenter'</span>, () =&gt; &#123;</span></span><br><span class="line"><span class="javascript">        oBox.innerHTML = <span class="string">'请松手'</span>;</span></span><br><span class="line"><span class="javascript">      &#125;, <span class="literal">false</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">      oBox.addEventListener(<span class="string">'dragleave'</span>, () =&gt; &#123;</span></span><br><span class="line"><span class="javascript">        oBox.innerHTML = <span class="string">'请拖到这里'</span>;</span></span><br><span class="line"><span class="javascript">      &#125;, <span class="literal">false</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">      oBox.addEventListener(<span class="string">'drop'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">ev</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(ev);</span></span><br><span class="line"><span class="javascript">        <span class="built_in">Array</span>.from(ev.dataTransfer.files).forEach(<span class="function"><span class="params">file</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">let</span> reader = <span class="keyword">new</span> FileReader();</span></span><br><span class="line"><span class="javascript">          reader.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(reader);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> oLi = <span class="built_in">document</span>.createElement(<span class="string">'li'</span>);</span></span><br><span class="line"><span class="javascript">            oLi.file = file;  <span class="comment">// 每个li对应一个图片，将它保存</span></span></span><br><span class="line"><span class="xml">            oLi.innerHTML = '<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"a.tif"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span> <span class="attr">class</span>=<span class="string">"del_btn"</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">a</span>&gt;</span>';</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> oImg = oLi.children[<span class="number">0</span>];</span></span><br><span class="line"><span class="javascript">            oImg.src = <span class="keyword">this</span>.result;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> oBtDel = oLi.children[<span class="number">1</span>];</span></span><br><span class="line"><span class="javascript">            oBtDel.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line">              oUl.removeChild(oLi);</span><br><span class="line">            &#125;;</span><br><span class="line"></span><br><span class="line">            oUl.appendChild(oLi);</span><br><span class="line">          &#125;;</span><br><span class="line">          reader.readAsDataURL(file);</span><br><span class="line">         &#125;)</span><br><span class="line">        ev.preventDefault();</span><br><span class="line"><span class="javascript">      &#125;, <span class="literal">false</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">      <span class="comment">// 真正的上传</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> oBtupload = <span class="built_in">document</span>.getElementById(<span class="string">'btn_upload'</span>);</span></span><br><span class="line"><span class="javascript">      oBtupload.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> data = <span class="keyword">new</span> FormData();</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="built_in">Array</span>.from(oUl.children).forEach(<span class="function"><span class="params">li</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">          data.append(<span class="string">'f1'</span>, li.file);</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(li.file, <span class="string">'li'</span>);</span></span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> oAjax = <span class="keyword">new</span> XMLHttpRequest();</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">        oAjax.open(<span class="string">'POST'</span>, <span class="string">'http://localhost:8089/api'</span>, <span class="literal">true</span>);</span></span><br><span class="line">        oAjax.send(data);</span><br><span class="line"><span class="javascript">        oAjax.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">if</span>(oAjax.readyState == <span class="number">4</span>) &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span>(oAjax.status &gt;= <span class="number">200</span> &amp;&amp; oAjax.status &lt; <span class="number">300</span> || oAjax.status == <span class="number">304</span>) &#123;</span></span><br><span class="line"><span class="javascript">              alert(<span class="string">'success'</span>);</span></span><br><span class="line"><span class="javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">              alert(<span class="string">'defect'</span>);</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"img_list"</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">"上传"</span> <span class="attr">id</span>=<span class="string">"btn_upload"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">    请拖到这里</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>后端nodejs代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);  <span class="comment">// 框架主体</span></span><br><span class="line"><span class="keyword">const</span> body = <span class="built_in">require</span>(<span class="string">'body-parser'</span>);  <span class="comment">// 接受普通POST数据</span></span><br><span class="line"><span class="keyword">const</span> multer = <span class="built_in">require</span>(<span class="string">'multer'</span>);  <span class="comment">// 接受文件POST数据</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> server = express();</span><br><span class="line">server.listen(<span class="number">8089</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 中间件</span></span><br><span class="line">server.use(body.urlencoded(&#123;<span class="attr">extended</span>:<span class="literal">false</span>&#125;));</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> multerObj = multer(&#123;<span class="attr">dest</span>: <span class="string">'./upload/'</span>&#125;);</span><br><span class="line">server.use(multerObj.any());</span><br><span class="line"></span><br><span class="line">server.use(<span class="string">'/api'</span>, (req, res) =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(req.headers);</span><br><span class="line">  res.setHeader(<span class="string">'Access-Control-Allow-Origin'</span>, <span class="string">'*'</span>);</span><br><span class="line"></span><br><span class="line">  res.send(<span class="string">'OK'</span>);</span><br><span class="line">  <span class="comment">// 由中间件提供</span></span><br><span class="line">  <span class="built_in">console</span>.log(req.body);</span><br><span class="line">  <span class="built_in">console</span>.log(req.files);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/05/11/算法/动态规划-精简/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="朱程程">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/first.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小二、上酒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/05/11/算法/动态规划-精简/" itemprop="url">动态规划-精简</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-05-11T14:28:56+08:00">
                2021-05-11
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/算法/" itemprop="url" rel="index">
                    <span itemprop="name">算法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="动态规划"><a href="#动态规划" class="headerlink" title="动态规划"></a>动态规划</h2><p>首先，<strong>动态规划问题的一般形式就是求最值</strong>。比如，求<strong>最长</strong>递归子序列，<strong>最小</strong>编辑距离等等。</p>
<p>求最值的核心问题就是<strong>穷举</strong>。因为要求最值，要将所有可行的答案穷举出来，然后在其中找最值。</p>
<ul>
<li>首先，动态规划的穷举有点特别，因为这类问题存在“<strong>重叠子问题</strong>”，如果暴力穷举的话效率会极其低下，所以需要 <strong>备忘录</strong> 或者 <strong>DP table</strong> 来优化穷举过程，避免不必要的计算。</li>
<li>动态规划问题一定具备 “<strong>最优子结构</strong>” ，才能通过子问题的最值得到原问题的最值。</li>
<li>虽然动态规划的核心思想就是穷举求最值，但是问题可以千变万化，穷举所有可行解并不是一件容易的事，只有列出<strong>正确的状态转移方程</strong>，才能正确的穷举。</li>
</ul>
<p>以上提到的 <strong>重叠子问题</strong>、<strong>最优子结构</strong>、<strong>状态转移方程</strong>就是动态规划三要素。</p>
<p>实际的算法问题中，写出状态转移方程是最困难的，这也是动态规划问题困难的原因，</p>
<p>以下思维框架辅助思考状态转移方程。：</p>
<p><strong>明确 base case -&gt; 明确状态 -&gt; 明确选择 -&gt; 定义 dp 数组/函数的含义</strong>。</p>
<p>按照上面的套路，最后的结果可以套这个框架</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 初始化 base case</span></span><br><span class="line">dp[<span class="number">0</span>][<span class="number">0</span>][...] = base</span><br><span class="line"><span class="comment"># 进行状态转移</span></span><br><span class="line"><span class="keyword">for</span> 状态<span class="number">1</span> <span class="keyword">in</span> 状态<span class="number">1</span>的所有取值:</span><br><span class="line">	<span class="keyword">for</span> 状态<span class="number">2</span> <span class="keyword">in</span> 状态<span class="number">2</span>的所有取值:</span><br><span class="line">		<span class="keyword">for</span> ...</span><br><span class="line">			dp[状态<span class="number">1</span>][状态<span class="number">2</span>][...] = 求最值(选择<span class="number">1</span>, 选择<span class="number">2.</span>..)</span><br></pre></td></tr></table></figure>

<p>下面通过斐波那契数列问题和凑零钱问题来详解动态规划的基本原理。前者主要是重叠则问题（斐波那契数列没有求最值，所以严格来说不是动态规划问题），后者主要举集中于如何列出状态转移方程。</p>
<h3 id="一、斐波那契数列"><a href="#一、斐波那契数列" class="headerlink" title="一、斐波那契数列"></a>一、斐波那契数列</h3><h4 id="1-暴力递归"><a href="#1-暴力递归" class="headerlink" title="1. 暴力递归"></a>1. 暴力递归</h4><p>斐波那契数列的数学形式就是递归，写成代码就是这样：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fib</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (N == <span class="number">1</span> || N == <span class="number">2</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">return</span> fib(N-<span class="number">1</span>) + fib(N-<span class="number">2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>假设 N= 20 时的递归树为：</p>
<p><img src="https://labuladong.github.io/algo/images/%e5%8a%a8%e6%80%81%e8%a7%84%e5%88%92%e8%af%a6%e8%a7%a3%e8%bf%9b%e9%98%b6/1.jpg" alt="递归树"></p>
<p>这个递归树怎么理解。就是想要计算原问题 <code>f(20)</code> ，就得先计算子问题 <code>f(19)</code> 和 <code>f(18)</code> ，然后要计算 <code>f(19)</code>，就要先算出子问题 <code>f(18)</code> 和 <code>f(17)</code>，以此类推。最后遇到 <code>f(1)</code> 和 <code>f(2)</code>的时候，结果已知就能直接返回结果。</p>
<p><strong>递归算法的时间复杂度怎么计算？就是用子问题个数乘以解决一个子问题需要的时间</strong>。</p>
<p>首先计算子问题个数，即递归树种节点的总数。显然二叉树种节点总数为指数级别，所以子问题个数为 <code>O(2^n)</code>。</p>
<p>然后计算解决一个子问题的时间，在本算法中，没有循环，只有 <code>f(n - 1) + f(n - 2)</code>一个加法操作，时间为 <code>O(1)</code>.</p>
<p>所以这个算法的时间复杂度为二者相乘，即 <code>O(2^n)</code>,指数级别，爆炸。</p>
<p>观察递归树很明显发现<strong>算法低效的原因：存在大量重复计算</strong>。</p>
<p>这就是动态规划问题的第一个性质：<strong>重叠子问题</strong>。</p>
<p>如何解决这个问题</p>
<h4 id="2-带备忘录的递归解法"><a href="#2-带备忘录的递归解法" class="headerlink" title="2. 带备忘录的递归解法"></a>2. 带备忘录的递归解法</h4><p>明确了问题，其实就已经将问题解决了一半。既然耗时的原因是重复计算，那么可以用一个备忘录，每次算出某个子问题的答案后别急着返回，先在备忘录中记录，每遇到一个子问题先去备忘录中进行查找，如果发现之前已经解决过这个问题了，就直接将答案拿出来使用，不用再耗时去计算了。</p>
<p>一般使用一个数组充当备忘录，当然也可以使用哈希表，思想都是一样。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fib</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (N &lt; <span class="number">1</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	<span class="comment">// 备忘录全部初始化为0</span></span><br><span class="line">	<span class="keyword">int</span>[] memo = <span class="keyword">new</span> <span class="keyword">int</span>[N+<span class="number">1</span>];</span><br><span class="line">	Arrays.fill(memo, <span class="number">0</span>);</span><br><span class="line">	<span class="comment">// 进行带备忘录的递归</span></span><br><span class="line">	<span class="keyword">return</span> helper(memo, N);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">helper</span><span class="params">(<span class="keyword">int</span>[] memo, <span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">	<span class="comment">// base case</span></span><br><span class="line">	<span class="keyword">if</span> (N == <span class="number">1</span> || N == <span class="number">2</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	<span class="comment">// 已经计算过了</span></span><br><span class="line">	<span class="keyword">if</span> (memo[N] != <span class="number">0</span>) <span class="keyword">return</span> memo[N];</span><br><span class="line">	memo[N] = helper(memo, N-<span class="number">1</span>) + helper(memo, N-<span class="number">2</span>);</span><br><span class="line">	<span class="keyword">return</span> memo[N];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>实际上，带 “备忘录” 的递归算法，将一颗存在巨量冗余的递归树通过 “剪枝”，改造成一幅不存在冗余的递归图，极大减少了子问题的个数。</p>
<p><strong>递归问题的时间复杂度计算：子问题个数乘以解决一个子问题需要的时间</strong>。</p>
<p>子问题个数即途中节点总数，因为该算法中不存在冗余计算，子问题就是 <code>f(1)</code>,<code>f(2)</code>, <code>f(3)</code>…<code>f(n)</code>，所以子问题个数为 O(n)。</p>
<p>解决一个子问题时间同上，没有什么循环，时间为 O(1)。</p>
<p>所以算法的时间复杂度是 O(n)。比起暴力算法，是降维打击。</p>
<p>至此，带备忘录的递归解法的效率已经和迭代的动态规划解法一样了。只不过这种方法叫做 “<strong>自顶向下</strong>”，动态规划叫做“<strong>自底向上</strong>”。</p>
<ul>
<li>自顶向下：从上向下延申，从一个规模较大的原问题，比如<code>f(20)</code> ,向下逐渐分解规模，直到 <code>f(1)</code> 和 <code>f(2)</code> 这两个 base case，然后逐层返回答案，这就叫“自顶向下”</li>
<li>自底向上：从最底下，问题规模最小的 <code>f(1)</code> 和 <code>f(2)</code> 开始往上推，直到推到我们想要的答案 <code>f(20)</code>，这就是动态规划的思路，这也是为什么动态规划都脱离了递归，而是由循环迭代完成</li>
</ul>
<h4 id="3-dp-数组的迭代解法"><a href="#3-dp-数组的迭代解法" class="headerlink" title="3.  dp 数组的迭代解法"></a>3.  dp 数组的迭代解法</h4><p>有了上一步 备忘录 的启发，我们可以将这个 备忘录 独立出来成为一张表，就叫做 DP table，在这张表上完成 “自底向上” 的推断。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fib</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (N &lt; <span class="number">1</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (N == <span class="number">1</span> || N == <span class="number">2</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span>[] dp = <span class="keyword">new</span> <span class="keyword">int</span>[N+<span class="number">1</span>];</span><br><span class="line">    Arrays.fill(dp, <span class="number">0</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// base case</span></span><br><span class="line">    dp[<span class="number">1</span>] = dp [<span class="number">2</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">3</span>; i &lt;= N; i++) &#123;</span><br><span class="line">        dp[i] = dp[i-<span class="number">1</span>] + dp[i-<span class="number">2</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[N];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里引出<strong>状态转移方程</strong>，实际上就是描述问题形式的数学形式：</p>
<p><img src="https://labuladong.github.io/algo/images/%e5%8a%a8%e6%80%81%e8%a7%84%e5%88%92%e8%af%a6%e8%a7%a3%e8%bf%9b%e9%98%b6/fib.png" alt="状态转移方程"></p>
<p>将 <code>f(n)</code> 当作一个状态 n ，这个状态 n 是由状态 n-1 和状态 n-2 相加转移而来，这就叫状态转移。</p>
<p>上面的几种解法中的所有操作，例如 <code>return f(n-1)+f(n-2)</code> ，<code>dp[i] = dp[i-1] + dp[i-2]</code>，以及对备忘录或 DP table 的初始化操作，都是围绕这个方程式的不同表现形式。可见列出<strong>状态转移方程的重要性，他是解决问题的核心</strong>。而且很容易发现，其实状态转移方程直接代表着暴力解法。</p>
<p><strong>千万不要看不起暴力解，动态规划问题最困难的就是写出这个暴力解，也就是状态转移方程</strong>。只有写出暴力解，优化方法无非是用备忘录或者 DP table。</p>
<p>这个例子的最后，一个细节优化。根据斐波那契数列的状态转移方程，当前状态只和前两个状态有关，其实并不需要那么长的一个 DP table 来存储所有的状态，只要想办法存储之前的两个状态即可。所以可以进一步优化，将空间复杂度降为 <code>O(1)</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fib</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (N &lt; <span class="number">1</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (N==<span class="number">1</span> || N==<span class="number">2</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> prev = <span class="number">1</span>, curr = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">3</span>; i&lt; =N; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> sum = prev + curr;</span><br><span class="line">        prev = curr;</span><br><span class="line">        curr = sum;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> curr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这个技巧就是所谓的<strong>状态压缩</strong>。如果我们每次状态转移只需要 DP table 中的一部分，那么可以尝试用状态压缩来缩小 DP table 的大小，只记录必要的数据，上述例子就相当于将 DP table 的大小从 n 缩小到 2.</p>
<h3 id="二、凑零钱问题"><a href="#二、凑零钱问题" class="headerlink" title="二、凑零钱问题"></a>二、凑零钱问题</h3><p>题目：给 k 种面值的硬币，面值分别为 <code>c1, c2,...ck</code>，每种硬币的数量无限，再给一个总金额 <code>amount</code>，问最少需要几枚硬币凑出这个金额，如果不可能凑出，算法返回 -1.算法的函数签名如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// coins 中是可选硬币面值，amount 是目标金额</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">coinChange</span><span class="params">(<span class="keyword">int</span>[] coins, <span class="keyword">int</span> amount)</span></span>;</span><br></pre></td></tr></table></figure>

<p>比如 <code>k=3</code> ，面值分别是 1，2，5 ，总金额 <code>amount=11</code>。那么最少需要 3 枚硬币凑出，即 11=5+5+1.</p>
<p>计算机应该如下解决这个问题。就是将所有可能的凑硬币方法都穷举出来，然后找最少需要多少硬币。</p>
<h4 id="1-暴力递归-1"><a href="#1-暴力递归-1" class="headerlink" title="1. 暴力递归"></a>1. 暴力递归</h4><p>首先，这个问题是动态规划问题，因为它具有“最优子结构”。<strong>要符合最优子结构，子问题间必须相互独立</strong>。</p>
<p>如何列出正确的状态转移方程</p>
<ol>
<li><strong>确定 base case</strong>，显然目标金额 <code>amount</code> 为 0 时算法返回 0，因为不需要任何硬币就已经凑出目标金额了。</li>
<li><strong>确定 “状态”，也就是原问题和子问题中会变化的变量</strong>。由于硬币数量无限，硬币的面额也是题目给定的，只有目标金额会不断地向 base case 靠近，所以唯一的 “状态” 就是目标金额 <code>amount</code>。</li>
<li><strong>确定“选择”，也就是导致“状态”产生变化的行为</strong>。目标金额为什么变化呢，因为每选一枚硬币就相当于减少了目标金额。所以说所有硬币的面值，就是“选择”。</li>
<li><strong>明确 dp 函数/数组的定义</strong>。这里讲的时自顶向下的解法，所以会有一个递归的 dp 函数，一般来说函数的参数就是状态转移中会变化的量，也就是“状态”；函数的返回值就是题目要求我们计算的量。就本题来说，状态只有一个，即“目标金额”，题目要求计算出凑出目标金额所需的最少硬币数量。所以我们可以这样定义 dp 函数：</li>
</ol>
<p>dp(n) 的定义：输入一个目标金额 n ，返回凑出目标金额 n 的最少硬币数量。</p>
<p>解法的伪代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 伪代码框架</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">coinChange</span><span class="params">(coins: List[int], amount: int)</span>:</span></span><br><span class="line">    <span class="comment"># 定义：要凑出金额 n，至少要 dp(n) 个硬币</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">dp</span><span class="params">(n)</span>:</span></span><br><span class="line">        <span class="comment"># 做选择，选择需要硬币最少的那个结果</span></span><br><span class="line">        <span class="keyword">for</span> coin <span class="keyword">in</span> coins:</span><br><span class="line">            res = min(res, <span class="number">1</span> + dp(n - coin))</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">    <span class="comment"># 题目要求的最终结果是 dp(amount)</span></span><br><span class="line">    <span class="keyword">return</span> dp(amount)</span><br></pre></td></tr></table></figure>

<p>根据伪码，加上 base case 即可得到最终的答案。显然，目标金额为 0 时，所需硬币数量为 0；当目标金额小于 0 时，无解，返回 -1；</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">coinChange</span><span class="params">(coins: List[int], amount: int)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">dp</span><span class="params">(n)</span>:</span></span><br><span class="line">        <span class="comment"># base case</span></span><br><span class="line">        <span class="keyword">if</span> n == <span class="number">0</span>: <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> n &lt; <span class="number">0</span>: <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        <span class="comment"># 求最小值，所以初始化为正无穷</span></span><br><span class="line">        res = float(<span class="string">'INF'</span>)</span><br><span class="line">        <span class="keyword">for</span> coin <span class="keyword">in</span> coins:</span><br><span class="line">            subproblem = dp(n - coin)</span><br><span class="line">            <span class="comment"># 子问题无解，跳过</span></span><br><span class="line">            <span class="keyword">if</span> subproblem == <span class="number">-1</span>: <span class="keyword">continue</span></span><br><span class="line">            res = min(res, <span class="number">1</span> + subproblem)</span><br><span class="line">        <span class="keyword">return</span> res <span class="keyword">if</span> res != float(<span class="string">'INF'</span>) <span class="keyword">else</span> <span class="number">-1</span></span><br><span class="line">    <span class="keyword">return</span> dp(amount)</span><br></pre></td></tr></table></figure>

<p>至此，状态转移方程已经完成。</p>
<p><img src="https://labuladong.github.io/algo/images/%e5%8a%a8%e6%80%81%e8%a7%84%e5%88%92%e8%af%a6%e8%a7%a3%e8%bf%9b%e9%98%b6/coin.png" alt="状态转移方程"></p>
<p>以上算法已经是暴力解法。所以需要消除一下重叠子问题，比如 <code>amount = 11, coins = {1, 2, 5}</code>时的递归树：</p>
<p><img src="https://labuladong.github.io/algo/images/%e5%8a%a8%e6%80%81%e8%a7%84%e5%88%92%e8%af%a6%e8%a7%a3%e8%bf%9b%e9%98%b6/5.jpg" alt></p>
<p><strong>递归算法的时间复杂度分析：子问题总数 * 每个子问题的时间</strong></p>
<p>子问题总数为递归树节点个数，这个比较难看出来，是 O(n^k)，总之是指数级别的。每个子问题中含有一个 for 循环，复杂度是 O(k)。所以总时间复杂度为 <code>O(k*n^k)</code>，指数级别</p>
<h4 id="2-带备忘录的递归"><a href="#2-带备忘录的递归" class="headerlink" title="2. 带备忘录的递归"></a>2. 带备忘录的递归</h4><p>类似之前斐波那契数列的例子，只需要稍加修改，就可以通过备忘录消除子问题：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">coinChange</span><span class="params">(coins: List[int], amount: int)</span>:</span></span><br><span class="line">    <span class="comment"># 备忘录</span></span><br><span class="line">    memo = dict()</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">dp</span><span class="params">(n)</span>:</span></span><br><span class="line">        <span class="comment"># 查备忘录，避免重复计算</span></span><br><span class="line">        <span class="keyword">if</span> n <span class="keyword">in</span> memo:</span><br><span class="line">            <span class="keyword">return</span> memo[n]</span><br><span class="line">        <span class="comment"># base case</span></span><br><span class="line">        <span class="keyword">if</span> n == <span class="number">0</span>: <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> n &lt; <span class="number">0</span>: <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        res = float(<span class="string">'INF'</span>)</span><br><span class="line">        <span class="keyword">for</span> coin <span class="keyword">in</span> coins:</span><br><span class="line">            subproblem = dp(amount - coin)</span><br><span class="line">            <span class="keyword">if</span> (subproblem == <span class="number">-1</span>) <span class="keyword">continue</span></span><br><span class="line">            res = min(res, <span class="number">1</span> + subproblem)</span><br><span class="line">            </span><br><span class="line">        <span class="comment"># 记入备忘录</span></span><br><span class="line">        memo[n] = res <span class="keyword">if</span> res != float(<span class="string">'INF'</span>) <span class="keyword">else</span> <span class="number">-1</span></span><br><span class="line">        <span class="keyword">return</span> memo[n]</span><br><span class="line">    <span class="keyword">return</span> dp(amount)</span><br></pre></td></tr></table></figure>

<p>很显然，备忘录大大减小了子问题数目，完全消除了子问题的冗余，所以子问题总数不会超过金额数 n，即子问题数目为 <code>O(n)</code>。处理一个子问题的时间不变，仍是<code>O(k)</code>，所以总的时间复杂度是 <code>O(kn)</code>。</p>
<h4 id="3-dp-数组的迭代解法-1"><a href="#3-dp-数组的迭代解法-1" class="headerlink" title="3. dp 数组的迭代解法"></a>3. dp 数组的迭代解法</h4><p>当然，也可以自底向上使用 dp table 来消除重叠子问题，关于状态、选择和 base case 与之前没有区别，dp 数组定义与 dp 函数类似，将目标金额作为变量。不过 dp 函数体现在函数参数，而 dp 数组体现在数组索引：</p>
<p><strong>dp 数组定义：当目标金额为 i 时，至少需要 dp[i] 枚硬币凑出</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">coinChange</span><span class="params">(<span class="keyword">int</span>[] coins, <span class="keyword">int</span> amount)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 数组大小为 amount + 1, 初始值也为 amount + 1</span></span><br><span class="line">    <span class="keyword">int</span>[amount+<span class="number">1</span>] dp;</span><br><span class="line">    Arrays.fill(dp, amount+<span class="number">1</span>);</span><br><span class="line">    <span class="comment">// base case</span></span><br><span class="line">    dp[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// 外层 for 循环在遍历所有状态的所有取值</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;dp.length; i++) &#123;</span><br><span class="line">        <span class="comment">// 内层 for 循环在求所有选择的最小值</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> coin : coins) &#123;</span><br><span class="line">            <span class="comment">// 子问题无解，跳过</span></span><br><span class="line">            <span class="keyword">if</span> (i - coin &lt; <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">            dp[i] = min(dp[i], <span class="number">1</span>+dp[i-coin]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (dp[amount] == amount+<span class="number">1</span>) ? -<span class="number">1</span> : dp[amount];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>PS: dp 数组初始化为 <code>amount + 1</code> ，因为凑成 amount 金额的硬币数最多只可能等于 amount (全部使用 1 元面值硬币)，所以初始化为 <code>amount + 1</code> 就相当于初始化为正无穷，便于后续取最小值。</p>
<h3 id="三、最后总结"><a href="#三、最后总结" class="headerlink" title="三、最后总结"></a>三、最后总结</h3><p>第一个斐波那契数列的问题，解释了如何通过 “备忘录” 或者 “db table” 的方法来优化递归树，并且明确了这两种方法本质是一样的，只是自顶向下和自底向上的不同。</p>
<p>第二个凑零钱的问题，展示了如何流程化确定“状态转移方程”，只要通过状态转移方程写出暴力递归解，剩下的就是优化递归树，消除重叠子问题。</p>
<p><strong>计算机解决问题没有什么奇技淫巧，它唯一的解决办法就是穷举</strong>，穷举所有可能性。算法设计无非就是先思考“如何穷举”，然后再追求“如何聪明的穷举”。</p>
<p>列出动态转移方程，就是在解决“如何穷举”的问题。之所以说它难，一是因为很多穷举需要递归实现，二是因为有的问题本身的解空间复杂，不那么容易举完整。</p>
<p>备忘录、dp table 就是在追求“如何聪明的穷举”。用空间换时间的思路，是降低时间复杂度的不二法门。</p>
<h3 id="四、题目"><a href="#四、题目" class="headerlink" title="四、题目"></a>四、题目</h3><h4 id="1-完全平方数"><a href="#1-完全平方数" class="headerlink" title="1. 完全平方数"></a>1. 完全平方数</h4><p>给定一个正整数 n，找到若干个完全平方数，使得他们的和等于 n。需要让组成和的完全平方数的个数最少。</p>
<p>给一个整数 n ，返回和为 n 的完全平方数的<strong>最少数量</strong>。</p>
<p><strong>思路</strong>：这是一个求最值的问题，首先应该想到的是动态规划。类似于凑零钱问题，求凑成所需零钱的最小组合。但是唯一的区别在于，零钱的面值是固定的，而这里的平方数是不固定的。</p>
<ul>
<li>首先初始化一个长为 <code>n+1</code> 的数组 <code>dp</code>，初始化为 0</li>
<li>如果 n 为 0，则结果为 0</li>
<li>对数组进行遍历，下标为 i ，每次都将当前数字先更新为最大的结果，即 <code>dp[i] = i</code>， 比如 <code>i=4</code>，最坏的结果为 <code>4=1+1+1+1</code> 即为 4 个数字。</li>
<li>动态转移方程为：<code>dp[i] = MIN(dp[i], dp[i-j*j]+1)</code> ，i 表示当前数字， <code>j*j</code> 表示平方数。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> numSquares = <span class="function"><span class="keyword">function</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> dp = <span class="keyword">new</span> <span class="built_in">Array</span>(n+<span class="number">1</span>).fill(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">        dp[i] = i; <span class="comment">// 最坏的情况就是每次 +1</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j=<span class="number">1</span>; i-j*j &gt;= <span class="number">0</span>; j++) &#123;</span><br><span class="line">            dp[i] = <span class="built_in">Math</span>.min(dp[i], dp[i-j*j]+<span class="number">1</span>); <span class="comment">// 动态转移方程</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[n];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-打家劫舍"><a href="#2-打家劫舍" class="headerlink" title="2. 打家劫舍"></a>2. 打家劫舍</h4><p>你是一个专业的小偷，计划偷窃沿街的房屋。每间房内都藏有一定的现金，影响你偷窃的唯一制约因素就是相邻的房屋装有相互连通的防盗系统，如果两间相邻的房屋在同一晚上被小偷闯入，系统会自动报警。</p>
<p>给定一个代表每个房屋存放金额的非负整数数组，计算你 不触动警报装置的情况下 ，一夜之内能够偷窃到的最高金额。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> rob = <span class="function"><span class="keyword">function</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> dp = [];</span><br><span class="line">    dp[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    dp[<span class="number">1</span>] = nums[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">1</span>; i&lt;nums.length; i++) &#123;</span><br><span class="line">        dp[i+<span class="number">1</span>] = <span class="built_in">Math</span>.max(dp[i], dp[i<span class="number">-1</span>]+nums[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> dp[nums.length];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="3-三角形最小路径和"><a href="#3-三角形最小路径和" class="headerlink" title="3. 三角形最小路径和"></a>3. 三角形最小路径和</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> minimumTotal = <span class="function"><span class="params">triangle</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> bottom = triangle[triangle.length<span class="number">-1</span>];</span><br><span class="line">    <span class="keyword">const</span> dp = <span class="keyword">new</span> <span class="built_in">Array</span>(bottom.length);</span><br><span class="line">    <span class="comment">// 为最下面一行进行初始化</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;bottom.length; i++) &#123;</span><br><span class="line">        dp[i] = bottom[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i= triangle.length<span class="number">-2</span>; i&gt;=<span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j=<span class="number">0</span>; j&lt;triangle[i].length; j++) &#123;</span><br><span class="line">            dp[j] = <span class="built_in">Math</span>.min(dp[j], dp[j+<span class="number">1</span>]) + triangle[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> minimumTotal = <span class="function"><span class="keyword">function</span>(<span class="params">triangle</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> dp = triangle[triangle.length<span class="number">-1</span>].slice();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i=triangle.length<span class="number">-2</span>; i&gt;=<span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j=<span class="number">0</span>; j&lt;triangle[i].length; j++) &#123;</span><br><span class="line">            dp[j] = <span class="built_in">Math</span>.min(dp[j], dp[j+<span class="number">1</span>]) + triangle[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[<span class="number">0</span>];</span><br><span class="line">    </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="4-两个字符串的最长公共子串"><a href="#4-两个字符串的最长公共子串" class="headerlink" title="4. 两个字符串的最长公共子串"></a>4. 两个字符串的最长公共子串</h4><p>思路：</p>
<p>暴力解：使用 for 循环 + <code>indexOf</code> 截取一个字符串不同长度的字符，判断是否在另一个字符串中出现</p>
<p>动态规划：</p>
<ul>
<li>将两个字符串分别以行和列组成一个二维矩阵</li>
<li>比较二维矩阵中每个点对应行列字符是否相等，相等的话设置为 1，否则置为 0.</li>
<li>通过查找出值为 1 的最长对角线就可以得到二维矩阵</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getMaxSubString = <span class="function">(<span class="params">s1, s2</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> m = s1.length;</span><br><span class="line">    <span class="keyword">const</span> n = s2.length;</span><br><span class="line">    <span class="keyword">let</span> max = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> dp = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;m; i++) &#123;</span><br><span class="line">        dp.push(<span class="keyword">new</span> <span class="built_in">Array</span>(n).fill(<span class="number">0</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;m; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j=<span class="number">0</span>; j&lt;n; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s1[i] === s2[j]) &#123;</span><br><span class="line">                <span class="keyword">if</span> (i===<span class="number">0</span> || j===<span class="number">0</span>) &#123;</span><br><span class="line">                    dp[i][j] = <span class="number">1</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    dp[i][j] = dp[i<span class="number">-1</span>][j<span class="number">-1</span>] + <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                max = <span class="built_in">Math</span>.max(dp[i][j], max);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                dp[i][j] = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-矩阵的最小路径和"><a href="#5-矩阵的最小路径和" class="headerlink" title="5. 矩阵的最小路径和"></a>5. 矩阵的最小路径和</h4><p>给定一个 n * m 的矩阵 a，从左上角开始每次只能向右或者向下走，最后到达右下角的位置，路径上所有的数字累加起来就是路径和，输出所有的路径中最小的路径和。</p>
<p>暴力 dfs 遍历法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">minPathSum</span>(<span class="params"> matrix </span>) </span>&#123;</span><br><span class="line">    <span class="comment">// write code here</span></span><br><span class="line">    <span class="keyword">const</span> n = matrix.length;</span><br><span class="line">    <span class="keyword">const</span> m = matrix[<span class="number">0</span>].length;</span><br><span class="line">    <span class="keyword">let</span> min = <span class="built_in">Number</span>.MAX_SAFE_INTEGER;</span><br><span class="line">    <span class="keyword">const</span> backtrack = <span class="function">(<span class="params">i, j, sum</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (i === n<span class="number">-1</span> &amp;&amp; j === m<span class="number">-1</span>) &#123;</span><br><span class="line">            min = <span class="built_in">Math</span>.min(min, sum);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (i+<span class="number">1</span>&lt;n) &#123;</span><br><span class="line">            backtrack(i+<span class="number">1</span>, j, sum+matrix[i+<span class="number">1</span>][j])</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (j+<span class="number">1</span>&lt;m) &#123;</span><br><span class="line">            backtrack(i, j+<span class="number">1</span>, sum+matrix[i][j+<span class="number">1</span>])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    backtrack(<span class="number">0</span>, <span class="number">0</span>, matrix[<span class="number">0</span>][<span class="number">0</span>]);</span><br><span class="line">    <span class="keyword">return</span> min;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>动态规划解法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">minPathSum</span>(<span class="params"> matrix </span>) </span>&#123;</span><br><span class="line">    <span class="comment">// write code here</span></span><br><span class="line">    <span class="keyword">const</span> n = matrix.length;</span><br><span class="line">    <span class="keyword">const</span> m = matrix[<span class="number">0</span>].length;</span><br><span class="line">    <span class="keyword">const</span> dp = [];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;n; i++) &#123;</span><br><span class="line">        dp.push(<span class="keyword">new</span> <span class="built_in">Array</span>(m).fill(<span class="number">0</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>] = matrix[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j=<span class="number">0</span>; j&lt;m; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i !== <span class="number">0</span> &amp;&amp; j !== <span class="number">0</span>) &#123;</span><br><span class="line">                dp[i][j] = <span class="built_in">Math</span>.min(dp[i<span class="number">-1</span>][j], dp[i][j<span class="number">-1</span>]) + matrix[i][j];</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (i!==<span class="number">0</span>) &#123;</span><br><span class="line">                dp[i][j] = dp[i<span class="number">-1</span>][j] + matrix[i][j];</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (j!==<span class="number">0</span>) &#123;</span><br><span class="line">                dp[i][j] = dp[i][j<span class="number">-1</span>] + matrix[i][j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[n<span class="number">-1</span>][m<span class="number">-1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="KMP-算法"><a href="#KMP-算法" class="headerlink" title="KMP 算法"></a>KMP 算法</h4><p>给你一个文本串S，一个非空模板串T，问S在T中出现了多少次</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">kmp</span> <span class="params">(String S, String T)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> m=S.length(),n=T.length();</span><br><span class="line">        <span class="comment">//特殊情况判断</span></span><br><span class="line">        <span class="keyword">if</span>(m&gt;n||n==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//出现次数</span></span><br><span class="line">        <span class="keyword">int</span> cnt=<span class="number">0</span>;</span><br><span class="line">        <span class="comment">//分别遍历主串和模式串</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>,j=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">            <span class="comment">//只要不相等，模式串回退到0位置</span></span><br><span class="line">            <span class="keyword">while</span>(j&gt;<span class="number">0</span>&amp;&amp;T.charAt(i)!=S.charAt(j))&#123;</span><br><span class="line">                j=<span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(T.charAt(i)==S.charAt(j)) j++;</span><br><span class="line">            <span class="comment">//如果j等于m，说明所有字符都匹配上了</span></span><br><span class="line">            <span class="keyword">if</span>(j==m)&#123;</span><br><span class="line">                <span class="comment">//次数加一，同时i回退到上次匹配开头的下一位，j回到0</span></span><br><span class="line">                cnt++;</span><br><span class="line">                i=i-j+<span class="number">2</span>;</span><br><span class="line">                j=<span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cnt;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">kmp</span>(<span class="params">S, T</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> m = S.length, n = T.length;</span><br><span class="line">    <span class="keyword">if</span> (m&gt;n || n===<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">0</span>, j=<span class="number">0</span>; i&lt;n; i++) &#123;</span><br><span class="line">        <span class="comment">// 只要不相等，模式串回退到 0 位置</span></span><br><span class="line">        <span class="keyword">while</span>(j&gt;<span class="number">0</span> &amp;&amp; T[i] !== S[j]) &#123;</span><br><span class="line">            j=<span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (T[i] === S[j]) j++;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(j===m) &#123;</span><br><span class="line">            count++;</span><br><span class="line">            i = i-j+<span class="number">2</span>;</span><br><span class="line">            j=<span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/6/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/first.jpg" alt="朱程程">
            
              <p class="site-author-name" itemprop="name">朱程程</p>
              <p class="site-description motion-element" itemprop="description">人生当苦无妨，良人当归即好</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">68</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/devil-chengcheng" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-globe"></i>GitHub</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">朱程程</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
