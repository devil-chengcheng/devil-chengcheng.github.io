<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">





  <link rel="alternate" href="/atom.xml" title="小二、上酒" type="application/atom+xml">






<meta name="description" content="人生当苦无妨，良人当归即好">
<meta property="og:type" content="website">
<meta property="og:title" content="小二、上酒">
<meta property="og:url" content="http://yoursite.com/page/5/index.html">
<meta property="og:site_name" content="小二、上酒">
<meta property="og:description" content="人生当苦无妨，良人当归即好">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="小二、上酒">
<meta name="twitter:description" content="人生当苦无妨，良人当归即好">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"always","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/5/">





  <title>小二、上酒</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">小二、上酒</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/04/05/vue/vue中axios的request拦截器/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="朱程程">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/first.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小二、上酒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/04/05/vue/vue中axios的request拦截器/" itemprop="url">vue中axios的request拦截器</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-04-05T17:38:14+08:00">
                2022-04-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/vue/" itemprop="url" rel="index">
                    <span itemprop="name">vue</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="vue中axios的request拦截器"><a href="#vue中axios的request拦截器" class="headerlink" title="vue中axios的request拦截器"></a>vue中axios的request拦截器</h1><p>axios中可以设置拦截器，可以在正式发送请求之前做一些事<br>拦截器分为请求拦截器和响应拦截器</p>
<h2 id="创建一个axios实例"><a href="#创建一个axios实例" class="headerlink" title="创建一个axios实例"></a>创建一个axios实例</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const fetchInstance = axios.create(&#123;</span><br><span class="line">  baseURL: process.env.VUE_APP_BASE_API,</span><br><span class="line">  timeout: 6000</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="请求拦截器"><a href="#请求拦截器" class="headerlink" title="请求拦截器"></a>请求拦截器</h2><p>首先，看一下请求拦截器的写法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// request拦截器</span><br><span class="line">fetchInstance.interceptors.request.use(config =&gt; &#123;</span><br><span class="line">  if (store.getters.token) &#123;</span><br><span class="line">    config.headers[&apos;Dashboard-Token&apos;] = Cookies.get(&apos;Dashboard-Token&apos;)</span><br><span class="line">  &#125;</span><br><span class="line">  return config</span><br><span class="line">&#125;, error =&gt; &#123;</span><br><span class="line">  // 发生异常时处理代码</span><br><span class="line">  console.log(error)</span><br><span class="line">  Promise.reject(error)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>很常见的在请求时将token放在请求头<br>我们在前后端交互时经常会使用到token。<br>首次请求后台把token返回前端，前端把这个token可以保存到到localstorage里，然后每次请求后端都需要带上这个token进行权限验证。<br>而如果每次请求都在路径后面加上token太麻烦了，这时候就可以用拦截器来使token自动添加到请求头</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/04/05/vue/vue一些常用选项/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="朱程程">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/first.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小二、上酒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/04/05/vue/vue一些常用选项/" itemprop="url">vue一些常用选项</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-04-05T17:38:14+08:00">
                2022-04-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/vue/" itemprop="url" rel="index">
                    <span itemprop="name">vue</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1、computed"><a href="#1、computed" class="headerlink" title="1、computed"></a>1、computed</h3><p>计算属性：主要是对原数据进行改造输出。改造输出：包括格式化数据（价格、日期），大小写转换，排序，添加符号</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">    newPrice () &#123;</span><br><span class="line">        return &apos;￥&apos; + this.price + &apos;元&apos;；</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2、methods"><a href="#2、methods" class="headerlink" title="2、methods"></a>2、methods</h3><p>方法属性：用于绑定html中事件对应的方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">methods:&#123;</span><br><span class="line">    add (num) &#123;</span><br><span class="line">        this.count += num;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3、watch"><a href="#3、watch" class="headerlink" title="3、watch"></a>3、watch</h3><p>数据变化监听器：主要用于检测data中的数据变化，使v-model生效</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">watch: &#123;</span><br><span class="line">    question(val, oldVal) &#123;</span><br><span class="line">        console.log(&apos;new: %s, old: %s&apos;, val, oldVal);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4、filters"><a href="#4、filters" class="headerlink" title="4、filters"></a>4、filters</h3><p>过滤器：通常格式化字符，使用传值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">filters: &#123;</span><br><span class="line">    filterA(value) &#123;</span><br><span class="line">        return value.toUpperCase();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5、mixins"><a href="#5、mixins" class="headerlink" title="5、mixins"></a>5、mixins</h3><p>混入：用于减少代码污染、减少代码量、实现代码重用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// 额外临时加入时，用于显示日志</span><br><span class="line">var addLog = &#123;</span><br><span class="line">    updated: function() &#123;</span><br><span class="line">        console.log(&quot;数据放生变化,变化成&quot;+this.count+&quot;.&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 实例化vue</span><br><span class="line">var app = new Vue(&#123;</span><br><span class="line">    // 挂载实例</span><br><span class="line">    el: &apos;#app&apos;,</span><br><span class="line">    // 页面数据初始化，字符，对象、数组</span><br><span class="line">    data:&#123;</span><br><span class="line">        count: 100</span><br><span class="line">    &#125;,</span><br><span class="line">    // 混入</span><br><span class="line">    mixins: [addLog]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="6、extends"><a href="#6、extends" class="headerlink" title="6、extends"></a>6、extends</h3><p>扩展：对构造器进行扩展</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// 扩展</span><br><span class="line">var extendObj =&#123;</span><br><span class="line">    created: function()&#123;</span><br><span class="line">        console.log(&quot;我是被扩展出来的&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 实例化vue</span><br><span class="line">var app = new Vue(&#123;</span><br><span class="line">    // 挂载实例</span><br><span class="line">    el:&apos;#app&apos;,</span><br><span class="line">    // 页面数据初始化，字符，对象、数组</span><br><span class="line">    data:&#123;</span><br><span class="line">    &#125;,</span><br><span class="line">    // 扩展</span><br><span class="line">    extends: extendObj</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/04/05/vue/vuex/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="朱程程">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/first.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小二、上酒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/04/05/vue/vuex/" itemprop="url">vuex笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-04-05T17:38:14+08:00">
                2022-04-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/vue/" itemprop="url" rel="index">
                    <span itemprop="name">vue</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="https://vuex.vuejs.org/zh/" target="_blank" rel="noopener">vuex官方文档</a></p>
<h2 id="背景引言"><a href="#背景引言" class="headerlink" title="背景引言"></a>背景引言</h2><h3 id="1、vuex是什么"><a href="#1、vuex是什么" class="headerlink" title="1、vuex是什么"></a>1、vuex是什么</h3><p>vuex是一个专门为Vuejs应用程序开发的==状态管理模式==。它采用集中式存储应用的所有组件状态，并以相应规则保证状态以一种可预测的方式发生变化。chrome安装调试工具 devtools extension</p>
<h3 id="2、单向数据流"><a href="#2、单向数据流" class="headerlink" title="2、单向数据流"></a>2、单向数据流</h3><p><img src="https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3245814561,4149362989&fm=26&gp=0.jpg" alt="image"><br>状态自管理应用应包括以下部分;</p>
<ul>
<li>State：驱动应用的数据源（单向数据流）</li>
<li>View：以声明的方式将state映射到视图（静态显示出来的数据源）</li>
<li>Actions：处理用户在view上面操作而导致的状态变化（数据源变化追踪）</li>
</ul>
<p>一个简单的计数案例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;!-- view --&gt;</span><br><span class="line">        &lt;div&gt;&#123;&#123; count &#125;&#125;&lt;/div&gt;</span><br><span class="line">        &lt;button @click=&quot;increment&quot;&gt;increment&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    // state</span><br><span class="line">    data () &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            count: 0</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    // actions</span><br><span class="line">    methods: &#123;</span><br><span class="line">        increment () &#123;</span><br><span class="line">            this.count++</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h3 id="3、vuex解决的问题"><a href="#3、vuex解决的问题" class="headerlink" title="3、vuex解决的问题"></a>3、vuex解决的问题</h3><ul>
<li>多个视图组件，包括父子组件、兄弟组件之间的状态共享</li>
<li>不同视图组件的行为需要变更同一个状态</li>
</ul>
<h3 id="4、vuex使用场景"><a href="#4、vuex使用场景" class="headerlink" title="4、vuex使用场景"></a>4、vuex使用场景</h3><p>中大型单页面应用，需要考虑如何更好的在组件外部管理状态，简单应用不建议使用</p>
<h3 id="5、vuex与全局变量的区别"><a href="#5、vuex与全局变量的区别" class="headerlink" title="5、vuex与全局变量的区别"></a>5、vuex与全局变量的区别</h3><ul>
<li>响应式：vuex的状态存储是响应式的，当Vue组件从store中读取状态的时候，若store的状态发生变化，那么相应的组件也会得到高效更新。</li>
<li>不能直接改变store：不能直接改变store的变化，改变store中状态的唯一途径是commit mutation，方便与追踪每一个状态的变化。</li>
</ul>
<h3 id="6、vuex核心流程"><a href="#6、vuex核心流程" class="headerlink" title="6、vuex核心流程"></a>6、vuex核心流程</h3><p><img src="https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=4137621942,3154892314&fm=26&gp=0.jpg" alt="image"><br>示意图说明：  </p>
<ol>
<li>Vue Components：vue组件。HTML页面上，负责接收用户操作等行为，执行dispatch方法触发对应action进行回应</li>
<li>Dispatch：操作行为触发方法，是唯一能执行action的方法</li>
<li>Actions：操作行为处理模块。负责处理Vue Components接收到的所有交互行为。包含同步/一步操作，支持多个同名方法，按照注册的顺序依次触发。向后台API请求的操作就在这个模块中进行，包括触发其他action以及提交mutation的操作。该模块提供了Promise的封装，以支持action的链式触发</li>
<li>Commit：状态改变提交操作方法。对mutation进行提交，是唯一能执行mutation的方法。</li>
<li>Mutations：状态改变操作方法。是Vuex修改state的唯一推荐方法，其他修改方式在严格模式下将会报错。该方法只能进行同步操作，且方法名只能全局唯一。操作之中会有一些hook暴露出来，以进行state的监控等</li>
<li>State：页面状态管理容器对象。集中存储Vue components中data对象的零散数据，全局唯一，以进行统一的状态管理。页面显示所需的数据从该对象中进行读取，利用Vue的细粒度数据响应机制来进行高效的状态更新</li>
<li>Getters：state对象读取方法。图中没有单独列出该模块，应该被包含在了render中，Vue Components通过该方法读取全局state对象</li>
</ol>
<p>总结说明：<br>Vue组件接收交互行为，调用dispatch方法触发action相关处理，若页面状态需要改变，则调用commit方法提交mutation修改state，通过getter获取到state新值，重新渲染Vue Component，界面随之更新。</p>
<h2 id="入门示例"><a href="#入门示例" class="headerlink" title="入门示例"></a>入门示例</h2><h3 id="1、安装"><a href="#1、安装" class="headerlink" title="1、安装"></a>1、安装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vuex --save</span><br></pre></td></tr></table></figure>

<h3 id="2、简单示例"><a href="#2、简单示例" class="headerlink" title="2、简单示例"></a>2、简单示例</h3><p>（1）src/vuex/store.js中写入以下代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &apos;vue&apos;</span><br><span class="line">import Vuex from &apos;vuex&apos;</span><br><span class="line"></span><br><span class="line">// 使用vuex</span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line">// 1、state: 创建初始化状态</span><br><span class="line">const state = &#123;</span><br><span class="line">    // 放置初始化状态</span><br><span class="line">    count: 1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 2、mutation：创建改变状态的方法</span><br><span class="line">const mutations = &#123;</span><br><span class="line">    // 状态变更函数一般大写</span><br><span class="line">    ADD (state, n) &#123;</span><br><span class="line">        state.count += n</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 3、getters：提供外部获取state</span><br><span class="line">const getters = &#123;</span><br><span class="line">    count: function(state) &#123;</span><br><span class="line">        return state.count</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 4、actions：创建驱动方法改变mutations</span><br><span class="line">const actions = &#123;</span><br><span class="line">    // 触发mutations中相应的方法，一般小写</span><br><span class="line">    add (&#123;commit&#125;, data) &#123;</span><br><span class="line">        cmmit(&apos;ADD&apos;, data)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 5、全部注入Store中</span><br><span class="line">const store = new Vuex.Store(&#123;</span><br><span class="line">    state,</span><br><span class="line">    mutations,</span><br><span class="line">    getters,</span><br><span class="line">    actions</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 6、输出store</span><br><span class="line">export default store;</span><br></pre></td></tr></table></figure>

<p>代码说明：  </p>
<ul>
<li>state-mutations-getters-actions-store，以上写法基本固定</li>
<li>小型项目用上面的简单管理状态即可</li>
</ul>
<p>（2）src/main.js代码中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &apos;vue&apos;</span><br><span class="line">import App from &apos;./App&apos;</span><br><span class="line">import router from &apos;./router&apos;</span><br><span class="line">// 引入store</span><br><span class="line">import store from &apos;./vuex/store&apos;</span><br><span class="line"></span><br><span class="line">Vue.config.productionTip = false</span><br><span class="line"></span><br><span class="line">new Vue(&#123;</span><br><span class="line">  el: &apos;#app&apos;,</span><br><span class="line">  router,</span><br><span class="line">  store, // 全局注入</span><br><span class="line">  components: &#123; App &#125;,</span><br><span class="line">  template: &apos;&lt;App/&gt;&apos;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>（3）src/compontent/Count.vue页面组件中代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;hello&quot;&gt;</span><br><span class="line">        &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;/h1&gt;</span><br><span class="line">        &lt;h2&gt;&#123;&#123;count&#125;&#125;&lt;/h2&gt;</span><br><span class="line">        &lt;button @click=&quot;clickAdd&quot;&gt;新增&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    data () &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            msg: &apos;Hello World&apos;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    computed: &#123;</span><br><span class="line">        // 获取state值</span><br><span class="line">        count() &#123;</span><br><span class="line">            return this.$store.state.count</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        clickAdd() &#123;</span><br><span class="line">            // 分发action中add方法</span><br><span class="line">            this.$store.dispatch(&apos;add&apos;, 1)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="state-状态对象的获取方法"><a href="#state-状态对象的获取方法" class="headerlink" title="state-状态对象的获取方法"></a>state-状态对象的获取方法</h2><h3 id="1、在组件的template中直接使用"><a href="#1、在组件的template中直接使用" class="headerlink" title="1、在组件的template中直接使用"></a>1、在组件的template中直接使用</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;h2&gt;&#123;&#123; $store.state.count &#125;&#125;&lt;/h2&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2、在计算属性computed中直接赋值"><a href="#2、在计算属性computed中直接赋值" class="headerlink" title="2、在计算属性computed中直接赋值"></a>2、在计算属性computed中直接赋值</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 方式1：直接获取</span><br><span class="line">computed: &#123;</span><br><span class="line">    count() &#123;</span><br><span class="line">        // this指的是main.js中的vue实例对象</span><br><span class="line">        return this.$store.state.count</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3、通过mapState对象来赋值"><a href="#3、通过mapState对象来赋值" class="headerlink" title="3、通过mapState对象来赋值"></a>3、通过mapState对象来赋值</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// 方式2：利用mapState</span><br><span class="line">computed: mapState(&#123;</span><br><span class="line">    // es5写法</span><br><span class="line">    count: function(state) &#123;</span><br><span class="line">        return state.count</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // es6写法</span><br><span class="line">    count: state =&gt; state.count</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="4、通过mapState数组来赋值"><a href="#4、通过mapState数组来赋值" class="headerlink" title="4、通过mapState数组来赋值"></a>4、通过mapState数组来赋值</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 方式3：数组获取</span><br><span class="line">computed: mapState([&apos;count&apos;])</span><br></pre></td></tr></table></figure>

<h3 id="5、通过mapState的JSON来赋值"><a href="#5、通过mapState的JSON来赋值" class="headerlink" title="5、通过mapState的JSON来赋值"></a>5、通过mapState的JSON来赋值</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 方式4：JSON获取</span><br><span class="line">computed: mapState(&#123;</span><br><span class="line">    count: &apos;count&apos;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>注：一般4和5比较常用</p>
<h2 id="mutations-getters-actions异步"><a href="#mutations-getters-actions异步" class="headerlink" title="mutations-getters-actions异步"></a>mutations-getters-actions异步</h2><h3 id="1、mutations（修改状态）"><a href="#1、mutations（修改状态）" class="headerlink" title="1、mutations（修改状态）"></a>1、mutations（修改状态）</h3><p>（1）template中直接使用$store.commit()触发</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// template</span><br><span class="line">&lt;button @click=&quot;$store.commit(&apos;ADD&apos;)&quot;&gt;+&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">// src/vuex/store.js</span><br><span class="line">const mutations = &#123;</span><br><span class="line">    // 状态变更函数</span><br><span class="line">    ADD (state) &#123;</span><br><span class="line">        state.count++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（2）利用mapMutations引入触发</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;hello&quot;&gt;</span><br><span class="line">        &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;/h1&gt;</span><br><span class="line">        &lt;h2&gt;&#123;&#123;count&#125;&#125;&lt;/h2&gt;</span><br><span class="line">        &lt;!-- 3、、直接调用相应的方法 --&gt;</span><br><span class="line">        &lt;button @click=&quot;ADD&quot;&gt;+&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">// 1、引入mapMutations</span><br><span class="line">import &#123;mapState, mapMutations&#125; from &apos;vuex&apos;</span><br><span class="line">export default &#123;</span><br><span class="line">    data () &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            msg: &apos;Vuex test!&apos;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    // 通过mapState的JSON来赋值</span><br><span class="line">    computed: mapState(&#123;</span><br><span class="line">        count: &apos;count&apos;</span><br><span class="line">    &#125;),</span><br><span class="line">    // 2、methods中加入mapMutations</span><br><span class="line">    methods: mapMutations([</span><br><span class="line">        &apos;ADD&apos;</span><br><span class="line">    ])</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2、getters（获取state和过滤）"><a href="#2、getters（获取state和过滤）" class="headerlink" title="2、getters（获取state和过滤）"></a>2、getters（获取state和过滤）</h3><p>（1）基本用法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const getters = &#123;</span><br><span class="line">    count: function(state) &#123;</span><br><span class="line">        return state.count + 100</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（2）常规获取值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">    // 获取getters</span><br><span class="line">    count()&#123;</span><br><span class="line">        return this.$store.getters.count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（3）mapGetters获取值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 1、引入mapMutations</span><br><span class="line">import &#123;mapState, mapMutations, mapGetters&#125; from &apos;vuex&apos;</span><br><span class="line"></span><br><span class="line">// 2、使用</span><br><span class="line">computed: &#123;</span><br><span class="line">    // 获取getters</span><br><span class="line">    ...mapGetters([&quot;count&quot;])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3、actions（异步状态修改）"><a href="#3、actions（异步状态修改）" class="headerlink" title="3、actions（异步状态修改）"></a>3、actions（异步状态修改）</h3><p>actions和mutations功能基本一样，不同点是，actions是异步的改变state状态，而mutations是同步改变状态。不过实际项目中一般都是通过actions改变mutations中的值。<br>(1)store.js中增加异步代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// src/vuex/store.js</span><br><span class="line">const actions =&#123;</span><br><span class="line">    // 触发mutations中相应的方法</span><br><span class="line">    add (&#123;commit&#125;) &#123;</span><br><span class="line">        // 增加异步</span><br><span class="line">        setTimeout(()=&gt;&#123;</span><br><span class="line">            commit(&apos;ADD&apos;)</span><br><span class="line">        &#125;,3000);</span><br><span class="line">        console.log(&apos;我比reduce提前执行&apos;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（2）常规使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// template</span><br><span class="line">&lt;button @click=&quot;add&quot;&gt;+&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">// script</span><br><span class="line">methods: &#123;</span><br><span class="line">    add() &#123;</span><br><span class="line">        //分发action</span><br><span class="line">        this.$store.dispatch(&apos;add&apos;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（3）mapActions的使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// template</span><br><span class="line">&lt;button @click=&quot;add&quot;&gt;+&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">// script</span><br><span class="line">// 引入mapActions</span><br><span class="line">import &#123;mapState, mapActions&#125; from &apos;vuex&apos;</span><br><span class="line"></span><br><span class="line">// 使用mapActions</span><br><span class="line">methods: &#123;</span><br><span class="line">    ...mapActions([&apos;add&apos;])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="传递参数"><a href="#传递参数" class="headerlink" title="传递参数"></a>传递参数</h2><p>在vuex的方法调用传递参数，只需要在mutations和actions相应的地方加上参数，然后调用的时候传入即可。<br>（1）src/vuex/store.js中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// actions中传递参数</span><br><span class="line">const mutations = &#123;</span><br><span class="line">    ADD (state, n) &#123;</span><br><span class="line">        state.count += n;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// actions中传递参数</span><br><span class="line">const actions =&#123;</span><br><span class="line">    // 触发mutations中相应的方法</span><br><span class="line">    add (&#123;commit&#125;, n) &#123;</span><br><span class="line">        // 增加异步</span><br><span class="line">        setTimeout(()=&gt;&#123;</span><br><span class="line">            commit(&apos;ADD&apos;, n);</span><br><span class="line">        &#125;,3000);</span><br><span class="line">        console.log(&apos;我比reduce提前执行&apos;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（2）页面组件常规调用传递</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// template</span><br><span class="line">&lt;button @click=&quot;add&quot;&gt;+&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">// script</span><br><span class="line">methods: &#123;</span><br><span class="line">    add() &#123;</span><br><span class="line">        // 分发action</span><br><span class="line">        this.$store.dispatch(&apos;add&apos;, 99);</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（3）页面组件使用mapActions调用传递</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// template</span><br><span class="line">&lt;button @click=&quot;add(99)&quot;&gt;+&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">// script</span><br><span class="line">methods: &#123;</span><br><span class="line">    ...mapActions([&apos;add&apos;])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="module-模块组"><a href="#module-模块组" class="headerlink" title="module-模块组"></a>module-模块组</h2><p>当应用非常复杂，状态非常多的时候，需要将store分割成模块（module）。每个模块拥有自己的state、mutation、action、getter、甚至是嵌套子模块，从上至下进行同样方式的分割。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">// 模块A</span><br><span class="line">const moduleA = &#123;</span><br><span class="line">  state: &#123; ... &#125;,</span><br><span class="line">  mutations: &#123; ... &#125;,</span><br><span class="line">  actions: &#123; ... &#125;,</span><br><span class="line">  getters: &#123; ... &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 模块B</span><br><span class="line">const moduleB = &#123;</span><br><span class="line">  state: &#123; ... &#125;,</span><br><span class="line">  mutations: &#123; ... &#125;,</span><br><span class="line">  actions: &#123; ... &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 组装</span><br><span class="line">const store = new Vuex.Store(&#123;</span><br><span class="line">  modules: &#123;</span><br><span class="line">    a: moduleA,</span><br><span class="line">    b: moduleB</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 取值</span><br><span class="line">store.state.a // -&gt; moduleA 的状态</span><br><span class="line">store.state.b // -&gt; moduleB 的状态</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/04/05/vue/vue-router/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="朱程程">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/first.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小二、上酒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/04/05/vue/vue-router/" itemprop="url">vue-router</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-04-05T17:38:14+08:00">
                2022-04-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/vue/" itemprop="url" rel="index">
                    <span itemprop="name">vue</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="https://router.vuejs.org/zh/" target="_blank" rel="noopener">官方文档</a><br>Vue Router是Vue.js官方的路由管理器。和Vue.js的核心深度集成，让构建单页面应用变得易如反掌。包含的功能有：</p>
<ul>
<li>嵌套的路由/视图表</li>
<li>模块化的、基于组件的路由配置</li>
<li>路由参数、查询、通配符</li>
<li>基于Vue.js过渡系统的视图过渡效果</li>
<li>细粒度的导航控制</li>
<li>带有自动激活的CSS class的链接</li>
<li>HTML5 历史模式或 hash 模式，在 IE9 中自动降级</li>
<li>自定义的滚动条行为</li>
</ul>
<h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ol>
<li><a href="#1">快速入门</a></li>
<li><a href="#2">路由属性配置</a></li>
<li><a href="#3">页面跳转</a></li>
<li><a href="#4">子路由-路由嵌套</a></li>
<li><a href="#5">命名路由-命名视图-重定向-别名</a></li>
<li><a href="#6">路由传递参数</a></li>
<li><a href="#7">过渡动画</a></li>
<li><a href="#8">mode和404</a></li>
<li><a href="#9">路由钩子</a></li>
<li><a href="#10">路由懒加载</a></li>
</ol>
<h2 id="快速入门"><a href="#快速入门" class="headerlink" title="快速入门"></a><span id="1">快速入门</span></h2><h3 id="一、简单介绍"><a href="#一、简单介绍" class="headerlink" title="一、简单介绍"></a>一、简单介绍</h3><p>vue-router是vue官方的路由解决方案，中文官方地址<br><a href="https://router.vuejs.org/zh/" target="_blank" rel="noopener">中文官方文档</a></p>
<h3 id="二、安装"><a href="#二、安装" class="headerlink" title="二、安装"></a>二、安装</h3><p>vue-router是一个插件包，需要用npm来进行安装的。如果采用vue-cli构建初始化项目会提示安装，也可以自己使用命令安装：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue-router --save</span><br></pre></td></tr></table></figure>

<h3 id="三、解读核心文件"><a href="#三、解读核心文件" class="headerlink" title="三、解读核心文件"></a>三、解读核心文件</h3><p>用vue-cli构建项目之后，在src/router/index.js文件中看到以下的核心文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">// 引入vue框架</span><br><span class="line">import Vue from &apos;vue&apos;</span><br><span class="line">// 引入vue-router路由依赖</span><br><span class="line">import Router from &apos;vue-router&apos;</span><br><span class="line">// 引入页面组件，命名为HelloWorld</span><br><span class="line">import HelloWorld from &apos;@/components/HelloWorld&apos;</span><br><span class="line"></span><br><span class="line">// Vue全局使用Router</span><br><span class="line">Vue.use(Router)</span><br><span class="line"></span><br><span class="line">// 定义路由配置</span><br><span class="line">export default new Router(&#123;</span><br><span class="line">    routes: [  // 配置路由，这里是个数组</span><br><span class="line">    &#123;           // 每一个连接都是一个对象</span><br><span class="line">        path: &apos;/&apos;, // 链接路径</span><br><span class="line">        name: &apos;HelloWorld&apos;,  // 路由名称</span><br><span class="line">        component: HelloWorld // 对应组件模板</span><br><span class="line">    &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="四、使用"><a href="#四、使用" class="headerlink" title="四、使用"></a>四、使用</h3><p>在系统入口文件main.js中注入router，代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// 引入vue框架</span><br><span class="line">import Vue from &apos;vue&apos;</span><br><span class="line">// 引入根组件</span><br><span class="line">import App from &apos;./App&apos;</span><br><span class="line">// 引入路由配置</span><br><span class="line">import router from &apos;./router&apos;</span><br><span class="line"></span><br><span class="line">// 关闭生产模式下给出的提示</span><br><span class="line">Vue.config.productionTip = false</span><br><span class="line"></span><br><span class="line">// 定义实例</span><br><span class="line">new Vue(&#123;</span><br><span class="line">    el: &apos;#app&apos;,</span><br><span class="line">    router, // 注入框架中</span><br><span class="line">    components: &#123; App &#125;,</span><br><span class="line">    template: &apos;&lt;App /&gt;&apos;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="路由属性配置说明"><a href="#路由属性配置说明" class="headerlink" title="路由属性配置说明"></a><span id="2">路由属性配置说明</span></h2><p>代如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">export default new Router(&#123;</span><br><span class="line">    mode: &apos;history&apos;, // 路由模式，取值为history和hash</span><br><span class="line">    base: &apos;/&apos;, // 打包路径，默认/，可以修改</span><br><span class="line">    routes: [</span><br><span class="line">    &#123;</span><br><span class="line">        path: string, // 路径</span><br><span class="line">        component: Component, // 页面组件</span><br><span class="line">        name: string, // 路由名称</span><br><span class="line">        components: &#123; [name: string]: Component &#125;, // 命名视图组件</span><br><span class="line">        redirect: string | Location | Function, // 重定向</span><br><span class="line">        props: boolean | string | Function, // 路由组件传递参数</span><br><span class="line">        alias: string | Array&lt;string&gt;, // 路由别名</span><br><span class="line">        children: Array&lt;RouteConfig&gt;, // 嵌套子路由</span><br><span class="line">        beforeEnter?: (to: Route, from: Route, next: Function) =&gt; void, // 路由单独钩子</span><br><span class="line">        meta: any, // 自定义标签属性，比如：是否需要登录</span><br><span class="line">        icon: any, // 图标</span><br><span class="line">        // 2.6.0+</span><br><span class="line">        caseSensitive: boolean, // 匹配规则是否大小写敏感？(默认值：false)</span><br><span class="line">        pathToRegexpOptions: Object // 编译正则的选项</span><br><span class="line">    &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="页面跳转"><a href="#页面跳转" class="headerlink" title="页面跳转"></a><span id="3">页面跳转</span></h2><h3 id="一、router-link标签跳转"><a href="#一、router-link标签跳转" class="headerlink" title="一、router-link标签跳转"></a>一、router-link标签跳转</h3><p>在html标签内使用router-link跳转，相当于超链接a标签，使用方式如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link to=&apos;/&apos;&gt;&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>

<p>to: 导航路径</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;导航 ：</span><br><span class="line">   &lt;router-link to=&quot;/&quot;&gt;首页&lt;/router-link&gt;</span><br><span class="line">   &lt;router-link to=&quot;/hello&quot;&gt;hello&lt;/router-link&gt;</span><br><span class="line">&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<h3 id="二、编程式导航-JS代码内部跳转"><a href="#二、编程式导航-JS代码内部跳转" class="headerlink" title="二、编程式导航-JS代码内部跳转"></a>二、编程式导航-JS代码内部跳转</h3><p>在实际项目中，很多时候都是通过JS代码内部进行跳转，使用方式如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this.$router.push(&apos;/XXX&apos;)</span><br></pre></td></tr></table></figure>

<p>具体简单的用法：<br>（1）先编写一个按钮，在按钮上绑定方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button @click=&quot;goHome&quot;&gt;返回首页&lt;/button&gt;</span><br></pre></td></tr></table></figure>

<p>（2）在script模块里加入goHome方法，并用this.$router.push(‘/‘)导航到首页  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">    name: &apos;#app&apos;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        goHome() &#123;</span><br><span class="line">            this.$router.push(&apos;/&apos;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="三、其他常用方法"><a href="#三、其他常用方法" class="headerlink" title="三、其他常用方法"></a>三、其他常用方法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 后退一步记录，等同于history.back()</span><br><span class="line">this.$router.go(-1)</span><br><span class="line">// 在浏览器记录中前进一步，等同于history.forward()</span><br><span class="line">this.$router.go(1)</span><br></pre></td></tr></table></figure>

<h2 id="子路由-路由嵌套"><a href="#子路由-路由嵌套" class="headerlink" title="子路由-路由嵌套"></a><span id="4">子路由-路由嵌套</span></h2><p>子路由，也叫路由嵌套，采用在children后跟路由数组来实现，数组里和其他配置路由基本相同，需要配置path和component，然后在响应部分添加<router-view>来展示子页面信息，相当于陷入ifram。  </router-view></p>
<h3 id="1、src-components-Home-vue（父页面）"><a href="#1、src-components-Home-vue（父页面）" class="headerlink" title="1、src/components/Home.vue（父页面）"></a>1、src/components/Home.vue（父页面）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;hello&quot;&gt;</span><br><span class="line">        &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;/h1&gt;</span><br><span class="line">        &lt;!-- 添加子路由导航 --&gt;</span><br><span class="line">        &lt;p&gt;导航 ：</span><br><span class="line">            &lt;router-link to=&quot;/home&quot;&gt;首页&lt;/router-link&gt; | </span><br><span class="line">            &lt;router-link to=&quot;/home/one&quot;&gt;-子页面1&lt;/router-link&gt; |</span><br><span class="line">            &lt;router-link to=&quot;/home/two&quot;&gt;-子页面2&lt;/router-link&gt;</span><br><span class="line">        &lt;/p&gt;</span><br><span class="line">        &lt;!-- 子页面展示部分 --&gt;</span><br><span class="line">        &lt;router-view/&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    name: &apos;Home&apos;,</span><br><span class="line">    data () &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            msg: &apos;Home Page!&apos;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2、src-components-One-vue（子页面1）"><a href="#2、src-components-One-vue（子页面1）" class="headerlink" title="2、src/components/One.vue（子页面1）"></a>2、src/components/One.vue（子页面1）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;hello&quot;&gt;</span><br><span class="line">        &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;/h1&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    name: &apos;One&apos;,</span><br><span class="line">    data () &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            msg: &apos;Hi, I am One Page!&apos;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h3 id="3、src-components-Two-vue（子页面2）"><a href="#3、src-components-Two-vue（子页面2）" class="headerlink" title="3、src/components/Two.vue（子页面2）"></a>3、src/components/Two.vue（子页面2）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;hello&quot;&gt;</span><br><span class="line">        &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;/h1&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    name: &apos;Two&apos;,</span><br><span class="line">    data () &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            msg: &apos;Hi, I am Two Page!&apos;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h3 id="4、src-router-index-js（路由配置）"><a href="#4、src-router-index-js（路由配置）" class="headerlink" title="4、src/router/index.js（路由配置）"></a>4、src/router/index.js（路由配置）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &apos;vue&apos;</span><br><span class="line">import Router from &apos;vue-router&apos;</span><br><span class="line">import Home from &apos;@/components/Home&apos;</span><br><span class="line">import One from &apos;@/components/One&apos; </span><br><span class="line">import Two from &apos;@/components/Two&apos;</span><br><span class="line"></span><br><span class="line">Vue.use(Router)</span><br><span class="line"></span><br><span class="line">export default new Router(&#123;</span><br><span class="line">    routes: [</span><br><span class="line">    &#123;</span><br><span class="line">        path: &apos;/&apos;, // 默认页面重定向到主页</span><br><span class="line">        redirect: &apos;/home&apos;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        path: &apos;/home&apos;, // 主页路由</span><br><span class="line">        name: &apos;Home&apos;,</span><br><span class="line">        component: Home,</span><br><span class="line">        children: [ // 嵌套子路由</span><br><span class="line">        &#123;</span><br><span class="line">            path: &apos;one&apos;,</span><br><span class="line">            component: One</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            path: &apos;two&apos;,</span><br><span class="line">            component: Two</span><br><span class="line">        &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="路由传递参数"><a href="#路由传递参数" class="headerlink" title="路由传递参数"></a><span id="5">路由传递参数</span></h2><h3 id="1、通过-标签中的to传参"><a href="#1、通过-标签中的to传参" class="headerlink" title="1、通过 标签中的to传参"></a>1、通过<router-link> 标签中的to传参</router-link></h3><p><strong>基本语法</strong>  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link :to=&quot;&#123;name:xxx, params: &#123;key:value&#125;&#125;&quot;&gt;valueString&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>

<p>上面to前边是带冒号，后边跟的是一个对象形式的字符串  </p>
<ul>
<li>name：在路由配置文件中起的name值。叫做命名路由</li>
<li>params：要传的参数，它是对象形式，在对象里可以传递多个值</li>
</ul>
<p><strong>具体实例</strong>：<br>（1）在src/components/Home.vue里面导航中添加如下代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link :to=&quot;&#123;name: &apos;one&apos;, params:&#123;username:&apos;test123&apos;&#125;&#125;&quot;&gt;子页面1&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>

<p>（2）在src/router/indes.js中添加如下代码，重点是name：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    path:&apos;one&apos;, // 子页面1</span><br><span class="line">    name: &apos;one&apos;, // 路由名称-命名路由</span><br><span class="line">    component:One</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（3）在src/components/One.vue里面接受参数，代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;h2&gt;&#123;&#123;$route.params.username&#125;&#125;&lt;/h2&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2、url中传递参数"><a href="#2、url中传递参数" class="headerlink" title="2、url中传递参数"></a>2、url中传递参数</h3><p>(1)在路由中以冒号传递，在src/router/index.js中加入如下代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    path: &apos;/home/two/:id/:name&apos;,</span><br><span class="line">    component: Two</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>(2)接受参数，在src/components/Two.vue中加入如下代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;ID：&#123;&#123; $route.params.id&#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;p&gt;名称：&#123;&#123; $route.params.name&#125;&#125;&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<p>(3)路由跳转，在src/components/Home.vue中加入如下代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link to=&quot;/home/two/1/张三&quot;&gt;子页面2&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>

<p>to前没有冒号为字符串路由，必须全部匹配。<br>(4)如果路由参数需要有特定的规则，就需要加入正则表达式了，示例如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    path:&apos;/home/two/:id(\\d+)/:name&apos;, // 子页面2</span><br><span class="line">    component:Two</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3、编程式导航-params传递参数"><a href="#3、编程式导航-params传递参数" class="headerlink" title="3、编程式导航-params传递参数"></a>3、编程式导航-params传递参数</h3><p>（1）在src/router/index.js页面加入如下代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    path:&apos;/home/three&apos;, // 子页面3</span><br><span class="line">    name: &apos;three&apos;,</span><br><span class="line">    component:Three</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（2）在src/components/Three.vue页面加入如下代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;ID：&#123;&#123; $route.params.id&#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;p&gt;名称：&#123;&#123; $route.params.name&#125;&#125;&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<p>（3）在src/components/Home.vue中加入如下代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// template</span><br><span class="line">&lt;button @click=&quot;toThreePage&quot;&gt;页面3-params传参&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">// script</span><br><span class="line">methods: &#123;</span><br><span class="line">    toThreePage() &#123;</span><br><span class="line">        this.$router.push(&#123;name: &apos;three&apos;, params: &#123;id: 1, name: &apos;zhangsan&apos;&#125;&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>说明：<br>A、动态路由使用params传递参数，在this.$router.push()方法中path不能和params一起使用，否则params将无效。需要用name来指定页面。<br>B、以上的参数不会显示到浏览器的地址栏中，如果刷新一次页面，就获取不到参数了，改进方式将第一步代码改为如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    path:&apos;/home/three/:id/:name&apos;, // 子页面3</span><br><span class="line">    name: &apos;three&apos;,</span><br><span class="line">    component:Three</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4、编程式导航-query传递参数"><a href="#4、编程式导航-query传递参数" class="headerlink" title="4、编程式导航-query传递参数"></a>4、编程式导航-query传递参数</h3><p>（1）在src/router/index.js页面加入如下代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    path:&apos;/home/three&apos;, // 子页面3</span><br><span class="line">    name: &apos;three&apos;,</span><br><span class="line">    component:Three</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（2）在src/components/Three.vue页面加入如下代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;ID：&#123;&#123; $route.query.id&#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;p&gt;名称：&#123;&#123; $route.query.name&#125;&#125;&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<p>（3）在src/components/Home.vue中加入如下代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// template</span><br><span class="line">&lt;button @click=&quot;toThreePage&quot;&gt;页面3-params传参&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">// script</span><br><span class="line">methods: &#123;</span><br><span class="line">    toThreePage() &#123;</span><br><span class="line">        this.$router.push(&#123;path: &apos;/home/three&apos;, query: &#123;id: 1, name: &apos;zhangsan&apos;&#125;&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>动态路由使用query传递参数，会显示到浏览器地址栏中，以上链接为<br>/home/three?id=1&amp;name=zhangsan</p>
<h2 id="命名路由-命名视图-重定向-别名"><a href="#命名路由-命名视图-重定向-别名" class="headerlink" title="命名路由-命名视图-重定向-别名"></a><span id="6">命名路由-命名视图-重定向-别名</span></h2><h3 id="1、命名路由"><a href="#1、命名路由" class="headerlink" title="1、命名路由"></a>1、命名路由</h3><p>给一个路由命一个唯一的名称，然后跳转调用这个名称即可。<br>（1）在src/router/index.js中加一个带name的路由，代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    path: &apos;one&apos;, // 子页面1</span><br><span class="line">    name: &apos;one&apos;, // 路由名称-命名路由</span><br><span class="line">    component: One // 页面组件</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（2）在src/component/Home.vue页面中调用，代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// template跳转调用</span><br><span class="line">&lt;router-link :to=&quot;&#123;name: &apos;one&apos;&#125;&quot;&gt;子页面1&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">// router.push函数跳转调用</span><br><span class="line">router.push(&#123; name: &apos;user&apos;&#125;&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="2、命名视图"><a href="#2、命名视图" class="headerlink" title="2、命名视图"></a>2、命名视图</h3><p>在同一个页面展示多个视图，如果不用嵌套，智能采用命名视图来实现，代码如下：<br>（1）在src/router/index.js中，代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &apos;vue&apos;</span><br><span class="line">import Router from &apos;vue-router&apos;</span><br><span class="line">// 创建页面组件</span><br><span class="line">const Header = &#123; template: &apos;&lt;div&gt;Header&lt;/div&gt;&apos; &#125;</span><br><span class="line">const Left = &#123; template: &apos;&lt;div&gt;Left&lt;/div&gt;&apos; &#125;</span><br><span class="line">const Right = &#123; template: &apos;&lt;div&gt;Right&lt;/div&gt;&apos; &#125;</span><br><span class="line"></span><br><span class="line">Vue.use(Router)</span><br><span class="line"></span><br><span class="line">export default new Router(&#123;</span><br><span class="line">    routes: [</span><br><span class="line">    &#123;</span><br><span class="line">        path: &apos;/&apos;, // 主页路由</span><br><span class="line">        components: &#123;</span><br><span class="line">            defaults: Header,</span><br><span class="line">            a: Left,</span><br><span class="line">            b: Right</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>（2）在src/App.vue中，代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">        &lt;router-view /&gt;</span><br><span class="line">        &lt;router-view name=&quot;a&quot; class=&quot;left&quot; /&gt;</span><br><span class="line">        &lt;router-view name=&quot;b&quot; class=&quot;right&quot; /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    name: &apos;App&apos;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">#app &#123;</span><br><span class="line">    text-align: center;</span><br><span class="line">    color: #2c3e50;</span><br><span class="line">    width: 500px;</span><br><span class="line">    border: 1px solid red;</span><br><span class="line">    margin: 0 auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.left,.right&#123;</span><br><span class="line">    float: left;</span><br><span class="line">    width:48%;</span><br><span class="line">    text-align: center;</span><br><span class="line">    border:1px solid red</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>PS：经过实践，命名视图只能放在最顶级的页面中，即第一步中的代码不能放在其他页面中。</p>
<h3 id="3、重定向"><a href="#3、重定向" class="headerlink" title="3、重定向"></a>3、重定向</h3><p>重定向是通过route的配置中关键词redirect来实现的，具体代码如下：<br>（1）在src/router/index.js中，代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">export default new Router(&#123;</span><br><span class="line">    routes: [</span><br><span class="line">    &#123;</span><br><span class="line">        path: &apos;/&apos;, // 默认页面重定向到主页</span><br><span class="line">        redirect: &apos;/home&apos; // 重定向</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        path: &apos;/home&apos;, // 主页路由</span><br><span class="line">        component: Home,</span><br><span class="line">        children:[ // 嵌套子路由</span><br><span class="line">            &#123;</span><br><span class="line">                path:&apos;/home/two/:id/:name&apos;, // 子页面2</span><br><span class="line">                component:Two</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                path:&apos;/home/three/:id/:name&apos;, // 子页面3</span><br><span class="line">                name: &apos;three&apos;, // 路由名称-命名路由</span><br><span class="line">                redirect: &apos;/home/two/:id/:name&apos; // 重定向-传递参数</span><br><span class="line">            &#125;,</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>（2）在src/components/Home.vue中，代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link to=&quot;/&quot;&gt;首页&lt;/router-link&gt; | </span><br><span class="line">&lt;router-link to=&quot;/home/two/1/lisi&quot;&gt;子页面2&lt;/router-link&gt;  |</span><br><span class="line">&lt;router-link :to=&quot;&#123;name: &apos;three&apos;, params: &#123;id: 1, name: &apos;zhangsan&apos;&#125;&#125;&quot;&gt;子页面3&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>

<p>说明1-不带参数的重定向：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redirect: &apos;/home&apos; // 重定向-不带参数</span><br></pre></td></tr></table></figure>

<p>说明2-带参数的重定向：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redirect: &apos;/home/two/:id/:name&apos; // 重定向-传递参数</span><br></pre></td></tr></table></figure>

<h3 id="4、别名"><a href="#4、别名" class="headerlink" title="4、别名"></a>4、别名</h3><p>重定向是通过route的配置中关键词alias来实现的，具体代码如下：<br>（1）在src/router/index.js中，代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    path:&apos;/one&apos;, // 子页面1</span><br><span class="line">    component:One,</span><br><span class="line">    alias: &apos;/oneother&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（2）在src/components/Home.vue中，代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link to=&quot;/oneother&quot;&gt;子页面1&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>

<p>redirect和alias的区别：</p>
<ul>
<li>redirect：直接改变了url的值，把url变成了真实的path路径。</li>
<li>alias：url路径没有被改变，这种更友好，让用户知道自己访问的路径，只是改变router-view中的内容。</li>
</ul>
<p>别名请不要用在path为’/’中，如下代码的别名是不起作用的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    path: &apos;/&apos;,</span><br><span class="line">    component: Hello,</span><br><span class="line">    alias:&apos;/home&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="过渡动画"><a href="#过渡动画" class="headerlink" title="过渡动画"></a><span id="7">过渡动画</span></h2><h3 id="代码示例"><a href="#代码示例" class="headerlink" title="代码示例"></a>代码示例</h3><p>（1）在<router-view>标签的外部添加<transition>标签，标签还需要一个name属性，代码如下：</transition></router-view></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition name=&quot;fade&quot; mode=&quot;out-in&quot;&gt;</span><br><span class="line">    &lt;router-view /&gt;</span><br><span class="line">&lt;/transition&gt;</span><br></pre></td></tr></table></figure>

<p>（2）加入CSS，一共4个CSS类名，四个类名与transition的name属性有关，比如name=”fade”，相应的css如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">/*页面切换动画*/</span><br><span class="line">/*进入过渡的结束状态，元素被插入时就生效，在过渡过程完成后移除*/</span><br><span class="line">.fade-enter-active &#123;</span><br><span class="line">    transition: opacity .5s;</span><br><span class="line">&#125;</span><br><span class="line">/*进入过渡的开始状态，元素被插入时生效，只应用一帧后立刻删除*/</span><br><span class="line">.fade-enter &#123;</span><br><span class="line">    opacity: 0;</span><br><span class="line">&#125;</span><br><span class="line">/*离开过渡的开始状态，元素被删除时触发，只应用一帧后立刻删除*/</span><br><span class="line">.fade-leave &#123;</span><br><span class="line">    opacity: 1;</span><br><span class="line">&#125;</span><br><span class="line">/*离开过渡的结束状态，元素被删除时生效，离开过渡完成后被删除*/</span><br><span class="line">.fade-leave-active &#123;</span><br><span class="line">    opacity:0;</span><br><span class="line">    transition: opacity .5s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2、过渡模式mode"><a href="#2、过渡模式mode" class="headerlink" title="2、过渡模式mode"></a>2、过渡模式mode</h3><ul>
<li>in-out：新元素先进入过渡，完成之后当前元素过渡离开，默认模式。</li>
<li>out-in：当前元素先进行过渡离开，离开完成后新元素过渡进入.</li>
</ul>
<h2 id="mode与404"><a href="#mode与404" class="headerlink" title="mode与404"></a><span id="8">mode与404</span></h2><h3 id="1、mode模式"><a href="#1、mode模式" class="headerlink" title="1、mode模式"></a>1、mode模式</h3><p>代码示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export default new Router(&#123;</span><br><span class="line">    mode: &apos;history&apos;, //mode模式</span><br><span class="line">    routes: [...]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>mode取值说明：<br>（1）history: URL就像正常的url，示例：<a href="http://localhost:8080/home" target="_blank" rel="noopener">http://localhost:8080/home</a><br>（2）hash：默认值，会多一个“#”，示例：<a href="http://localhost:8080/#/home" target="_blank" rel="noopener">http://localhost:8080/#/home</a></p>
<h3 id="404页面设置"><a href="#404页面设置" class="headerlink" title="404页面设置"></a>404页面设置</h3><p>如果访问的路由不存在，或者用户输入错误时，会有一个404友好的提示页面，配置如下：<br>（1）在/src/router/index.js中加入如下代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 404</span><br><span class="line">&#123;</span><br><span class="line">    path: &apos;*&apos;,</span><br><span class="line">    component: () =&gt; import(&apos;@/components/404&apos;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（2）在src/components/404.vue中编写如下代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;hello&quot;&gt;</span><br><span class="line">        &lt;h1&gt;404 not found&lt;/h1&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    data () &#123;</span><br><span class="line">        return &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="路由钩子"><a href="#路由钩子" class="headerlink" title="路由钩子"></a><span id="9">路由钩子</span></h2><p>路由钩子，即导航钩子，其实就是路由拦截器，vue-router一共有三类：</p>
<ol>
<li>全局钩子：最常用</li>
<li>路由单独钩子</li>
<li>组件内钩子</li>
</ol>
<h3 id="1、全局钩子"><a href="#1、全局钩子" class="headerlink" title="1、全局钩子"></a>1、全局钩子</h3><p>在src/router/index.js中使用，代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// 定义路由设置</span><br><span class="line">var router = new Router(&#123;...&#125;)</span><br><span class="line"></span><br><span class="line">// 全局路由拦截-进入页面前执行</span><br><span class="line">router.beforeEach((to, from, next) =&gt; &#123;</span><br><span class="line">    // 这里可以加入全局登录判断</span><br><span class="line">    // 继续执行</span><br><span class="line">    next()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 全局后置钩子-常用于结束动画等</span><br><span class="line">router.afterEach(() =&gt; &#123;</span><br><span class="line">    // 不接受next</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">export default router</span><br></pre></td></tr></table></figure>

<p>每个钩子方法接收三个参数：<br>to： Router：即将要进入的目标[路由对象]<br>from：Router：当前导航正要离开的路由<br>next：Function：继续执行函数  </p>
<ul>
<li>next()：继续执行</li>
<li>next(false)：中断当前的导航。</li>
<li>next(‘/‘) 或 next({ path: ‘/‘ })：跳转新页面，常用于登陆失效跳转登陆</li>
</ul>
<h3 id="2、路由单独钩子"><a href="#2、路由单独钩子" class="headerlink" title="2、路由单独钩子"></a>2、路由单独钩子</h3><p>使用：在路由配置中单独加入钩子，在src/router/index.js中使用，代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    path: &apos;/home/one&apos;, // 子页面1</span><br><span class="line">    component: One,</span><br><span class="line">    // 路由内钩子</span><br><span class="line">    beforeEnter: (to, from, next) =&gt; &#123;</span><br><span class="line">        console.log(&apos;进入前执行&apos;)</span><br><span class="line">        next()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3、组件内钩子"><a href="#3、组件内钩子" class="headerlink" title="3、组件内钩子"></a>3、组件内钩子</h3><p>使用：在路由组件内定义豆子函数：</p>
<ul>
<li>beforeRouteEnter：进入页面前调用</li>
<li>beforeRouteUpdate（2.2新增）：页面路由改变时调用，一般需要带参数。</li>
<li>beforeRouteLeave：离开页面调用</li>
</ul>
<p>任意找一页面，编写：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">        name: &apos;Two&apos;,</span><br><span class="line">        data () &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            msg: &apos;Hi, I am Two Page!&apos;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    // 进入页面前调用</span><br><span class="line">    beforeRouteEnter(to, from, next) &#123;</span><br><span class="line">        console.log(&apos;进入enter路由钩子&apos;)</span><br><span class="line">        next()</span><br><span class="line">    &#125;,</span><br><span class="line">    // 离开页面时调用</span><br><span class="line">    beforeRouteLeave(to, from, next) &#123;</span><br><span class="line">        console.log(&apos;进入leave路由钩子&apos;)</span><br><span class="line">        next()</span><br><span class="line">    &#125;,</span><br><span class="line">    // 页面路由改变时调用</span><br><span class="line">    beforeRouteUpdate(to, from, next) &#123;</span><br><span class="line">        console.log(&apos;进入update路由钩子&apos;)</span><br><span class="line">        console.log(to.params.id)</span><br><span class="line">        next()</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="路由懒加载"><a href="#路由懒加载" class="headerlink" title="路由懒加载"></a><span id="10">路由懒加载</span></h2><h3 id="1、路由正常模式："><a href="#1、路由正常模式：" class="headerlink" title="1、路由正常模式："></a>1、路由正常模式：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 1、先引入页面组件</span><br><span class="line">import Home from &apos;@/components/Home&apos;</span><br><span class="line"></span><br><span class="line">// 2、使用组件</span><br><span class="line">    &#123;</span><br><span class="line">        path: &apos;/home&apos;,</span><br><span class="line">        component: Home</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2、懒加载模式"><a href="#2、懒加载模式" class="headerlink" title="2、懒加载模式"></a>2、懒加载模式</h3><p>大项目中，为了提高初始化页面的效率，路由一般使用懒加载模式，一共三种实现方式。<br>（1）第一种写法(常用)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">component: () =&gt; import(&apos;@/components/Two&apos;)</span><br></pre></td></tr></table></figure>

<p>（2）第二种写法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">component: (resolve) =&gt; require([&apos;@/components/Two&apos;&apos;], resolve)</span><br></pre></td></tr></table></figure>

<p>（3）第三种写法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">components: r =&gt; require.ensure([], () =&gt; r(require(&apos;@/components/Three&apos;)), &apos;group-home&apos;)</span><br></pre></td></tr></table></figure>

<p>第三种中，’group-home’是把组件按组分块打包, 可以将多个组件放入这个组中，在打包的时候Webpack会将相同 chunk 下的所有异步模块打包到一个异步块里面。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/04/05/vue/vue+echarts画折线图/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="朱程程">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/first.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小二、上酒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/04/05/vue/vue+echarts画折线图/" itemprop="url">vue + echarts画折线图</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-04-05T17:38:14+08:00">
                2022-04-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/vue-echarts/" itemprop="url" rel="index">
                    <span itemprop="name">vue-echarts</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;chartLineBox&quot; style=&quot;width: 50%;height: 25vh;&quot; /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import echarts from &apos;echarts&apos;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &apos;&apos;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      charts: &apos;&apos;,</span><br><span class="line">      opinionData: [&apos;3&apos;, &apos;2&apos;, &apos;4&apos;, &apos;4&apos;, &apos;5&apos;]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  // 调用</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    this.$nextTick(function() &#123;</span><br><span class="line">      this.drawLine(&apos;chartLineBox&apos;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    drawLine(id) &#123;</span><br><span class="line">      this.charts = echarts.init(document.getElementById(id))</span><br><span class="line">      this.charts.setOption(&#123;</span><br><span class="line">        tooltip: &#123;</span><br><span class="line">          trigger: &apos;axis&apos;</span><br><span class="line">        &#125;,</span><br><span class="line">        legend: &#123;</span><br><span class="line">          data: [&apos;近七日收益&apos;]</span><br><span class="line">        &#125;,</span><br><span class="line">        grid: &#123;</span><br><span class="line">          left: &apos;3%&apos;,</span><br><span class="line">          right: &apos;4%&apos;,</span><br><span class="line">          bottom: &apos;3%&apos;,</span><br><span class="line">          containLabel: true</span><br><span class="line">        &#125;,</span><br><span class="line">        toolbox: &#123;</span><br><span class="line">          feature: &#123;</span><br><span class="line">            saveAsImage: &#123;&#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        xAxis: &#123;</span><br><span class="line">          type: &apos;category&apos;,</span><br><span class="line">          boundaryGap: false, // 坐标轴两边不留白</span><br><span class="line">          data: [&apos;1&apos;, &apos;2&apos;, &apos;3&apos;, &apos;4&apos;, &apos;5&apos;]</span><br><span class="line">        &#125;,</span><br><span class="line">        yAxis: &#123;</span><br><span class="line">          type: &apos;value&apos;</span><br><span class="line">        &#125;,</span><br><span class="line">        series: [&#123;</span><br><span class="line">          name: &apos;近七日收益&apos;,</span><br><span class="line">          type: &apos;line&apos;,</span><br><span class="line">          stack: &apos;总量&apos;,</span><br><span class="line">          data: this.opinionData,</span><br><span class="line">          lineStyle: &#123;</span><br><span class="line">            normal: &#123;</span><br><span class="line">              color: &apos;#FA6F53&apos;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;]</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/04/05/vue/v-if和v-show区别/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="朱程程">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/first.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小二、上酒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/04/05/vue/v-if和v-show区别/" itemprop="url">v-if和v-show区别</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-04-05T17:38:14+08:00">
                2022-04-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/vue/" itemprop="url" rel="index">
                    <span itemprop="name">vue</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>今天在做项目时候遇到一个bug，苦苦寻找半天，知道大致原因，但是没有实际解决。最终发现v-if和v-show的问题（vue官方文档没有深入理解，有待继续学习）。记录一下v-if和v-show区别以及使用。  </p>
<h4 id="v-if和v-show的相同点"><a href="#v-if和v-show的相同点" class="headerlink" title="v-if和v-show的相同点"></a>v-if和v-show的相同点</h4><p>我们知道，v-if和v-show都可以实现指定内容的显示和隐藏操作的效果。</p>
<h4 id="v-if和v-show的区别"><a href="#v-if和v-show的区别" class="headerlink" title="v-if和v-show的区别"></a>v-if和v-show的区别</h4><ul>
<li>手段：v-if在每次完成显示和隐藏功能的时候，需要不断的在dom树上完成节点的创建和删除操作。v-show则是直接通过修改display样式的属性值来完成（block为显示，none为隐藏）。即v-show变化不刷新，而v-if变化进行刷新。</li>
<li>编译过程：v-if有一个局部编译/卸载的过程，切换过程中合适的销毁和重建内部事件监听和子组件；v-show只是简单的基于css切换；</li>
<li>编译条件：v-if是惰性的，如果初始条件为假，则什么也不做；只有在条件第一次变为真时才开始局部编译（编译被缓存后，然后再进行切换时进行局部卸载）；v-show是在任何条件下（首次条件是否为真）都被编译，然后被缓存，而且dom元素保留；</li>
<li>性能消耗：v-if有更高的切换消耗；v-show有更高的初始渲染消耗；</li>
</ul>
<h4 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h4><p>若是使用过程中需要频繁的进行切换，则使用v-show较好；如果使用过程中条件很少改变，则用v-if较好。当元素在响应式网页的操作过程中，根据不同用户的需求，可能永远不会被显示或者被隐藏，则选择使用v-if</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>v-if判断是否加载，可以减轻服务器的压力，在需要时加载，但有更高的切换开销；v-show调整dom元素的css的display属性，可以使客户端操作更加流畅，但有更高的初始渲染开销。如果需要非常频繁的切换，使用v-shoe较好；如果在运行条件很少改变，则使用v-if较好。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/04/05/web全栈/TypeScript/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="朱程程">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/first.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小二、上酒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/04/05/web全栈/TypeScript/" itemprop="url">TypeScript</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-04-05T17:38:14+08:00">
                2022-04-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web全栈/" itemprop="url" rel="index">
                    <span itemprop="name">web全栈</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>优点：</p>
<ol>
<li>补充js没有的特性——类型、抽象、接口</li>
<li>语言更加的严谨</li>
</ol>
<h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g typescript</span><br></pre></td></tr></table></figure>

<h4 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h4><p>tsc xxx.ts   =&gt; 生成一个重名的js文件</p>
<h4 id="新增常用特点"><a href="#新增常用特点" class="headerlink" title="新增常用特点"></a>新增常用特点</h4><h5 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h5><p>变量、参数、返回值</p>
<p>指明类型：</p>
<ol>
<li>显示声明： let a:string</li>
<li>隐式声明（类型推测）：  let a=12 // 初始化同时将类型定下来</li>
</ol>
<p>如果“让变量什么都能装”：</p>
<ol>
<li>不给初始值</li>
<li>显示声明any</li>
</ol>
<p>支持的类型：  </p>
<ul>
<li>number、string、boolean、any  </li>
<li>联合类型：(类型1|类型2|类型3)  </li>
<li>元组类型：[类型1, 类型2]</li>
<li>枚举：列举有限的可能性</li>
<li>void类型：常用于返回值</li>
<li>null/undefined</li>
<li>never：永远都不会结束</li>
<li>数组</li>
<li>json类型</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> c:number = <span class="number">7</span>  <span class="comment">// 限定类型</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a:number, b:number</span>):<span class="title">number</span> </span>&#123; <span class="comment">// 限制函数参数a、b和返回值为number类型</span></span><br><span class="line">  <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> d:(number|string) = <span class="number">12</span>  <span class="comment">// d可以是number类型或string类型</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组</span></span><br><span class="line"><span class="keyword">let</span> e:number[] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>] <span class="comment">// 此时数组中的每一项必须为number类型</span></span><br><span class="line"><span class="keyword">let</span> e1:<span class="built_in">Array</span>&lt;number&gt; = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> f:(number|string)[] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="string">'abc'</span>]  <span class="comment">// 这样数组中可以为number或string类型</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 元组</span></span><br><span class="line"><span class="keyword">let</span> g:[number, boolean] = [<span class="number">12</span>, <span class="literal">true</span>]  <span class="comment">// 仅限制前两位</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 枚举</span></span><br><span class="line">enum Gender&#123;Male, Female&#125;</span><br><span class="line"><span class="keyword">let</span> gender:Gender</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span>(gender) &#123;</span><br><span class="line">  <span class="keyword">case</span> Gender.Male:</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'男'</span>)</span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line">  <span class="keyword">case</span> Gender.Female:</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'女'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// void(返回空)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params">name:string, age:number</span>):<span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`名字：<span class="subst">$&#123;name&#125;</span>，年龄：<span class="subst">$&#123;age&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line">show(<span class="string">'zhangsan'</span>, <span class="number">23</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// undefined/null</span></span><br><span class="line"><span class="keyword">let</span> h:<span class="literal">undefined</span> = <span class="literal">undefined</span></span><br><span class="line"><span class="keyword">let</span> i:<span class="literal">null</span> = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// never</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">show2</span>(<span class="params"></span>):<span class="title">never</span> </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="number">12</span></span><br><span class="line">  <span class="keyword">let</span> b = <span class="number">24</span></span><br><span class="line">  alert(a + b)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'error'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// json类型</span></span><br><span class="line"><span class="keyword">let</span> json:&#123;<span class="attr">a</span>: number, <span class="attr">b</span>: number&#125; = &#123;<span class="attr">a</span>: <span class="number">12</span>, <span class="attr">b</span>: <span class="number">5</span>&#125;</span><br></pre></td></tr></table></figure>

<h5 id="类"><a href="#类" class="headerlink" title="类"></a>类</h5><p>新的写法<br>变量需要定义声明  </p>
<p>访问修饰符：public、private、protected  </p>
<p>访问修饰符的使用：</p>
<ul>
<li>最小访问原则</li>
<li>属性最好都是private和protected， 方法可以是public</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">  <span class="comment">// ts中需要声明属性</span></span><br><span class="line">  private name:string</span><br><span class="line">  private age: number</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span>(name:string, age:number) &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name</span><br><span class="line">    <span class="keyword">this</span>.age = age</span><br><span class="line">  &#125;</span><br><span class="line">  show():<span class="keyword">void</span> &#123;</span><br><span class="line">    alert(<span class="string">`name: <span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>, age: <span class="subst">$&#123;<span class="keyword">this</span>.age&#125;</span>`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Staff</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  private job:string</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span>(name:string, age:number, job:string) &#123;</span><br><span class="line">    <span class="keyword">super</span>(name, age)</span><br><span class="line">    <span class="keyword">this</span>.job = job</span><br><span class="line">  &#125;</span><br><span class="line">  show():<span class="keyword">void</span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.show()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`岗位：<span class="subst">$&#123;<span class="keyword">this</span>.job&#125;</span>`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p:Person = <span class="keyword">new</span> Person(<span class="string">'zhangsan'</span>, <span class="number">23</span>)</span><br><span class="line">p.show()</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> s:Staff = <span class="keyword">new</span> Staff(<span class="string">'lisi'</span>, <span class="number">26</span>, <span class="string">'码农'</span>)</span><br><span class="line">s.show()</span><br></pre></td></tr></table></figure>

<h5 id="高级特性"><a href="#高级特性" class="headerlink" title="高级特性"></a>高级特性</h5><p>抽象、接口  </p>
<p>抽象：一些对象具有共同的特性。抽象类只提供模板，而不去自己实现<br>只能作为父级使用，不能实例化<br>作用：规范所有的子类</p>
<p>接口、抽象都是为了规范所有子类</p>
<h5 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h5><ol>
<li>类型</li>
<li>修饰符<ul>
<li>访问修饰符</li>
<li>const、static</li>
</ul>
</li>
<li>泛型：let arr:string[] = []</li>
<li>抽象类和接口：推荐接口</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/04/05/javascript/null,undefinde区别/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="朱程程">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/first.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小二、上酒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/04/05/javascript/null,undefinde区别/" itemprop="url">null,undefinde区别</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-04-05T17:38:14+08:00">
                2022-04-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>什么时候是undefined</p>
<ol>
<li>变量声明且未赋值</li>
<li>获取变量中不存在的属性</li>
<li>函数有形参但没有实参时，形参的值是undefined</li>
<li>函数调用没有返回值或者return后没有数据，接受函数返回的变量是undefined</li>
</ol>
<p>什么时候是null</p>
<ol>
<li>对象不存在就是null</li>
<li>null的数据类型返回的是个object，JavaScript创始人为考虑空的情况，是错误的设计</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/04/05/web全栈/node文件数据解析/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="朱程程">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/first.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小二、上酒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/04/05/web全栈/node文件数据解析/" itemprop="url">Nodejs文件数据解析</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-04-05T17:38:14+08:00">
                2022-04-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web全栈/" itemprop="url" rel="index">
                    <span itemprop="name">web全栈</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Nodejs文件数据解析"><a href="#Nodejs文件数据解析" class="headerlink" title="Nodejs文件数据解析"></a>Nodejs文件数据解析</h2><p>file上传，也是post  </p>
<p>表单的三种post：</p>
<ol>
<li>text/plain(用的很少，纯文字)</li>
<li>application/x-www-form-urlencoded(url编码方式)</li>
<li>multipart/form-data(上传文件内容，上传的文件是二进制数据)</li>
</ol>
<h4 id="Buffer"><a href="#Buffer" class="headerlink" title="Buffer"></a>Buffer</h4><p>在之前的server中，用字符串来接受得到的数据，这是存在问题的，图片等文件不能使用字符串，他们是以二进制形式传输。所以可以使用Buffer对象数据接收。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> server = http.createServer(<span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//  str = '';</span></span><br><span class="line">    <span class="keyword">let</span> arr = [];</span><br><span class="line">    </span><br><span class="line">    request.on(<span class="string">'data'</span>, data =&gt; &#123;</span><br><span class="line">        <span class="comment">// str += data;</span></span><br><span class="line">        arr.push(data)</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    request.on(<span class="string">'end'</span>, () =&gt; &#123;</span><br><span class="line">        <span class="keyword">let</span> data = Buffer.concat(arr)</span><br><span class="line">        <span class="built_in">console</span>.log(data);</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    response.end();</span><br><span class="line">&#125;)</span><br><span class="line">server.listen(<span class="number">8080</span>);</span><br></pre></td></tr></table></figure>

<p>收到数据描述：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;分隔符&gt;\r\n数据描述\r\n\r\n数据值\r\n</span><br><span class="line">&lt;分隔符&gt;\r\n数据描述\r\n\r\n数据值\r\n</span><br><span class="line">&lt;分隔符&gt;\r\n数据描述1\r\n数据描述2\r\n&lt;文件内容&gt;\r\n</span><br><span class="line">&lt;分隔符&gt;--</span><br></pre></td></tr></table></figure>

<h4 id="解析数据："><a href="#解析数据：" class="headerlink" title="解析数据："></a>解析数据：</h4><ol>
<li><p>用&lt;分隔符&gt;切开数据</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    null,</span><br><span class="line">    \r\n数据描述\r\n\r\n数据值\r\n,</span><br><span class="line">    \r\n数据描述\r\n\r\n数据值\r\n,</span><br><span class="line">    \r\n数据描述1\r\n数据描述2\r\n&lt;文件内容&gt;\r\n,</span><br><span class="line">    --\r\n</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
</li>
<li><p>丢弃头尾元素</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    \r\n数据描述\r\n\r\n数据值\r\n,</span><br><span class="line">    \r\n数据描述\r\n\r\n数据值\r\n,</span><br><span class="line">    \r\n数据描述1\r\n数据描述2\r\n&lt;文件内容&gt;\r\n,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
</li>
<li><p>丢弃每一项头尾\r\n</p>
</li>
<li><p>用第一次出现的”\r\n\r\n”切分（因为文件中也可能出现\r\n\r\n）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">普通数据：[数据描述， 数据值]</span><br><span class="line">文件数据：[数据描述1\r\n数据描述2, &lt;文件内容&gt;]</span><br></pre></td></tr></table></figure>
</li>
<li><p>判断描述里有无\r\n，有是文件数据，没有则是普通数据</p>
</li>
<li><p>分析“数据描述”</p>
</li>
</ol>
<h4 id="对Buffer数据进行"><a href="#对Buffer数据进行" class="headerlink" title="对Buffer数据进行"></a>对Buffer数据进行</h4><ol>
<li>查找：indexOf()</li>
<li>截取：slice(s, e)</li>
<li>切分：split()<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> common = <span class="built_in">require</span>(<span class="string">'../libs/common'</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">const</span> uuid = <span class="built_in">require</span>(<span class="string">'uuid/v4'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 解析二进制文件上传数据</span></span><br><span class="line"><span class="keyword">let</span> post = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> files = &#123;&#125;;</span><br><span class="line"><span class="keyword">if</span>(request.headers[<span class="string">'content-type'</span>])&#123;</span><br><span class="line">    <span class="keyword">let</span> str = request.headers[<span class="string">'content-type'</span>].split(<span class="string">'; '</span>)[<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">if</span>(str) &#123;</span><br><span class="line">        <span class="keyword">let</span> boundary = <span class="string">'--'</span> + str.split(<span class="string">'='</span>)[<span class="number">1</span>];</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 1. 用&lt;分隔符&gt;切开数据</span></span><br><span class="line">        <span class="keyword">let</span> arr = data.split(boundary);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 2. 丢弃头尾元素</span></span><br><span class="line">        arr.shift();</span><br><span class="line">        arr.pop();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 3. 丢弃每一项头尾\r\n</span></span><br><span class="line">        arr.map(<span class="function"><span class="params">buffer</span> =&gt;</span> buffer.slice(<span class="number">2</span>, buffer.length - <span class="number">2</span>));</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 4. 每个数据在第一个连续\r\n处切成两半</span></span><br><span class="line">        arr.forEach(<span class="function"><span class="params">buffer</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> n = buffer.indexOf(<span class="string">'\r\n\r\n'</span>);</span><br><span class="line">            <span class="keyword">let</span> disposition = buffer.splice(<span class="number">0</span>, n);</span><br><span class="line">            <span class="keyword">let</span> content = buffer.splice(n+<span class="number">4</span>);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 判断普通数据和文件数据</span></span><br><span class="line">            <span class="keyword">if</span>(disposition.indexOf(<span class="string">'\r\n'</span>) == <span class="number">-1</span>) &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'普通数据'</span>);</span><br><span class="line">                content = content.toString();</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">let</span> name = disposition.split(<span class="string">'; '</span>)[<span class="number">1</span>].split(<span class="string">'='</span>)[<span class="number">1</span>];</span><br><span class="line">                name = name.substring(<span class="number">1</span>, name.length<span class="number">-1</span>);</span><br><span class="line">                </span><br><span class="line">                post[name] = content;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'文件数据'</span>);</span><br><span class="line">                <span class="keyword">let</span> [line1, line2] = disposition.split(<span class="string">'\r\n'</span>);</span><br><span class="line">                <span class="keyword">let</span> [, name, filename] = line1.split(<span class="string">'; '</span>);</span><br><span class="line">                <span class="keyword">let</span> type = line2.split(<span class="string">': '</span>)[<span class="number">1</span>];</span><br><span class="line">                </span><br><span class="line">                name = name.split(<span class="string">'='</span>)[<span class="number">1</span>];</span><br><span class="line">                filename = filename.substring(<span class="number">1</span>, filename.length<span class="number">-1</span>);</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">let</span> path = <span class="string">`upload/<span class="subst">$&#123;uuid().replace(<span class="regexp">/\-/g</span>, <span class="string">''</span>)&#125;</span>`</span>;</span><br><span class="line">                </span><br><span class="line">                fs.writeFile(path, content, err =&gt; &#123;</span><br><span class="line">                    <span class="keyword">if</span>(err) &#123;</span><br><span class="line">                        <span class="built_in">console</span>.log(<span class="string">'文件写入失败'</span>);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="built_in">console</span>.log(<span class="string">'文件写入成功'</span>);</span><br><span class="line">                        files[name] = &#123;filename, path, type&#125;;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">                </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 5. 完成</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>问题：</p>
<ol>
<li>会等到所有数据都到达才开始处理<br>正确做法：收到一部分就解析一部分。  极大的节约内存。</li>
<li>fs.readFile():先把所有数据全部读到内存，然后回调，极其占用内存，资源利用极其不充分。<br>流：读一点、发一点</li>
<li>fs.writeFilte()</li>
</ol>
<h4 id="流"><a href="#流" class="headerlink" title="流"></a>流</h4><ol>
<li>读取流  fs.createReadStream, req</li>
<li>写入流  fs.createWriteStream, res</li>
<li>读写流  压缩(zlib)、加密<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> rs = fs.createReadStream(<span class="string">'1.txt'</span>);</span><br><span class="line"><span class="keyword">let</span> ws = fs.createWriteStream(<span class="string">'2.txt'</span>);</span><br><span class="line"></span><br><span class="line">rs.pipe(ws);</span><br><span class="line"></span><br><span class="line">rs.on(<span class="string">'error'</span>, err =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'读取失败'</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">ws.on(<span class="string">'finish'</span>, () =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'写入完成'</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">const</span> zlib = <span class="built_in">require</span>(<span class="string">'zlib'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> server = http.createServer(<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> rs = fs.createReadStream(<span class="string">`www<span class="subst">$&#123;req.url&#125;</span>`</span>);</span><br><span class="line">    <span class="comment">// res.pipe(rs);</span></span><br><span class="line">    <span class="keyword">let</span> gz = zlib.createGzip();</span><br><span class="line">    rs.pipe(gz).pipe(rs);</span><br><span class="line">    </span><br><span class="line">    rs.on(<span class="string">'error'</span>, err =&gt; &#123;</span><br><span class="line">        res.writeHeader(<span class="number">404</span>);</span><br><span class="line">        res.write(<span class="string">'Not Found'</span>);</span><br><span class="line">        </span><br><span class="line">        res.end();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line">server.listen(<span class="number">8080</span>);</span><br></pre></td></tr></table></figure>

<p>压缩</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> zlib = <span class="built_in">require</span>(<span class="string">'zlib'</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> rs = fs.createReadStream(<span class="string">'jquery.js'</span>);</span><br><span class="line"><span class="keyword">let</span> ws = fs.createWriteStream(<span class="string">'jquery.js.zip'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> gz = zlib.createGzip();</span><br><span class="line"></span><br><span class="line">rs.pipe(gz).pipe(ws);</span><br><span class="line"></span><br><span class="line">ws.on(<span class="string">'finish'</span>, () =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'完成'</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/04/05/web全栈/nodejs缓存、多进程、mysql/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="朱程程">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/first.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小二、上酒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/04/05/web全栈/nodejs缓存、多进程、mysql/" itemprop="url">nodejs缓存、多进程、mysql</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-04-05T17:38:14+08:00">
                2022-04-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web全栈/" itemprop="url" rel="index">
                    <span itemprop="name">web全栈</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="缓存"><a href="#缓存" class="headerlink" title="缓存"></a>缓存</h3><p>缓存会极大提升性能<br>缓存策略：<br>cache-control<br>expires</p>
<p>缓存实现过程：</p>
<ol>
<li>第一次S -&gt; C:”Last-Modified: XX时间”</li>
<li>第二次C -&gt; S:”If-Modified-Since: XX时间”</li>
<li>第三次S -&gt; C: 200 || 304</li>
</ol>
<p>获取文件信息fs.stat</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> serve = http.createServer(<span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line">    fs.stat(<span class="string">`www<span class="subst">$&#123;pathname&#125;</span>`</span>, (err, stat) =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span>(err) &#123;</span><br><span class="line">            <span class="comment">// console.log('获取文件信息失败');</span></span><br><span class="line">            response.writeHeader(<span class="number">404</span>);</span><br><span class="line">            response.write(<span class="string">'Not Found'</span>);</span><br><span class="line">            response.end();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// console.log(stat.mtime.toGMTString());</span></span><br><span class="line">            <span class="keyword">if</span>(request.headers[<span class="string">'if-modified-since'</span>])&#123;</span><br><span class="line">                <span class="keyword">let</span> oDate = <span class="keyword">new</span> <span class="built_in">Date</span>(request.headers[<span class="string">'if-modified-since'</span>]);</span><br><span class="line">                <span class="keyword">let</span> time_client = <span class="built_in">Math</span>.floor(oDate.getTime()/<span class="number">1000</span>);</span><br><span class="line">                <span class="keyword">let</span> time_server = <span class="built_in">Math</span>.floor(stat.mtime.getTime()/<span class="number">1000</span>);</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span>(time_server &gt; time_client) &#123; <span class="comment">// 服务器的文件比客户端文件新</span></span><br><span class="line">                    sendFileToClient()</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    response.writeHeader(<span class="number">304</span>);</span><br><span class="line">                    response.write(<span class="string">'Not Modified'</span>);</span><br><span class="line">                    response.end();</span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                sendFileToClient()</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="function"><span class="keyword">function</span> <span class="title">sendFileToClient</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="comment">// 发送</span></span><br><span class="line">                <span class="keyword">let</span> rs = fs.createReadStream(<span class="string">`www<span class="subst">$&#123;pathname&#125;</span>`</span>);</span><br><span class="line">                response.setHeader(<span class="string">'Last-Modified'</span>, stat.mtime.toGMTString());</span><br><span class="line">                </span><br><span class="line">                <span class="comment">// 输出</span></span><br><span class="line">                rs.pipe(response);</span><br><span class="line">                </span><br><span class="line">                rs.on(<span class="string">'error'</span>, err =&gt; &#123;</span><br><span class="line">                    response.writeHeader(<span class="number">404</span>);</span><br><span class="line">                    response.write(<span class="string">'Not Found'</span>);</span><br><span class="line">                    response.end();</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>将日期数据转换成格式化</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> oDate = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(oDate.toUTCString());</span><br><span class="line"><span class="built_in">console</span>.log(oDate.toGMTString());</span><br></pre></td></tr></table></figure>

<h3 id="多进程"><a href="#多进程" class="headerlink" title="多进程"></a>多进程</h3><ul>
<li>多线程：性能高；复杂、考验程序员</li>
<li>多进程：性能略低；简单、对程序员要求低</li>
</ul>
<p>Node.js默认：单进程、单线程<br>多进程  </p>
<p>主进程：负责派生子进程<br>子进程：干活</p>
<h4 id="进程"><a href="#进程" class="headerlink" title="进程"></a>进程</h4><ol>
<li>普通程序不能“创建”进程，只有系统进程才能创建进程。</li>
<li>进程是分裂出来的</li>
<li>分裂出来的两个进程执行的是同一套代码</li>
<li>父子进程之间可以共享“句柄”(端口)</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cluster = <span class="built_in">require</span>(<span class="string">'cluster'</span>);</span><br><span class="line"><span class="keyword">const</span> os = <span class="built_in">require</span>(<span class="string">'os'</span>);</span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</span><br><span class="line"><span class="keyword">const</span> process = <span class="built_in">require</span>(<span class="string">'process'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(cluster.isMaster) &#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;os.cpus().length;i++) &#123;</span><br><span class="line">        cluster.fork();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'主进程'</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 子进程</span></span><br><span class="line">    <span class="keyword">let</span> server = http.createServer(<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(process.pid);</span><br><span class="line">        res.write(<span class="string">'aaa'</span>);</span><br><span class="line">        res.end();</span><br><span class="line">    &#125;);</span><br><span class="line">    server.listen(<span class="number">8080</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'abc'</span>);</span><br></pre></td></tr></table></figure>

<p>进程调度——需要开销，只有第一个进程满了，才会启用第二个，前面都满了才会启用下一个。</p>
<h3 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h3><ol>
<li>服务端：wamp里面的mysql，单独装的MySQL的server</li>
<li>客户端：Nodejs、Java、PHP、Navicat for MySQL</li>
</ol>
<h5 id="1-连接"><a href="#1-连接" class="headerlink" title="1.连接"></a>1.连接</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> db = mysql.createConnection(&#123;host, port, user, password, database&#125;);</span><br></pre></td></tr></table></figure>

<h5 id="2-查询"><a href="#2-查询" class="headerlink" title="2.查询"></a>2.查询</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.query(<span class="string">'做什么'</span>, (err, data) =&gt; &#123;&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h4><p>四大查询语句</p>
<ul>
<li><p>增(INSERT)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> 表 （字段列表） <span class="keyword">VALUES</span>(值列表)</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">USER</span> (<span class="keyword">name</span>, gender,chinese,math,english) <span class="keyword">VALUES</span>(<span class="string">'zhangsan'</span>, <span class="string">'man'</span>, <span class="number">55</span>, <span class="number">65</span> <span class="number">87</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>删(DELETE)<br>不会重用已删除ID</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> 表 <span class="keyword">WHERE</span> 条件</span><br></pre></td></tr></table></figure>
</li>
<li><p>改(UPDATE)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> 表 <span class="keyword">SET</span> 字段=值，... <span class="keyword">WHERE</span> 条件</span><br></pre></td></tr></table></figure>
</li>
<li><p>查(SELECT)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELETE 字段列表 FROM 表;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="node中使用mysql"><a href="#node中使用mysql" class="headerlink" title="node中使用mysql"></a>node中使用mysql</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mysql = <span class="built_in">require</span>(<span class="string">'mysql'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> db = mysql.createConnection(&#123;</span><br><span class="line">  host: <span class="string">'localhost'</span>,</span><br><span class="line">  user: <span class="string">'root'</span>,</span><br><span class="line">  password: <span class="string">'admin'</span>,</span><br><span class="line">  port: <span class="number">3306</span>,</span><br><span class="line">  database: <span class="string">'user_test'</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// let sq = `insert into book (id,name,author,publish,pages,price,bookcaseid,abled) values(0,'雪中悍刀行', '烽火戏诸侯', '江苏文艺出版社', 100000, 100, 10, 1);`;</span></span><br><span class="line"><span class="keyword">let</span> sq = <span class="string">`insert into grade (id,name,gender,chinese,math,english) values(1,'李四', '男', 87, 88, 98);`</span></span><br><span class="line"></span><br><span class="line">db.query(sq, (err, data) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span>(err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'error'</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h5 id="sql注入"><a href="#sql注入" class="headerlink" title="sql注入"></a>sql注入</h5><p>就是在SQL请求语句中，变量中另有SQL语句，导致原本语句变义。</p>
<h4 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h4><p>注册： /reg?username=XXX&amp;pass=XXX<br>=&gt; {err: 0, msg: ‘原因’}</p>
<p>登陆：/login?username=XXX&amp;pass=XXX<br>=&gt; {err: 0, msg: ‘原因’}</p>
<p>关闭占用端口的服务</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">netstat -ano|findstr 52330</span><br><span class="line">taskkill /f /t /im 5880</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/first.jpg" alt="朱程程">
            
              <p class="site-author-name" itemprop="name">朱程程</p>
              <p class="site-description motion-element" itemprop="description">人生当苦无妨，良人当归即好</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">68</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/devil-chengcheng" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-globe"></i>GitHub</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">朱程程</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
